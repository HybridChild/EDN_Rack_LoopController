   1               		.file	"System.cpp"
   2               	__SP_H__ = 0x3e
   3               	__SP_L__ = 0x3d
   4               	__SREG__ = 0x3f
   5               	__tmp_reg__ = 0
   6               	__zero_reg__ = 1
   7               		.text
   8               	.Ltext0:
   9               		.cfi_sections	.debug_frame
  10               	.global	_Z30System_HandleTempSelectTimeoutv
  12               	_Z30System_HandleTempSelectTimeoutv:
  13               	.LFB4:
  14               		.file 1 "System.cpp"
   1:System.cpp    **** /*
   2:System.cpp    ****  * System.cpp
   3:System.cpp    ****  *
   4:System.cpp    ****  * Created: 03-02-2020 20:56:34
   5:System.cpp    ****  *  Author: Esben
   6:System.cpp    ****  */ 
   7:System.cpp    **** 
   8:System.cpp    **** #include <avr/eeprom.h>
   9:System.cpp    **** #include "System.h"
  10:System.cpp    **** #include "MCP23017.h"
  11:System.cpp    **** #include "InputCapture.h"
  12:System.cpp    **** #include "SP10281_3x7segment.h"
  13:System.cpp    **** #include "RotaryEncoder.h"
  14:System.cpp    **** #include "PedalCom.h"
  15:System.cpp    **** #include "UI.h"
  16:System.cpp    **** #include "Tuner.h"
  17:System.cpp    **** #include "util.h"
  18:System.cpp    **** 
  19:System.cpp    **** void System_UpdateUI_LEDs();
  20:System.cpp    **** void System_UpdateUI_Relays();
  21:System.cpp    **** void System_ChangePreset();
  22:System.cpp    **** void System_UpdateLoopCtrl();
  23:System.cpp    **** 
  24:System.cpp    **** volatile uint16_t System_TempSelectOvfCnt = 0;
  25:System.cpp    **** volatile bool System_TempSelectFlag = false;
  26:System.cpp    **** volatile uint16_t System_MarkSelectionOvfCnt = 0;
  27:System.cpp    **** volatile bool System_MarkSelectionFlag = false;
  28:System.cpp    **** 
  29:System.cpp    **** volatile System_State SystemState = BOOT_UP;
  30:System.cpp    **** volatile System_State LastSystemState = BOOT_UP;
  31:System.cpp    **** volatile System_Preset ActivePreset = PRESET_1;
  32:System.cpp    **** volatile System_Preset LastActivePreset = PRESET_1;
  33:System.cpp    **** volatile System_Preset TempSelectPreset = PRESET_1;
  34:System.cpp    **** volatile System_Preset LastTempSelectPreset = PRESET_1;
  35:System.cpp    **** volatile System_RunMode SystemRunMode = RUN_PRESET_MODE;
  36:System.cpp    **** volatile MIDI_Channel TempSelectMidiChannel = MIDI_CH_OMNI;
  37:System.cpp    **** volatile MIDI_Channel LastTempSelectMidiChannel = MIDI_CH_OMNI;
  38:System.cpp    **** volatile MIDI_Channel System_MidiChannel = MIDI_CH_OMNI;
  39:System.cpp    **** volatile System_UI_Mode SystemUIMode = MODE_RUN;
  40:System.cpp    **** volatile System_UI_Mode LastSystemUIMode = MODE_RUN;
  41:System.cpp    **** volatile System_SetMidiEdit SetMidiEdit = MIDI_IN;
  42:System.cpp    **** volatile uint8_t TempSelectMidiPC = 0;
  43:System.cpp    **** volatile uint8_t LastTempSelectMidiPC = 0;
  44:System.cpp    **** 
  45:System.cpp    **** Preset PresetTable[NUMBER_OF_PRESETS];
  46:System.cpp    **** Preset LoopModePreset = {0, 0, MIDI_PC_OFF, MIDI_PC_OFF};
  47:System.cpp    **** Preset LastLoopModePreset = {0, 0, MIDI_PC_OFF, MIDI_PC_OFF};
  48:System.cpp    **** 
  49:System.cpp    **** volatile uint8_t UserEditSelection = 0;
  50:System.cpp    **** volatile uint8_t LastUserEditSelection = 0;
  51:System.cpp    **** 
  52:System.cpp    **** void System_Run()
  53:System.cpp    **** {
  54:System.cpp    **** 	switch (SystemState)
  55:System.cpp    **** 	{
  56:System.cpp    **** 		case BOOT_UP:
  57:System.cpp    **** 			/* Fill preset table from EEPROM */
  58:System.cpp    **** 			eeprom_read_block((void*)PresetTable, (void*)EEPROM_PRESETS_BASE_ADDR, sizeof(Preset) * NUMBER_O
  59:System.cpp    **** 			
  60:System.cpp    **** 			/* Get device MIDI channel from EEPROM */
  61:System.cpp    **** 			System_MidiChannel = (MIDI_Channel)eeprom_read_byte((uint8_t*)EEPROM_MIDI_CH_ADDR);
  62:System.cpp    **** 			
  63:System.cpp    **** 			if (System_MidiChannel > MIDI_CH_MAX)
  64:System.cpp    **** 			{
  65:System.cpp    **** 				System_MidiChannel = MIDI_CH_OMNI;
  66:System.cpp    **** 				eeprom_write_byte((uint8_t*)EEPROM_MIDI_CH_ADDR, System_MidiChannel);
  67:System.cpp    **** 			}
  68:System.cpp    **** 			
  69:System.cpp    **** 			/* Check if button pressed for MIDI channel edit */
  70:System.cpp    **** 			if (RotaryEncoder_IsPressed())
  71:System.cpp    **** 			{
  72:System.cpp    **** 				/* Update UI mode LEDs */
  73:System.cpp    **** 				ModeRunLED.Clear();
  74:System.cpp    **** 				ModeEditPresetLED.Clear();
  75:System.cpp    **** 				ModeEditMidiLED.Set();
  76:System.cpp    **** 				
  77:System.cpp    **** 				if (System_MidiChannel == MIDI_CH_OMNI)
  78:System.cpp    **** 				{
  79:System.cpp    **** 					SP10281_WriteAll('o', 'm', 'n', 0, 0, 0);
  80:System.cpp    **** 				} 
  81:System.cpp    **** 				else
  82:System.cpp    **** 				{
  83:System.cpp    **** 					SP10281_WriteNumber(System_MidiChannel);
  84:System.cpp    **** 				}
  85:System.cpp    **** 				
  86:System.cpp    **** 				SystemState = EDIT_MIDI_CHANNEL;
  87:System.cpp    **** 			} 
  88:System.cpp    **** 			else
  89:System.cpp    **** 			{
  90:System.cpp    **** 				SystemState = INITIALIZE_SYSTEM;
  91:System.cpp    **** 			}
  92:System.cpp    **** 			
  93:System.cpp    **** 			break;
  94:System.cpp    **** 		
  95:System.cpp    **** 		case EDIT_MIDI_CHANNEL:
  96:System.cpp    **** 			/* If user is selecting new MIDI channel */
  97:System.cpp    **** 			if (TempSelectMidiChannel != LastTempSelectMidiChannel)
  98:System.cpp    **** 			{
  99:System.cpp    **** 				/* Write selected MIDI channel to 7-segment display */
 100:System.cpp    **** 				if (TempSelectMidiChannel == MIDI_CH_OMNI)
 101:System.cpp    **** 				{
 102:System.cpp    **** 					SP10281_WriteAll('o', 'm', 'n', 0, 0, 0);
 103:System.cpp    **** 				}
 104:System.cpp    **** 				else
 105:System.cpp    **** 				{
 106:System.cpp    **** 					SP10281_WriteNumber(TempSelectMidiChannel);
 107:System.cpp    **** 				}
 108:System.cpp    **** 				
 109:System.cpp    **** 				/* Start timer */
 110:System.cpp    **** 				System_TempSelectOvfCnt = 1;
 111:System.cpp    **** 			}
 112:System.cpp    **** 			
 113:System.cpp    **** 			LastTempSelectMidiChannel = TempSelectMidiChannel;
 114:System.cpp    **** 			
 115:System.cpp    **** 			break;
 116:System.cpp    **** 		
 117:System.cpp    **** 		case INITIALIZE_SYSTEM:			
 118:System.cpp    **** 			/* Write active preset to 7-segment display */
 119:System.cpp    **** 			SP10281_WriteNumber(ActivePreset + 1);
 120:System.cpp    **** 			
 121:System.cpp    **** 			/* Update mode LEDs */
 122:System.cpp    **** 			ModeRunLED.Set();
 123:System.cpp    **** 			ModeEditPresetLED.Clear();
 124:System.cpp    **** 			ModeEditMidiLED.Clear();
 125:System.cpp    **** 
 126:System.cpp    **** 			if (LastSystemState == TUNER)
 127:System.cpp    **** 			{
 128:System.cpp    **** 				Tuner_Disable();
 129:System.cpp    **** 			}
 130:System.cpp    **** 			
 131:System.cpp    **** 			/* Set appropriate System State */
 132:System.cpp    **** 			if (SystemRunMode == RUN_PRESET_MODE)
 133:System.cpp    **** 			{
 134:System.cpp    **** 				SystemState = ENTER_RUN_PRESET_CTRL;
 135:System.cpp    **** 			}
 136:System.cpp    **** 			else if (SystemRunMode == RUN_LOOP_MODE)
 137:System.cpp    **** 			{
 138:System.cpp    **** 				SystemState = ENTER_RUN_LOOP_CTRL;
 139:System.cpp    **** 			}
 140:System.cpp    **** 			
 141:System.cpp    **** 			break;
 142:System.cpp    **** 			
 143:System.cpp    **** 		case ENTER_RUN_PRESET_CTRL:
 144:System.cpp    **** 			/* Update state variables */
 145:System.cpp    **** 			SystemRunMode = RUN_PRESET_MODE;
 146:System.cpp    **** 			SystemState = RUN_PRESET_CTRL;
 147:System.cpp    **** 			
 148:System.cpp    **** 			/* Stop timer */
 149:System.cpp    **** 			System_TempSelectOvfCnt = 0;
 150:System.cpp    **** 			
 151:System.cpp    **** 			/* Change LastActivePreset to force update */
 152:System.cpp    **** 			LastActivePreset = System_Preset(ActivePreset ^ (1 << 0));
 153:System.cpp    **** 			
 154:System.cpp    **** 		case RUN_PRESET_CTRL:
 155:System.cpp    **** 			/* If active preset has changed since last cycle then update system */
 156:System.cpp    **** 			if (ActivePreset != LastActivePreset)
 157:System.cpp    **** 			{
 158:System.cpp    **** 				System_ChangePreset();
 159:System.cpp    **** 			}
 160:System.cpp    **** 			
 161:System.cpp    **** 			/* If user is browsing presets */
 162:System.cpp    **** 			if (TempSelectPreset != LastTempSelectPreset)
 163:System.cpp    **** 			{
 164:System.cpp    **** 				/* Update 7-segment display */
 165:System.cpp    **** 				SP10281_WriteNumber(TempSelectPreset + 1);
 166:System.cpp    **** 								
 167:System.cpp    **** 				/* Update UI LEDs */
 168:System.cpp    **** 				LoopModePreset = PresetTable[TempSelectPreset];
 169:System.cpp    **** 				System_UpdateUI_LEDs();
 170:System.cpp    **** 			}
 171:System.cpp    **** 			
 172:System.cpp    **** 			break;
 173:System.cpp    **** 		
 174:System.cpp    **** 		case ENTER_RUN_LOOP_CTRL:
 175:System.cpp    **** 			/* Update 7-segment display */
 176:System.cpp    **** 			SP10281_WriteAll('M', 'L', 'C', 0, 0, 0);
 177:System.cpp    **** 			
 178:System.cpp    **** 			/* Update state variables */
 179:System.cpp    **** 			SystemRunMode = RUN_LOOP_MODE;
 180:System.cpp    **** 			SystemState = RUN_LOOP_CTRL;
 181:System.cpp    **** 			
 182:System.cpp    **** 			/* Stop timer */
 183:System.cpp    **** 			System_TempSelectOvfCnt = 0;
 184:System.cpp    **** 			
 185:System.cpp    **** 			/* Change LastLoopModePreset to force update */
 186:System.cpp    **** 			LastLoopModePreset.Active_Loops = LoopModePreset.Active_Loops ^ (1 << 0);
 187:System.cpp    **** 			
 188:System.cpp    **** 		case RUN_LOOP_CTRL:
 189:System.cpp    **** 			/* If active loops or ctrl switches has changed since last cycle */
 190:System.cpp    **** 			if (LoopModePreset != LastLoopModePreset)
 191:System.cpp    **** 			{
 192:System.cpp    **** 				System_UpdateLoopCtrl();
 193:System.cpp    **** 			}
 194:System.cpp    **** 			
 195:System.cpp    **** 			/* If user is browsing presets */
 196:System.cpp    **** 			if (TempSelectPreset != LastTempSelectPreset)
 197:System.cpp    **** 			{
 198:System.cpp    **** 				/* Update 7-segment display */
 199:System.cpp    **** 				SP10281_WriteNumber(TempSelectPreset + 1);
 200:System.cpp    **** 							
 201:System.cpp    **** 				/* Update UI LEDs */
 202:System.cpp    **** 				LoopModePreset = PresetTable[TempSelectPreset];
 203:System.cpp    **** 				System_UpdateUI_LEDs();
 204:System.cpp    **** 			}
 205:System.cpp    **** 			
 206:System.cpp    **** 			break;
 207:System.cpp    **** 		
 208:System.cpp    **** 		case ENTER_TUNER:
 209:System.cpp    **** 			/* Activate tuner function */
 210:System.cpp    **** 			Tuner_Enable();
 211:System.cpp    **** 
 212:System.cpp    **** 			/* Update 7-segment display */
 213:System.cpp    **** 			SP10281_WriteAll('t', 'u', 'n', 0, 0, 0);
 214:System.cpp    **** 			
 215:System.cpp    **** 			SystemState = TUNER;
 216:System.cpp    **** 
 217:System.cpp    **** 		case TUNER:
 218:System.cpp    **** 			/* Analyze InputCapture data if new counts are available */
 219:System.cpp    **** 			if (InputCapture_Available())
 220:System.cpp    **** 			{
 221:System.cpp    **** 				Tuner_FetchCounts();
 222:System.cpp    **** 				Tuner_DetectFrequency();
 223:System.cpp    **** 			}
 224:System.cpp    **** 
 225:System.cpp    **** 			if (Tuner_TransmitTimerFlag)
 226:System.cpp    **** 			{
 227:System.cpp    **** 				Tuner_TransmitTimerFlag = false;
 228:System.cpp    **** 
 229:System.cpp    **** 				Tuner_GenerateDisplayData();
 230:System.cpp    **** 				PedalCom_QueueCommand(UpdateTunerLEDs, 2, (uint8_t*)&Tuner_LED_Data);
 231:System.cpp    **** 				PedalCom_QueueCommand(Update7segments, 4, (uint8_t*)&Tuner_7seg_Data);
 232:System.cpp    **** 			}
 233:System.cpp    **** 
 234:System.cpp    **** 			break;
 235:System.cpp    **** 		
 236:System.cpp    **** 		case ENTER_EDIT_UI_MODE:
 237:System.cpp    **** 			/* Change LastSystemUIMode to force update */
 238:System.cpp    **** 			LastSystemUIMode = System_UI_Mode(SystemUIMode ^ (1 << 0));
 239:System.cpp    **** 			
 240:System.cpp    **** 			System_ChangePreset();
 241:System.cpp    **** 			
 242:System.cpp    **** 			SystemState = EDIT_UI_MODE;
 243:System.cpp    **** 			
 244:System.cpp    **** 		case EDIT_UI_MODE:
 245:System.cpp    **** 			/* If user is changing the UI mode then update mode LEDs*/
 246:System.cpp    **** 			if (SystemUIMode != LastSystemUIMode)
 247:System.cpp    **** 			{
 248:System.cpp    **** 				if (SystemUIMode == MODE_RUN)
 249:System.cpp    **** 				{
 250:System.cpp    **** 					ModeRunLED.AutoToggle();
 251:System.cpp    **** 					ModeEditPresetLED.Clear();
 252:System.cpp    **** 					ModeEditMidiLED.Clear();
 253:System.cpp    **** 				}
 254:System.cpp    **** 				else if (SystemUIMode == MODE_EDIT_PRESET)
 255:System.cpp    **** 				{
 256:System.cpp    **** 					ModeRunLED.Clear();
 257:System.cpp    **** 					ModeEditPresetLED.AutoToggle();
 258:System.cpp    **** 					ModeEditMidiLED.Clear();
 259:System.cpp    **** 				}
 260:System.cpp    **** 				else if (SystemUIMode == MODE_EDIT_MIDI)
 261:System.cpp    **** 				{
 262:System.cpp    **** 					ModeRunLED.Clear();
 263:System.cpp    **** 					ModeEditPresetLED.Clear();
 264:System.cpp    **** 					ModeEditMidiLED.AutoToggle();
 265:System.cpp    **** 				}
 266:System.cpp    **** 			}
 267:System.cpp    **** 			
 268:System.cpp    **** 			LastSystemUIMode = SystemUIMode;
 269:System.cpp    **** 			
 270:System.cpp    **** 			break;
 271:System.cpp    **** 		
 272:System.cpp    **** 		case ENTER_EDIT_PRESET:
 273:System.cpp    **** 			/* Disable Auto toggle */
 274:System.cpp    **** 			ModeRunLED.Clear();
 275:System.cpp    **** 			ModeEditPresetLED.Set();
 276:System.cpp    **** 			ModeEditMidiLED.Clear();
 277:System.cpp    **** 			
 278:System.cpp    **** 			LoopModePreset = PresetTable[ActivePreset];
 279:System.cpp    **** 			
 280:System.cpp    **** 			UserEditSelection = 0;
 281:System.cpp    **** 			LastUserEditSelection = 1;
 282:System.cpp    **** 			
 283:System.cpp    **** 			SystemState = EDIT_PRESET;
 284:System.cpp    **** 			
 285:System.cpp    **** 		case EDIT_PRESET:
 286:System.cpp    **** 			/* If user is selecting */
 287:System.cpp    **** 			if (UserEditSelection != LastUserEditSelection)
 288:System.cpp    **** 			{
 289:System.cpp    **** 				/* Blank LEDs except from selection */
 290:System.cpp    **** 				if (UserEditSelection <= 7)
 291:System.cpp    **** 				{
 292:System.cpp    **** 					MCP23017_WriteReg(MCP23017_UI_LEDS_ADDR, OLATA, (1 << UserEditSelection));
 293:System.cpp    **** 					MCP23017_WriteReg(MCP23017_UI_LEDS_ADDR, OLATB, (1 << UI_MODE_PRESET_LED_PIN));
 294:System.cpp    **** 				}
 295:System.cpp    **** 				else
 296:System.cpp    **** 				{
 297:System.cpp    **** 					MCP23017_WriteReg(MCP23017_UI_LEDS_ADDR, OLATA, 0x00);
 298:System.cpp    **** 					MCP23017_WriteReg(MCP23017_UI_LEDS_ADDR, OLATB, ((1 << UI_MODE_PRESET_LED_PIN) | (1 << (UserEd
 299:System.cpp    **** 				}
 300:System.cpp    **** 				
 301:System.cpp    **** 				/* Start timer */
 302:System.cpp    **** 				System_MarkSelectionOvfCnt = 1;
 303:System.cpp    **** 			}
 304:System.cpp    **** 			
 305:System.cpp    **** 			LastUserEditSelection = UserEditSelection;
 306:System.cpp    **** 			break;
 307:System.cpp    **** 			
 308:System.cpp    **** 		case ENTER_EDIT_MIDI_IN_OUT:
 309:System.cpp    **** 			/* Disable Auto toggle */
 310:System.cpp    **** 			ModeRunLED.Clear();
 311:System.cpp    **** 			ModeEditPresetLED.Clear();
 312:System.cpp    **** 			ModeEditMidiLED.Set();
 313:System.cpp    **** 			
 314:System.cpp    **** 			/* Update 7-segment display */
 315:System.cpp    **** 			if (SetMidiEdit == MIDI_IN)
 316:System.cpp    **** 			{
 317:System.cpp    **** 				SP10281_WriteAll('i', 'n', ' ', 0, 0, 0);
 318:System.cpp    **** 			}
 319:System.cpp    **** 			else
 320:System.cpp    **** 			{
 321:System.cpp    **** 				SP10281_WriteAll('o', 'u', 't', 0, 0, 0);
 322:System.cpp    **** 			}
 323:System.cpp    **** 			
 324:System.cpp    **** 			SystemState = EDIT_MIDI_IN_OUT;
 325:System.cpp    **** 			
 326:System.cpp    **** 		case EDIT_MIDI_IN_OUT:
 327:System.cpp    **** 			break;
 328:System.cpp    **** 		
 329:System.cpp    **** 		case ENTER_EDIT_MIDI_PC:
 330:System.cpp    **** 			/* Get setup for active preset */
 331:System.cpp    **** 			if (SetMidiEdit == MIDI_IN)
 332:System.cpp    **** 			{
 333:System.cpp    **** 				TempSelectMidiPC = PresetTable[ActivePreset].MIDI_PC_In;
 334:System.cpp    **** 				LastTempSelectMidiPC = PresetTable[ActivePreset].MIDI_PC_In;
 335:System.cpp    **** 			}
 336:System.cpp    **** 			else
 337:System.cpp    **** 			{
 338:System.cpp    **** 				TempSelectMidiPC = PresetTable[ActivePreset].MIDI_PC_Out;
 339:System.cpp    **** 				LastTempSelectMidiPC = PresetTable[ActivePreset].MIDI_PC_Out;
 340:System.cpp    **** 			}
 341:System.cpp    **** 			
 342:System.cpp    **** 			/* Update 7-segment display */
 343:System.cpp    **** 			if (TempSelectMidiPC == MIDI_PC_OFF)
 344:System.cpp    **** 			{
 345:System.cpp    **** 				SP10281_WriteAll('o', 'f', 'f', 0, 0, 0);
 346:System.cpp    **** 			}
 347:System.cpp    **** 			else
 348:System.cpp    **** 			{
 349:System.cpp    **** 				SP10281_WriteNumber(TempSelectMidiPC);
 350:System.cpp    **** 			}
 351:System.cpp    **** 			
 352:System.cpp    **** 			SystemState = EDIT_MIDI_PC;
 353:System.cpp    **** 			
 354:System.cpp    **** 		case EDIT_MIDI_PC:
 355:System.cpp    **** 			
 356:System.cpp    **** 			break;
 357:System.cpp    **** 		
 358:System.cpp    **** 		default:
 359:System.cpp    **** 			break;
 360:System.cpp    **** 	}
 361:System.cpp    **** 	
 362:System.cpp    **** 	LastActivePreset = ActivePreset;
 363:System.cpp    **** 	LastSystemState = SystemState;
 364:System.cpp    **** 	LastLoopModePreset = LoopModePreset;
 365:System.cpp    **** 	LastTempSelectPreset = TempSelectPreset;
 366:System.cpp    **** }
 367:System.cpp    **** 
 368:System.cpp    **** void System_HandleRotaryEncoderInput()
 369:System.cpp    **** {
 370:System.cpp    **** 	switch (SystemState)
 371:System.cpp    **** 	{
 372:System.cpp    **** 		case EDIT_MIDI_CHANNEL:
 373:System.cpp    **** 			if (RotEnc_State == SHORT_PRESS)
 374:System.cpp    **** 			{
 375:System.cpp    **** 				System_MidiChannel = TempSelectMidiChannel;
 376:System.cpp    **** 			}
 377:System.cpp    **** 			else if (RotEnc_State == LONG_PRESS)
 378:System.cpp    **** 			{
 379:System.cpp    **** 				/* Store selected MIDI channel and continue */
 380:System.cpp    **** 				System_MidiChannel = TempSelectMidiChannel;
 381:System.cpp    **** 				eeprom_write_byte((uint8_t*)EEPROM_MIDI_CH_ADDR, (uint8_t)System_MidiChannel);
 382:System.cpp    **** 				SystemState = INITIALIZE_SYSTEM;
 383:System.cpp    **** 			}
 384:System.cpp    **** 			else if (RotEnc_State == ROT_RIGHT)
 385:System.cpp    **** 			{
 386:System.cpp    **** 				/* Increment selected MIDI channel */
 387:System.cpp    **** 				if (TempSelectMidiChannel < MIDI_CH_MAX)
 388:System.cpp    **** 				{
 389:System.cpp    **** 					TempSelectMidiChannel = MIDI_Channel(TempSelectMidiChannel + 1);
 390:System.cpp    **** 				}
 391:System.cpp    **** 			}
 392:System.cpp    **** 			else if (RotEnc_State == ROT_LEFT)
 393:System.cpp    **** 			{
 394:System.cpp    **** 				/* Decrement selected MIDI channel */
 395:System.cpp    **** 				if (TempSelectMidiChannel > MIDI_CH_OMNI)
 396:System.cpp    **** 				{
 397:System.cpp    **** 					TempSelectMidiChannel = MIDI_Channel(TempSelectMidiChannel - 1);
 398:System.cpp    **** 				}
 399:System.cpp    **** 			}
 400:System.cpp    **** 
 401:System.cpp    **** 			break;
 402:System.cpp    **** 		
 403:System.cpp    **** 		case RUN_PRESET_CTRL:
 404:System.cpp    **** 		case RUN_LOOP_CTRL:
 405:System.cpp    **** 			if (RotEnc_State == SHORT_PRESS)
 406:System.cpp    **** 			{
 407:System.cpp    **** 				ActivePreset = TempSelectPreset;
 408:System.cpp    **** 				SystemState = ENTER_RUN_PRESET_CTRL;
 409:System.cpp    **** 			}
 410:System.cpp    **** 			else if (RotEnc_State == LONG_PRESS)
 411:System.cpp    **** 			{
 412:System.cpp    **** 				ActivePreset = TempSelectPreset;
 413:System.cpp    **** 				
 414:System.cpp    **** 				SystemState = ENTER_EDIT_UI_MODE;
 415:System.cpp    **** 			}
 416:System.cpp    **** 			else if (RotEnc_State == ROT_RIGHT)
 417:System.cpp    **** 			{
 418:System.cpp    **** 				/* Increment temporary selected preset */
 419:System.cpp    **** 				if (TempSelectPreset < PRESET_8)
 420:System.cpp    **** 				{
 421:System.cpp    **** 					TempSelectPreset = System_Preset(TempSelectPreset + 1);
 422:System.cpp    **** 				}
 423:System.cpp    **** 				
 424:System.cpp    **** 				/* Start timer */
 425:System.cpp    **** 				System_TempSelectOvfCnt = 1;
 426:System.cpp    **** 			}
 427:System.cpp    **** 			else if (RotEnc_State == ROT_LEFT)
 428:System.cpp    **** 			{
 429:System.cpp    **** 				/* Decrement temporary selected preset */
 430:System.cpp    **** 				if (TempSelectPreset > PRESET_1)
 431:System.cpp    **** 				{
 432:System.cpp    **** 					TempSelectPreset = System_Preset(TempSelectPreset - 1);
 433:System.cpp    **** 				}
 434:System.cpp    **** 				
 435:System.cpp    **** 				/* Start timer */
 436:System.cpp    **** 				System_TempSelectOvfCnt = 1;
 437:System.cpp    **** 			}
 438:System.cpp    **** 
 439:System.cpp    **** 			break;
 440:System.cpp    **** 			
 441:System.cpp    **** 		case EDIT_UI_MODE:
 442:System.cpp    **** 			if (RotEnc_State == SHORT_PRESS)
 443:System.cpp    **** 			{
 444:System.cpp    **** 				if (SystemUIMode == MODE_RUN)
 445:System.cpp    **** 				{
 446:System.cpp    **** 					SystemState = INITIALIZE_SYSTEM;
 447:System.cpp    **** 				}
 448:System.cpp    **** 				else if (SystemUIMode == MODE_EDIT_PRESET)
 449:System.cpp    **** 				{
 450:System.cpp    **** 					SystemState = ENTER_EDIT_PRESET;
 451:System.cpp    **** 				}
 452:System.cpp    **** 				else if (SystemUIMode == MODE_EDIT_MIDI)
 453:System.cpp    **** 				{
 454:System.cpp    **** 					SystemState = ENTER_EDIT_MIDI_IN_OUT;
 455:System.cpp    **** 				}
 456:System.cpp    **** 			}
 457:System.cpp    **** 			else if (RotEnc_State == LONG_PRESS)
 458:System.cpp    **** 			{
 459:System.cpp    **** 			}
 460:System.cpp    **** 			else if (RotEnc_State == ROT_RIGHT)
 461:System.cpp    **** 			{
 462:System.cpp    **** 				/* Increment UI mode */
 463:System.cpp    **** 				if (SystemUIMode < MODE_EDIT_MIDI)
 464:System.cpp    **** 				{
 465:System.cpp    **** 					SystemUIMode = System_UI_Mode(SystemUIMode + 1);
 466:System.cpp    **** 				}
 467:System.cpp    **** 			}
 468:System.cpp    **** 			else if (RotEnc_State == ROT_LEFT)
 469:System.cpp    **** 			{
 470:System.cpp    **** 				/* Increment UI mode */
 471:System.cpp    **** 				if (SystemUIMode > MODE_RUN)
 472:System.cpp    **** 				{
 473:System.cpp    **** 					SystemUIMode = System_UI_Mode(SystemUIMode - 1);
 474:System.cpp    **** 				}
 475:System.cpp    **** 			}
 476:System.cpp    **** 			
 477:System.cpp    **** 			break;
 478:System.cpp    **** 		
 479:System.cpp    **** 		case EDIT_PRESET:
 480:System.cpp    **** 			if (RotEnc_State == SHORT_PRESS)
 481:System.cpp    **** 			{
 482:System.cpp    **** 				/* Update temporary preset */
 483:System.cpp    **** 				if (UserEditSelection < NUMBER_OF_LOOPS)
 484:System.cpp    **** 				{
 485:System.cpp    **** 					LoopModePreset.Active_Loops ^= (1 << UserEditSelection);
 486:System.cpp    **** 				}
 487:System.cpp    **** 				else
 488:System.cpp    **** 				{
 489:System.cpp    **** 					LoopModePreset.Active_CtrlSwitches ^= (1 << (UserEditSelection - 8));
 490:System.cpp    **** 				}
 491:System.cpp    **** 				
 492:System.cpp    **** 				/* Update relays */
 493:System.cpp    **** 				//System_UpdateUI_Relays();
 494:System.cpp    **** 				
 495:System.cpp    **** 				/* Update UI LEDs */
 496:System.cpp    **** 				System_UpdateUI_LEDs();
 497:System.cpp    **** 				
 498:System.cpp    **** 			}
 499:System.cpp    **** 			else if (RotEnc_State == LONG_PRESS)
 500:System.cpp    **** 			{
 501:System.cpp    **** 				/* Store changes in EEPROM */
 502:System.cpp    **** 				eeprom_write_block((void*)&LoopModePreset, (void*)(EEPROM_PRESETS_BASE_ADDR+(ActivePreset * siz
 503:System.cpp    **** 				
 504:System.cpp    **** 				/* Update PresetTable */
 505:System.cpp    **** 				PresetTable[ActivePreset].Active_Loops = LoopModePreset.Active_Loops;
 506:System.cpp    **** 				PresetTable[ActivePreset].Active_CtrlSwitches = LoopModePreset.Active_CtrlSwitches;
 507:System.cpp    **** 				
 508:System.cpp    **** 				/* Return to Edit UI mode */
 509:System.cpp    **** 				SystemState = ENTER_EDIT_UI_MODE;
 510:System.cpp    **** 			}
 511:System.cpp    **** 			else if (RotEnc_State == ROT_RIGHT)
 512:System.cpp    **** 			{
 513:System.cpp    **** 				if (UserEditSelection < 11)
 514:System.cpp    **** 				{
 515:System.cpp    **** 					UserEditSelection++;
 516:System.cpp    **** 				}
 517:System.cpp    **** 			}
 518:System.cpp    **** 			else if (RotEnc_State == ROT_LEFT)
 519:System.cpp    **** 			{
 520:System.cpp    **** 				if (UserEditSelection > 0)
 521:System.cpp    **** 				{
 522:System.cpp    **** 					UserEditSelection--;
 523:System.cpp    **** 				}
 524:System.cpp    **** 			}
 525:System.cpp    **** 			break;
 526:System.cpp    **** 			
 527:System.cpp    **** 		case EDIT_MIDI_IN_OUT:
 528:System.cpp    **** 			if (RotEnc_State == SHORT_PRESS)
 529:System.cpp    **** 			{
 530:System.cpp    **** 				SystemState = ENTER_EDIT_MIDI_PC;
 531:System.cpp    **** 			}
 532:System.cpp    **** 			else if (RotEnc_State == LONG_PRESS)
 533:System.cpp    **** 			{
 534:System.cpp    **** 				/* Return to Edit UI mode */
 535:System.cpp    **** 				SystemState = ENTER_EDIT_UI_MODE;
 536:System.cpp    **** 			}
 537:System.cpp    **** 			else if (RotEnc_State == ROT_RIGHT)
 538:System.cpp    **** 			{
 539:System.cpp    **** 				SetMidiEdit = MIDI_OUT;
 540:System.cpp    **** 				SP10281_WriteAll('o', 'u', 't', 0, 0, 0);
 541:System.cpp    **** 			}
 542:System.cpp    **** 			else if (RotEnc_State == ROT_LEFT)
 543:System.cpp    **** 			{
 544:System.cpp    **** 				SetMidiEdit = MIDI_IN;
 545:System.cpp    **** 				SP10281_WriteAll('i', 'n', ' ', 0, 0, 0);
 546:System.cpp    **** 			}
 547:System.cpp    **** 			
 548:System.cpp    **** 			break;
 549:System.cpp    **** 			
 550:System.cpp    **** 		case EDIT_MIDI_PC:
 551:System.cpp    **** 			if (RotEnc_State == SHORT_PRESS)
 552:System.cpp    **** 			{
 553:System.cpp    **** 				/* Stop timeout timer */
 554:System.cpp    **** 				System_TempSelectOvfCnt = 0;
 555:System.cpp    **** 				
 556:System.cpp    **** 				LastTempSelectMidiPC = TempSelectMidiPC;
 557:System.cpp    **** 			}
 558:System.cpp    **** 			else if (RotEnc_State == LONG_PRESS)
 559:System.cpp    **** 			{
 560:System.cpp    **** 				if (SetMidiEdit == MIDI_IN)
 561:System.cpp    **** 				{
 562:System.cpp    **** 					PresetTable[ActivePreset].MIDI_PC_In = TempSelectMidiPC;
 563:System.cpp    **** 					eeprom_write_byte((uint8_t*)(EEPROM_PRESETS_BASE_ADDR+(ActivePreset * sizeof(Preset)) + 2), Te
 564:System.cpp    **** 				}
 565:System.cpp    **** 				else
 566:System.cpp    **** 				{
 567:System.cpp    **** 					PresetTable[ActivePreset].MIDI_PC_Out = TempSelectMidiPC;
 568:System.cpp    **** 					eeprom_write_byte((uint8_t*)(EEPROM_PRESETS_BASE_ADDR+(ActivePreset * sizeof(Preset)) + 3), Te
 569:System.cpp    **** 				}
 570:System.cpp    **** 				
 571:System.cpp    **** 				SystemState = ENTER_EDIT_MIDI_IN_OUT;
 572:System.cpp    **** 			}
 573:System.cpp    **** 			else if (RotEnc_State == ROT_RIGHT)
 574:System.cpp    **** 			{
 575:System.cpp    **** 				if (TempSelectMidiPC != MIDI_PC_MAX)
 576:System.cpp    **** 				{
 577:System.cpp    **** 					TempSelectMidiPC++;
 578:System.cpp    **** 				}
 579:System.cpp    **** 				
 580:System.cpp    **** 				/* Update 7-segment display */
 581:System.cpp    **** 				if (TempSelectMidiPC == MIDI_PC_OFF)
 582:System.cpp    **** 				{
 583:System.cpp    **** 					SP10281_WriteAll('o', 'f', 'f', 0, 0, 0);
 584:System.cpp    **** 				}
 585:System.cpp    **** 				else
 586:System.cpp    **** 				{
 587:System.cpp    **** 					SP10281_WriteNumber(TempSelectMidiPC);
 588:System.cpp    **** 				}
 589:System.cpp    **** 				
 590:System.cpp    **** 				/* Start timeout timer */
 591:System.cpp    **** 				System_TempSelectOvfCnt = 1;
 592:System.cpp    **** 			}
 593:System.cpp    **** 			else if (RotEnc_State == ROT_LEFT)
 594:System.cpp    **** 			{
 595:System.cpp    **** 				if (TempSelectMidiPC > MIDI_PC_MAX || TempSelectMidiPC == 0)
 596:System.cpp    **** 				{
 597:System.cpp    **** 					TempSelectMidiPC = MIDI_PC_OFF;
 598:System.cpp    **** 				}
 599:System.cpp    **** 				else if (TempSelectMidiPC > 0)
 600:System.cpp    **** 				{
 601:System.cpp    **** 					TempSelectMidiPC--;
 602:System.cpp    **** 				}
 603:System.cpp    **** 				
 604:System.cpp    **** 				/* Update 7-segment display */
 605:System.cpp    **** 				if (TempSelectMidiPC == MIDI_PC_OFF)
 606:System.cpp    **** 				{
 607:System.cpp    **** 					SP10281_WriteAll('o', 'f', 'f', 0, 0, 0);
 608:System.cpp    **** 				}
 609:System.cpp    **** 				else
 610:System.cpp    **** 				{
 611:System.cpp    **** 					SP10281_WriteNumber(TempSelectMidiPC);
 612:System.cpp    **** 				}
 613:System.cpp    **** 				
 614:System.cpp    **** 				/* Start timeout timer */
 615:System.cpp    **** 				System_TempSelectOvfCnt = 1;
 616:System.cpp    **** 			}
 617:System.cpp    **** 			
 618:System.cpp    **** 			break;
 619:System.cpp    **** 		
 620:System.cpp    **** 		default:
 621:System.cpp    **** 			break;
 622:System.cpp    **** 	}
 623:System.cpp    **** }
 624:System.cpp    **** 
 625:System.cpp    **** void System_HandleTempSelectTimeout()
 626:System.cpp    **** {
  15               		.loc 1 626 1 view -0
  16               		.cfi_startproc
  17 0000 EF92      		push r14
  18               	.LCFI0:
  19               		.cfi_def_cfa_offset 3
  20               		.cfi_offset 14, -2
  21 0002 0F93      		push r16
  22               	.LCFI1:
  23               		.cfi_def_cfa_offset 4
  24               		.cfi_offset 16, -3
  25               	/* prologue: function */
  26               	/* frame size = 0 */
  27               	/* stack size = 2 */
  28               	.L__stack_usage = 2
 627:System.cpp    **** 	switch (SystemState)
  29               		.loc 1 627 2 view .LVU1
  30               		.loc 1 627 10 is_stmt 0 view .LVU2
  31 0004 8091 0000 		lds r24,SystemState
  32               		.loc 1 627 2 view .LVU3
  33 0008 8630      		cpi r24,lo8(6)
  34 000a 01F0      		breq .L2
  35 000c 00F4      		brsh .L3
  36 000e 8130      		cpi r24,lo8(1)
  37 0010 01F0      		breq .L4
  38 0012 8430      		cpi r24,lo8(4)
  39 0014 01F0      		breq .L5
  40               	.L1:
  41               	/* epilogue start */
 628:System.cpp    **** 	{
 629:System.cpp    **** 		case EDIT_MIDI_CHANNEL:
 630:System.cpp    **** 			TempSelectMidiChannel = System_MidiChannel;
 631:System.cpp    **** 			break;
 632:System.cpp    **** 			
 633:System.cpp    **** 		case RUN_PRESET_CTRL:
 634:System.cpp    **** 			if (RotaryEncoder_IsPressed())
 635:System.cpp    **** 			{
 636:System.cpp    **** 				ActivePreset = TempSelectPreset;
 637:System.cpp    **** 			}
 638:System.cpp    **** 			else
 639:System.cpp    **** 			{
 640:System.cpp    **** 				TempSelectPreset = ActivePreset;
 641:System.cpp    **** 				LastTempSelectPreset = ActivePreset;
 642:System.cpp    **** 			}
 643:System.cpp    **** 
 644:System.cpp    **** 			SystemState = ENTER_RUN_PRESET_CTRL;
 645:System.cpp    **** 			break;
 646:System.cpp    **** 			
 647:System.cpp    **** 		case RUN_LOOP_CTRL:
 648:System.cpp    **** 			if (RotaryEncoder_IsPressed())
 649:System.cpp    **** 			{
 650:System.cpp    **** 				ActivePreset = TempSelectPreset;
 651:System.cpp    **** 				SystemState = ENTER_RUN_PRESET_CTRL;
 652:System.cpp    **** 			}
 653:System.cpp    **** 			else
 654:System.cpp    **** 			{
 655:System.cpp    **** 				TempSelectPreset = ActivePreset;
 656:System.cpp    **** 				LastTempSelectPreset = ActivePreset;
 657:System.cpp    **** 				SystemState = ENTER_RUN_LOOP_CTRL;
 658:System.cpp    **** 			}
 659:System.cpp    **** 			
 660:System.cpp    **** 			break;
 661:System.cpp    **** 			
 662:System.cpp    **** 		case EDIT_MIDI_PC:
 663:System.cpp    **** 			TempSelectMidiPC = LastTempSelectMidiPC;
 664:System.cpp    **** 			
 665:System.cpp    **** 			/* Update 7-segment display */
 666:System.cpp    **** 			if (TempSelectMidiPC == MIDI_PC_OFF)
 667:System.cpp    **** 			{
 668:System.cpp    **** 				SP10281_WriteAll('o', 'f', 'f', 0, 0, 0);
 669:System.cpp    **** 			}
 670:System.cpp    **** 			else
 671:System.cpp    **** 			{
 672:System.cpp    **** 				SP10281_WriteNumber(TempSelectMidiPC);
 673:System.cpp    **** 			}
 674:System.cpp    **** 			
 675:System.cpp    **** 			break;
 676:System.cpp    **** 			
 677:System.cpp    **** 		default:
 678:System.cpp    **** 			break;
 679:System.cpp    **** 	}
 680:System.cpp    **** }
  42               		.loc 1 680 1 view .LVU4
  43 0016 0F91      		pop r16
  44 0018 EF90      		pop r14
  45 001a 0895      		ret
  46               	.L3:
 627:System.cpp    **** 	switch (SystemState)
  47               		.loc 1 627 2 view .LVU5
  48 001c 8031      		cpi r24,lo8(16)
  49 001e 01F4      		brne .L1
 662:System.cpp    **** 			TempSelectMidiPC = LastTempSelectMidiPC;
  50               		.loc 1 662 3 is_stmt 1 view .LVU6
 663:System.cpp    **** 			
  51               		.loc 1 663 4 view .LVU7
 663:System.cpp    **** 			
  52               		.loc 1 663 21 is_stmt 0 view .LVU8
  53 0020 8091 0000 		lds r24,LastTempSelectMidiPC
  54 0024 8093 0000 		sts TempSelectMidiPC,r24
 666:System.cpp    **** 			{
  55               		.loc 1 666 4 is_stmt 1 view .LVU9
 666:System.cpp    **** 			{
  56               		.loc 1 666 25 is_stmt 0 view .LVU10
  57 0028 8091 0000 		lds r24,TempSelectMidiPC
 666:System.cpp    **** 			{
  58               		.loc 1 666 4 view .LVU11
  59 002c 8F3F      		cpi r24,lo8(-1)
  60 002e 01F4      		brne .L11
 668:System.cpp    **** 			}
  61               		.loc 1 668 5 is_stmt 1 view .LVU12
 668:System.cpp    **** 			}
  62               		.loc 1 668 21 is_stmt 0 view .LVU13
  63 0030 E12C      		mov r14,__zero_reg__
  64 0032 00E0      		ldi r16,0
  65 0034 20E0      		ldi r18,0
  66 0036 46E6      		ldi r20,lo8(102)
  67 0038 66E6      		ldi r22,lo8(102)
  68 003a 8FE6      		ldi r24,lo8(111)
  69 003c 0E94 0000 		call _Z16SP10281_WriteAllccchhh
  70               	.LVL0:
  71 0040 00C0      		rjmp .L1
  72               	.L4:
 629:System.cpp    **** 			TempSelectMidiChannel = System_MidiChannel;
  73               		.loc 1 629 3 is_stmt 1 view .LVU14
 630:System.cpp    **** 			break;
  74               		.loc 1 630 4 view .LVU15
 630:System.cpp    **** 			break;
  75               		.loc 1 630 26 is_stmt 0 view .LVU16
  76 0042 8091 0000 		lds r24,System_MidiChannel
  77 0046 8093 0000 		sts TempSelectMidiChannel,r24
 631:System.cpp    **** 			
  78               		.loc 1 631 4 is_stmt 1 view .LVU17
  79 004a 00C0      		rjmp .L1
  80               	.L5:
 633:System.cpp    **** 			if (RotaryEncoder_IsPressed())
  81               		.loc 1 633 3 view .LVU18
 634:System.cpp    **** 			{
  82               		.loc 1 634 4 view .LVU19
 634:System.cpp    **** 			{
  83               		.loc 1 634 31 is_stmt 0 view .LVU20
  84 004c 0E94 0000 		call _Z23RotaryEncoder_IsPressedv
  85               	.LVL1:
 634:System.cpp    **** 			{
  86               		.loc 1 634 4 view .LVU21
  87 0050 8823      		tst r24
  88 0052 01F0      		breq .L8
  89               	.L14:
 650:System.cpp    **** 				SystemState = ENTER_RUN_PRESET_CTRL;
  90               		.loc 1 650 5 is_stmt 1 view .LVU22
 650:System.cpp    **** 				SystemState = ENTER_RUN_PRESET_CTRL;
  91               		.loc 1 650 18 is_stmt 0 view .LVU23
  92 0054 8091 0000 		lds r24,TempSelectPreset
  93 0058 8093 0000 		sts ActivePreset,r24
  94 005c 00C0      		rjmp .L13
  95               	.L8:
 640:System.cpp    **** 				LastTempSelectPreset = ActivePreset;
  96               		.loc 1 640 5 is_stmt 1 view .LVU24
 640:System.cpp    **** 				LastTempSelectPreset = ActivePreset;
  97               		.loc 1 640 22 is_stmt 0 view .LVU25
  98 005e 8091 0000 		lds r24,ActivePreset
  99 0062 8093 0000 		sts TempSelectPreset,r24
 641:System.cpp    **** 			}
 100               		.loc 1 641 5 is_stmt 1 view .LVU26
 641:System.cpp    **** 			}
 101               		.loc 1 641 26 is_stmt 0 view .LVU27
 102 0066 8091 0000 		lds r24,ActivePreset
 103 006a 8093 0000 		sts LastTempSelectPreset,r24
 644:System.cpp    **** 			break;
 104               		.loc 1 644 4 is_stmt 1 view .LVU28
 105               	.L13:
 651:System.cpp    **** 			}
 106               		.loc 1 651 5 view .LVU29
 651:System.cpp    **** 			}
 107               		.loc 1 651 17 is_stmt 0 view .LVU30
 108 006e 83E0      		ldi r24,lo8(3)
 109               	.L12:
 657:System.cpp    **** 			}
 110               		.loc 1 657 17 view .LVU31
 111 0070 8093 0000 		sts SystemState,r24
 112 0074 00C0      		rjmp .L1
 113               	.L2:
 647:System.cpp    **** 			if (RotaryEncoder_IsPressed())
 114               		.loc 1 647 3 is_stmt 1 view .LVU32
 648:System.cpp    **** 			{
 115               		.loc 1 648 4 view .LVU33
 648:System.cpp    **** 			{
 116               		.loc 1 648 31 is_stmt 0 view .LVU34
 117 0076 0E94 0000 		call _Z23RotaryEncoder_IsPressedv
 118               	.LVL2:
 648:System.cpp    **** 			{
 119               		.loc 1 648 4 view .LVU35
 120 007a 8111      		cpse r24,__zero_reg__
 121 007c 00C0      		rjmp .L14
 655:System.cpp    **** 				LastTempSelectPreset = ActivePreset;
 122               		.loc 1 655 5 is_stmt 1 view .LVU36
 655:System.cpp    **** 				LastTempSelectPreset = ActivePreset;
 123               		.loc 1 655 22 is_stmt 0 view .LVU37
 124 007e 8091 0000 		lds r24,ActivePreset
 125 0082 8093 0000 		sts TempSelectPreset,r24
 656:System.cpp    **** 				SystemState = ENTER_RUN_LOOP_CTRL;
 126               		.loc 1 656 5 is_stmt 1 view .LVU38
 656:System.cpp    **** 				SystemState = ENTER_RUN_LOOP_CTRL;
 127               		.loc 1 656 26 is_stmt 0 view .LVU39
 128 0086 8091 0000 		lds r24,ActivePreset
 129 008a 8093 0000 		sts LastTempSelectPreset,r24
 657:System.cpp    **** 			}
 130               		.loc 1 657 5 is_stmt 1 view .LVU40
 657:System.cpp    **** 			}
 131               		.loc 1 657 17 is_stmt 0 view .LVU41
 132 008e 85E0      		ldi r24,lo8(5)
 133 0090 00C0      		rjmp .L12
 134               	.L11:
 672:System.cpp    **** 			}
 135               		.loc 1 672 5 is_stmt 1 view .LVU42
 672:System.cpp    **** 			}
 136               		.loc 1 672 24 is_stmt 0 view .LVU43
 137 0092 8091 0000 		lds r24,TempSelectMidiPC
 138 0096 90E0      		ldi r25,0
 139               	/* epilogue start */
 140               		.loc 1 680 1 view .LVU44
 141 0098 0F91      		pop r16
 142 009a EF90      		pop r14
 672:System.cpp    **** 			}
 143               		.loc 1 672 24 view .LVU45
 144 009c 0C94 0000 		jmp _Z19SP10281_WriteNumbers
 145               	.LVL3:
 146               		.cfi_endproc
 147               	.LFE4:
 149               	.global	_Z26System_HandleMarkSelectionv
 151               	_Z26System_HandleMarkSelectionv:
 152               	.LFB5:
 681:System.cpp    **** 
 682:System.cpp    **** void System_HandleMarkSelection()
 683:System.cpp    **** {
 153               		.loc 1 683 1 is_stmt 1 view -0
 154               		.cfi_startproc
 155               	/* prologue: function */
 156               	/* frame size = 0 */
 157               	/* stack size = 0 */
 158               	.L__stack_usage = 0
 684:System.cpp    **** 	if (SystemState == EDIT_PRESET)
 159               		.loc 1 684 2 view .LVU47
 160               		.loc 1 684 18 is_stmt 0 view .LVU48
 161 00a0 8091 0000 		lds r24,SystemState
 162               		.loc 1 684 2 view .LVU49
 163 00a4 8C30      		cpi r24,lo8(12)
 164 00a6 01F4      		brne .L15
 685:System.cpp    **** 	{
 686:System.cpp    **** 		MCP23017_WriteReg(MCP23017_UI_LEDS_ADDR, OLATA, LoopModePreset.Active_Loops);
 165               		.loc 1 686 3 is_stmt 1 view .LVU50
 166               		.loc 1 686 20 is_stmt 0 view .LVU51
 167 00a8 4091 0000 		lds r20,LoopModePreset
 168 00ac 64E1      		ldi r22,lo8(20)
 169 00ae 80E0      		ldi r24,0
 170 00b0 0E94 0000 		call _Z17MCP23017_WriteReghhh
 171               	.LVL4:
 687:System.cpp    **** 		MCP23017_WriteReg(MCP23017_UI_LEDS_ADDR, OLATB, ((1 << UI_MODE_PRESET_LED_PIN) | (LoopModePreset.
 172               		.loc 1 687 3 is_stmt 1 view .LVU52
 173               		.loc 1 687 120 is_stmt 0 view .LVU53
 174 00b4 4091 0000 		lds r20,LoopModePreset+1
 175 00b8 4F70      		andi r20,lo8(15)
 176               		.loc 1 687 82 view .LVU54
 177 00ba 4064      		ori r20,lo8(64)
 178               		.loc 1 687 20 view .LVU55
 179 00bc 65E1      		ldi r22,lo8(21)
 180 00be 80E0      		ldi r24,0
 181 00c0 0C94 0000 		jmp _Z17MCP23017_WriteReghhh
 182               	.LVL5:
 183               	.L15:
 184               	/* epilogue start */
 688:System.cpp    **** 	}
 689:System.cpp    **** }
 185               		.loc 1 689 1 view .LVU56
 186 00c4 0895      		ret
 187               		.cfi_endproc
 188               	.LFE5:
 190               	.global	_Z25System_HandlePedalCommand3CMDhPh
 192               	_Z25System_HandlePedalCommand3CMDhPh:
 193               	.LVL6:
 194               	.LFB6:
 690:System.cpp    **** 
 691:System.cpp    **** unsigned char System_HandlePedalCommand(CMD cmd, uint8_t length, uint8_t *dat)
 692:System.cpp    **** {
 195               		.loc 1 692 1 is_stmt 1 view -0
 196               		.cfi_startproc
 197               	/* prologue: function */
 198               	/* frame size = 0 */
 199               	/* stack size = 0 */
 200               	.L__stack_usage = 0
 201               		.loc 1 692 1 is_stmt 0 view .LVU58
 202 00c6 FA01      		movw r30,r20
 693:System.cpp    **** 	unsigned char response = ACK_BYTE;
 203               		.loc 1 693 2 is_stmt 1 view .LVU59
 204               	.LVL7:
 694:System.cpp    **** 	
 695:System.cpp    **** 	if (cmd == FootswitchShortPress)
 205               		.loc 1 695 2 view .LVU60
 206               	.LBB2:
 207 00c8 813B      		cpi r24,lo8(-79)
 208 00ca 01F4      		brne .L18
 209               	.LBE2:
 696:System.cpp    **** 	{
 697:System.cpp    **** 		if (SystemState == RUN_PRESET_CTRL)
 210               		.loc 1 697 3 view .LVU61
 211               	.LBB7:
 212               	.LBB3:
 213               		.loc 1 697 19 is_stmt 0 view .LVU62
 214 00cc 8091 0000 		lds r24,SystemState
 215               	.LVL8:
 216               		.loc 1 697 3 view .LVU63
 217 00d0 8430      		cpi r24,lo8(4)
 218 00d2 01F4      		brne .L19
 219               	.LBB4:
 698:System.cpp    **** 		{
 699:System.cpp    **** 			System_Preset tmpPreset = (System_Preset)(Util_Bit2Int(dat[0]) - 1);
 220               		.loc 1 699 4 is_stmt 1 view .LVU64
 221               		.loc 1 699 58 is_stmt 0 view .LVU65
 222 00d4 8081      		ld r24,Z
 223 00d6 0E94 0000 		call _Z12Util_Bit2Inth
 224               	.LVL9:
 225               		.loc 1 699 70 view .LVU66
 226 00da 8150      		subi r24,lo8(-(-1))
 227               	.LVL10:
 700:System.cpp    **** 			
 701:System.cpp    **** 			/* Force update even if received preset is same as active preset */
 702:System.cpp    **** 			if (tmpPreset == ActivePreset)
 228               		.loc 1 702 4 is_stmt 1 view .LVU67
 229               		.loc 1 702 18 is_stmt 0 view .LVU68
 230 00dc 9091 0000 		lds r25,ActivePreset
 231               		.loc 1 702 4 view .LVU69
 232 00e0 9813      		cpse r25,r24
 233 00e2 00C0      		rjmp .L20
 703:System.cpp    **** 			{
 704:System.cpp    **** 				LastActivePreset = System_Preset(ActivePreset ^ (1 << 0));
 234               		.loc 1 704 5 is_stmt 1 view .LVU70
 235               		.loc 1 704 24 is_stmt 0 view .LVU71
 236 00e4 8091 0000 		lds r24,ActivePreset
 237               	.LVL11:
 238               		.loc 1 704 51 view .LVU72
 239 00e8 91E0      		ldi r25,lo8(1)
 240 00ea 8927      		eor r24,r25
 241               		.loc 1 704 22 view .LVU73
 242 00ec 8093 0000 		sts LastActivePreset,r24
 243               	.L21:
 705:System.cpp    **** 			}
 706:System.cpp    **** 			else
 707:System.cpp    **** 			{
 708:System.cpp    **** 				ActivePreset = tmpPreset;
 709:System.cpp    **** 			}
 710:System.cpp    **** 			
 711:System.cpp    **** 			TempSelectPreset = ActivePreset;
 244               		.loc 1 711 4 is_stmt 1 view .LVU74
 245               		.loc 1 711 21 is_stmt 0 view .LVU75
 246 00f0 8091 0000 		lds r24,ActivePreset
 247 00f4 8093 0000 		sts TempSelectPreset,r24
 248               	.L39:
 249               		.loc 1 711 21 view .LVU76
 250               	.LBE4:
 251               	.LBE3:
 252               	.LBE7:
 693:System.cpp    **** 	
 253               		.loc 1 693 16 view .LVU77
 254 00f8 8CEA      		ldi r24,lo8(-84)
 255               	.LBB8:
 256               	.LBB6:
 257 00fa 0895      		ret
 258               	.LVL12:
 259               	.L20:
 260               	.LBB5:
 708:System.cpp    **** 			}
 261               		.loc 1 708 5 is_stmt 1 view .LVU78
 708:System.cpp    **** 			}
 262               		.loc 1 708 18 is_stmt 0 view .LVU79
 263 00fc 8093 0000 		sts ActivePreset,r24
 264 0100 00C0      		rjmp .L21
 265               	.LVL13:
 266               	.L19:
 708:System.cpp    **** 			}
 267               		.loc 1 708 18 view .LVU80
 268               	.LBE5:
 712:System.cpp    **** 		} 
 713:System.cpp    **** 		else if (SystemState == RUN_LOOP_CTRL)
 269               		.loc 1 713 8 is_stmt 1 view .LVU81
 270               		.loc 1 713 24 is_stmt 0 view .LVU82
 271 0102 8091 0000 		lds r24,SystemState
 272               		.loc 1 713 8 view .LVU83
 273 0106 8630      		cpi r24,lo8(6)
 274 0108 01F4      		brne .L42
 714:System.cpp    **** 		{
 715:System.cpp    **** 			LoopModePreset.Active_Loops ^= dat[0];
 275               		.loc 1 715 4 is_stmt 1 view .LVU84
 276               		.loc 1 715 32 is_stmt 0 view .LVU85
 277 010a 8091 0000 		lds r24,LoopModePreset
 278 010e 9081      		ld r25,Z
 279 0110 8927      		eor r24,r25
 280 0112 8093 0000 		sts LoopModePreset,r24
 281 0116 00C0      		rjmp .L39
 282               	.LVL14:
 283               	.L18:
 284               		.loc 1 715 32 view .LVU86
 285               	.LBE6:
 716:System.cpp    **** 		}
 717:System.cpp    **** 		else if (SystemState == TUNER)
 718:System.cpp    **** 		{
 719:System.cpp    **** 			SystemState = INITIALIZE_SYSTEM;
 720:System.cpp    **** 		}
 721:System.cpp    **** 	}
 722:System.cpp    **** 	else if (cmd == FootswitchLongPress)
 286               		.loc 1 722 7 is_stmt 1 view .LVU87
 287 0118 823B      		cpi r24,lo8(-78)
 288 011a 01F4      		brne .L24
 723:System.cpp    **** 	{
 724:System.cpp    **** 		if (SystemState == RUN_PRESET_CTRL)
 289               		.loc 1 724 3 view .LVU88
 290               		.loc 1 724 19 is_stmt 0 view .LVU89
 291 011c 8091 0000 		lds r24,SystemState
 292               	.LVL15:
 293               		.loc 1 724 3 view .LVU90
 294 0120 8430      		cpi r24,lo8(4)
 295 0122 01F4      		brne .L25
 725:System.cpp    **** 		{
 726:System.cpp    **** 			SystemRunMode = RUN_LOOP_MODE;
 296               		.loc 1 726 4 is_stmt 1 view .LVU91
 297               		.loc 1 726 18 is_stmt 0 view .LVU92
 298 0124 81E0      		ldi r24,lo8(1)
 299 0126 8093 0000 		sts SystemRunMode,r24
 727:System.cpp    **** 			SystemState = INITIALIZE_SYSTEM;
 300               		.loc 1 727 4 is_stmt 1 view .LVU93
 301               	.L29:
 728:System.cpp    **** 		}
 729:System.cpp    **** 		else if (SystemState == RUN_LOOP_CTRL)
 730:System.cpp    **** 		{
 731:System.cpp    **** 			/* Determine if top or bottom row of footswitches was pressed */
 732:System.cpp    **** 			if (dat[0] & 0x0F)	// If bottom row then (de)activate Ctrl switches
 733:System.cpp    **** 			{
 734:System.cpp    **** 				LoopModePreset.Active_CtrlSwitches ^= dat[0];
 735:System.cpp    **** 			}
 736:System.cpp    **** 			else				// If top row then change to Preset mode
 737:System.cpp    **** 			{
 738:System.cpp    **** 				SystemRunMode = RUN_PRESET_MODE;
 739:System.cpp    **** 				SystemState = INITIALIZE_SYSTEM;
 740:System.cpp    **** 			}
 741:System.cpp    **** 		}
 742:System.cpp    **** 		else if (SystemState == TUNER)
 743:System.cpp    **** 		{
 744:System.cpp    **** 			SystemState = INITIALIZE_SYSTEM;
 745:System.cpp    **** 		}
 746:System.cpp    **** 	}
 747:System.cpp    **** 	else if (cmd == FootswitchLongLongPress)
 748:System.cpp    **** 	{
 749:System.cpp    **** 		if (SystemState == RUN_PRESET_CTRL || SystemState == RUN_LOOP_CTRL)
 750:System.cpp    **** 		{
 751:System.cpp    **** 			SystemState = ENTER_TUNER;
 752:System.cpp    **** 		}
 753:System.cpp    **** 		else if (SystemState == TUNER)
 754:System.cpp    **** 		{
 755:System.cpp    **** 			SystemState = INITIALIZE_SYSTEM;
 302               		.loc 1 755 4 view .LVU94
 303               		.loc 1 755 16 is_stmt 0 view .LVU95
 304 012a 82E0      		ldi r24,lo8(2)
 305 012c 00C0      		rjmp .L40
 306               	.L25:
 729:System.cpp    **** 		{
 307               		.loc 1 729 8 is_stmt 1 view .LVU96
 729:System.cpp    **** 		{
 308               		.loc 1 729 24 is_stmt 0 view .LVU97
 309 012e 8091 0000 		lds r24,SystemState
 729:System.cpp    **** 		{
 310               		.loc 1 729 8 view .LVU98
 311 0132 8630      		cpi r24,lo8(6)
 312 0134 01F4      		brne .L42
 732:System.cpp    **** 			{
 313               		.loc 1 732 4 is_stmt 1 view .LVU99
 732:System.cpp    **** 			{
 314               		.loc 1 732 13 is_stmt 0 view .LVU100
 315 0136 9081      		ld r25,Z
 732:System.cpp    **** 			{
 316               		.loc 1 732 4 view .LVU101
 317 0138 892F      		mov r24,r25
 318 013a 8F70      		andi r24,lo8(15)
 319 013c 01F0      		breq .L27
 734:System.cpp    **** 			}
 320               		.loc 1 734 5 is_stmt 1 view .LVU102
 734:System.cpp    **** 			}
 321               		.loc 1 734 40 is_stmt 0 view .LVU103
 322 013e 8091 0000 		lds r24,LoopModePreset+1
 323 0142 8927      		eor r24,r25
 324 0144 8093 0000 		sts LoopModePreset+1,r24
 325 0148 00C0      		rjmp .L39
 326               	.L27:
 738:System.cpp    **** 				SystemState = INITIALIZE_SYSTEM;
 327               		.loc 1 738 5 is_stmt 1 view .LVU104
 738:System.cpp    **** 				SystemState = INITIALIZE_SYSTEM;
 328               		.loc 1 738 19 is_stmt 0 view .LVU105
 329 014a 1092 0000 		sts SystemRunMode,__zero_reg__
 739:System.cpp    **** 			}
 330               		.loc 1 739 5 is_stmt 1 view .LVU106
 331 014e 00C0      		rjmp .L29
 332               	.LVL16:
 333               	.L24:
 747:System.cpp    **** 	{
 334               		.loc 1 747 7 view .LVU107
 335 0150 843B      		cpi r24,lo8(-76)
 336 0152 01F4      		brne .L32
 749:System.cpp    **** 		{
 337               		.loc 1 749 3 view .LVU108
 749:System.cpp    **** 		{
 338               		.loc 1 749 19 is_stmt 0 view .LVU109
 339 0154 8091 0000 		lds r24,SystemState
 340               	.LVL17:
 749:System.cpp    **** 		{
 341               		.loc 1 749 38 view .LVU110
 342 0158 8430      		cpi r24,lo8(4)
 343 015a 01F0      		breq .L28
 749:System.cpp    **** 		{
 344               		.loc 1 749 53 discriminator 2 view .LVU111
 345 015c 8091 0000 		lds r24,SystemState
 749:System.cpp    **** 		{
 346               		.loc 1 749 38 discriminator 2 view .LVU112
 347 0160 8630      		cpi r24,lo8(6)
 348 0162 01F0      		breq .L28
 349               	.L42:
 753:System.cpp    **** 		{
 350               		.loc 1 753 8 is_stmt 1 view .LVU113
 753:System.cpp    **** 		{
 351               		.loc 1 753 24 is_stmt 0 view .LVU114
 352 0164 8091 0000 		lds r24,SystemState
 753:System.cpp    **** 		{
 353               		.loc 1 753 8 view .LVU115
 354 0168 8830      		cpi r24,lo8(8)
 355 016a 01F4      		brne .L39
 356 016c 00C0      		rjmp .L29
 357               	.L28:
 751:System.cpp    **** 		}
 358               		.loc 1 751 4 is_stmt 1 view .LVU116
 751:System.cpp    **** 		}
 359               		.loc 1 751 16 is_stmt 0 view .LVU117
 360 016e 87E0      		ldi r24,lo8(7)
 361               	.L40:
 362               		.loc 1 755 16 view .LVU118
 363 0170 8093 0000 		sts SystemState,r24
 364 0174 00C0      		rjmp .L39
 365               	.LVL18:
 366               	.L32:
 756:System.cpp    **** 		}
 757:System.cpp    **** 	}
 758:System.cpp    **** 	else
 759:System.cpp    **** 	{
 760:System.cpp    **** 		response = NACK_BYTE;
 367               		.loc 1 760 12 view .LVU119
 368 0176 8AE2      		ldi r24,lo8(42)
 369               	.LVL19:
 370               		.loc 1 760 12 view .LVU120
 371               	.LBE8:
 761:System.cpp    **** 	}
 762:System.cpp    **** 	
 763:System.cpp    **** 	return response;
 372               		.loc 1 763 2 is_stmt 1 view .LVU121
 373               	/* epilogue start */
 764:System.cpp    **** }
 374               		.loc 1 764 1 is_stmt 0 view .LVU122
 375 0178 0895      		ret
 376               		.cfi_endproc
 377               	.LFE6:
 379               	.global	_Z30System_HandleMIDIProgramChangev
 381               	_Z30System_HandleMIDIProgramChangev:
 382               	.LFB7:
 765:System.cpp    **** 
 766:System.cpp    **** void System_HandleMIDIProgramChange()
 767:System.cpp    **** {
 383               		.loc 1 767 1 is_stmt 1 view -0
 384               		.cfi_startproc
 385               	/* prologue: function */
 386               	/* frame size = 0 */
 387               	/* stack size = 0 */
 388               	.L__stack_usage = 0
 768:System.cpp    **** 	for (uint8_t i = 0; i < NUMBER_OF_PRESETS; i++)
 389               		.loc 1 768 2 view .LVU124
 390               	.LVL20:
 391               	.LBB9:
 392               		.loc 1 768 24 view .LVU125
 393 017a E0E0      		ldi r30,lo8(PresetTable)
 394 017c F0E0      		ldi r31,hi8(PresetTable)
 395               		.loc 1 768 15 is_stmt 0 view .LVU126
 396 017e 80E0      		ldi r24,0
 397               	.LVL21:
 398               	.L46:
 769:System.cpp    **** 	{
 770:System.cpp    **** 		if (PresetTable[i].MIDI_PC_In == MIDI_ReceivedProgram)
 399               		.loc 1 770 3 is_stmt 1 view .LVU127
 400               		.loc 1 770 33 is_stmt 0 view .LVU128
 401 0180 9091 0000 		lds r25,MIDI_ReceivedProgram
 402               		.loc 1 770 3 view .LVU129
 403 0184 2281      		ldd r18,Z+2
 404 0186 2913      		cpse r18,r25
 405 0188 00C0      		rjmp .L45
 771:System.cpp    **** 		{
 772:System.cpp    **** 			ActivePreset = (System_Preset)i;
 406               		.loc 1 772 4 is_stmt 1 view .LVU130
 407               		.loc 1 772 17 is_stmt 0 view .LVU131
 408 018a 8093 0000 		sts ActivePreset,r24
 409               	.L45:
 768:System.cpp    **** 	{
 410               		.loc 1 768 2 is_stmt 1 discriminator 2 view .LVU132
 411 018e 8F5F      		subi r24,lo8(-(1))
 412               	.LVL22:
 768:System.cpp    **** 	{
 413               		.loc 1 768 24 discriminator 2 view .LVU133
 414 0190 3496      		adiw r30,4
 415 0192 8830      		cpi r24,lo8(8)
 416 0194 01F4      		brne .L46
 417               	/* epilogue start */
 418               	.LBE9:
 773:System.cpp    **** 		}
 774:System.cpp    **** 	}
 775:System.cpp    **** }
 419               		.loc 1 775 1 is_stmt 0 view .LVU134
 420 0196 0895      		ret
 421               		.cfi_endproc
 422               	.LFE7:
 424               	.global	_Z20System_UpdateUI_LEDsv
 426               	_Z20System_UpdateUI_LEDsv:
 427               	.LFB8:
 776:System.cpp    **** 
 777:System.cpp    **** void System_UpdateUI_LEDs()
 778:System.cpp    **** {
 428               		.loc 1 778 1 is_stmt 1 view -0
 429               		.cfi_startproc
 430 0198 0F93      		push r16
 431               	.LCFI2:
 432               		.cfi_def_cfa_offset 3
 433               		.cfi_offset 16, -2
 434 019a 1F93      		push r17
 435               	.LCFI3:
 436               		.cfi_def_cfa_offset 4
 437               		.cfi_offset 17, -3
 438 019c CF93      		push r28
 439               	.LCFI4:
 440               		.cfi_def_cfa_offset 5
 441               		.cfi_offset 28, -4
 442 019e DF93      		push r29
 443               	.LCFI5:
 444               		.cfi_def_cfa_offset 6
 445               		.cfi_offset 29, -5
 446               	/* prologue: function */
 447               	/* frame size = 0 */
 448               	/* stack size = 4 */
 449               	.L__stack_usage = 4
 779:System.cpp    **** 	for (uint8_t i = 0; i < NUMBER_OF_LOOPS; i++)
 450               		.loc 1 779 2 view .LVU136
 451               	.LVL23:
 452               	.LBB10:
 453               		.loc 1 779 24 view .LVU137
 454 01a0 C0E0      		ldi r28,lo8(LoopLEDs)
 455 01a2 D0E0      		ldi r29,hi8(LoopLEDs)
 456               	.LBE10:
 778:System.cpp    **** 	for (uint8_t i = 0; i < NUMBER_OF_LOOPS; i++)
 457               		.loc 1 778 1 is_stmt 0 view .LVU138
 458 01a4 10E0      		ldi r17,0
 459 01a6 00E0      		ldi r16,0
 460               	.LVL24:
 461               	.L53:
 462               	.LBB11:
 780:System.cpp    **** 	{
 781:System.cpp    **** 		if (LoopModePreset.Active_Loops & (1 << i))
 463               		.loc 1 781 3 is_stmt 1 view .LVU139
 464               		.loc 1 781 22 is_stmt 0 view .LVU140
 465 01a8 8091 0000 		lds r24,LoopModePreset
 466 01ac 90E0      		ldi r25,0
 467               		.loc 1 781 35 view .LVU141
 468 01ae 002E      		mov r0,r16
 469 01b0 00C0      		rjmp 2f
 470               		1:
 471 01b2 9595      		asr r25
 472 01b4 8795      		ror r24
 473               		2:
 474 01b6 0A94      		dec r0
 475 01b8 02F4      		brpl 1b
 476               		.loc 1 781 3 view .LVU142
 477 01ba 80FF      		sbrs r24,0
 478 01bc 00C0      		rjmp .L49
 782:System.cpp    **** 		{
 783:System.cpp    **** 			if (LoopLEDs[i].getState() != MCP_Output::SET)
 479               		.loc 1 783 4 is_stmt 1 view .LVU143
 480               		.loc 1 783 28 is_stmt 0 view .LVU144
 481 01be CE01      		movw r24,r28
 482 01c0 0E94 0000 		call _ZN10MCP_Output8getStateEv
 483               	.LVL25:
 484               		.loc 1 783 4 view .LVU145
 485 01c4 8130      		cpi r24,lo8(1)
 486 01c6 01F0      		breq .L51
 784:System.cpp    **** 			{
 785:System.cpp    **** 				LoopLEDs[i].Set();
 487               		.loc 1 785 5 is_stmt 1 view .LVU146
 488               		.loc 1 785 20 is_stmt 0 view .LVU147
 489 01c8 CE01      		movw r24,r28
 490 01ca 0E94 0000 		call _ZN10MCP_Output3SetEv
 491               	.LVL26:
 492               	.L51:
 779:System.cpp    **** 	{
 493               		.loc 1 779 2 is_stmt 1 discriminator 2 view .LVU148
 779:System.cpp    **** 	{
 494               		.loc 1 779 24 discriminator 2 view .LVU149
 495 01ce 0F5F      		subi r16,-1
 496 01d0 1F4F      		sbci r17,-1
 497               	.LVL27:
 779:System.cpp    **** 	{
 498               		.loc 1 779 24 is_stmt 0 discriminator 2 view .LVU150
 499 01d2 2496      		adiw r28,4
 500 01d4 0830      		cpi r16,8
 501 01d6 1105      		cpc r17,__zero_reg__
 502 01d8 01F4      		brne .L53
 503 01da C0E0      		ldi r28,lo8(CtrlSwitchLEDs)
 504 01dc D0E0      		ldi r29,hi8(CtrlSwitchLEDs)
 779:System.cpp    **** 	{
 505               		.loc 1 779 24 view .LVU151
 506 01de 10E0      		ldi r17,0
 507 01e0 00E0      		ldi r16,0
 508               	.LVL28:
 509               	.L58:
 779:System.cpp    **** 	{
 510               		.loc 1 779 24 view .LVU152
 511               	.LBE11:
 512               	.LBB12:
 786:System.cpp    **** 			}
 787:System.cpp    **** 		}
 788:System.cpp    **** 		else
 789:System.cpp    **** 		{
 790:System.cpp    **** 			if (LoopLEDs[i].getState() != MCP_Output::CLEARED)
 791:System.cpp    **** 			{
 792:System.cpp    **** 				LoopLEDs[i].Clear();	
 793:System.cpp    **** 			}
 794:System.cpp    **** 		}
 795:System.cpp    **** 	}
 796:System.cpp    **** 				
 797:System.cpp    **** 	for (uint8_t i = 0; i < NUMBER_OF_CTRL_SWITCHES; i++)
 798:System.cpp    **** 	{
 799:System.cpp    **** 		if (LoopModePreset.Active_CtrlSwitches & (1 << i))
 513               		.loc 1 799 3 is_stmt 1 view .LVU153
 514               		.loc 1 799 22 is_stmt 0 view .LVU154
 515 01e2 8091 0000 		lds r24,LoopModePreset+1
 516 01e6 90E0      		ldi r25,0
 517               		.loc 1 799 42 view .LVU155
 518 01e8 002E      		mov r0,r16
 519 01ea 00C0      		rjmp 2f
 520               		1:
 521 01ec 9595      		asr r25
 522 01ee 8795      		ror r24
 523               		2:
 524 01f0 0A94      		dec r0
 525 01f2 02F4      		brpl 1b
 526               		.loc 1 799 3 view .LVU156
 527 01f4 80FF      		sbrs r24,0
 528 01f6 00C0      		rjmp .L54
 800:System.cpp    **** 		{
 801:System.cpp    **** 			if (CtrlSwitchLEDs[i].getState() != MCP_Output::SET)
 529               		.loc 1 801 4 is_stmt 1 view .LVU157
 530               		.loc 1 801 34 is_stmt 0 view .LVU158
 531 01f8 CE01      		movw r24,r28
 532 01fa 0E94 0000 		call _ZN10MCP_Output8getStateEv
 533               	.LVL29:
 534               		.loc 1 801 4 view .LVU159
 535 01fe 8130      		cpi r24,lo8(1)
 536 0200 01F0      		breq .L56
 802:System.cpp    **** 			{
 803:System.cpp    **** 				CtrlSwitchLEDs[i].Set();
 537               		.loc 1 803 5 is_stmt 1 view .LVU160
 538               		.loc 1 803 26 is_stmt 0 view .LVU161
 539 0202 CE01      		movw r24,r28
 540 0204 0E94 0000 		call _ZN10MCP_Output3SetEv
 541               	.LVL30:
 542               	.L56:
 797:System.cpp    **** 	{
 543               		.loc 1 797 2 is_stmt 1 discriminator 2 view .LVU162
 797:System.cpp    **** 	{
 544               		.loc 1 797 24 discriminator 2 view .LVU163
 545 0208 0F5F      		subi r16,-1
 546 020a 1F4F      		sbci r17,-1
 547               	.LVL31:
 797:System.cpp    **** 	{
 548               		.loc 1 797 24 is_stmt 0 discriminator 2 view .LVU164
 549 020c 2496      		adiw r28,4
 550 020e 0430      		cpi r16,4
 551 0210 1105      		cpc r17,__zero_reg__
 552 0212 01F4      		brne .L58
 553               	/* epilogue start */
 554               	.LBE12:
 804:System.cpp    **** 			}
 805:System.cpp    **** 		}
 806:System.cpp    **** 		else
 807:System.cpp    **** 		{
 808:System.cpp    **** 			if (CtrlSwitchLEDs[i].getState() != MCP_Output::CLEARED)
 809:System.cpp    **** 			{
 810:System.cpp    **** 				CtrlSwitchLEDs[i].Clear();
 811:System.cpp    **** 			}
 812:System.cpp    **** 		}
 813:System.cpp    **** 	}
 814:System.cpp    **** }
 555               		.loc 1 814 1 view .LVU165
 556 0214 DF91      		pop r29
 557 0216 CF91      		pop r28
 558 0218 1F91      		pop r17
 559 021a 0F91      		pop r16
 560               	.LVL32:
 561               		.loc 1 814 1 view .LVU166
 562 021c 0895      		ret
 563               	.LVL33:
 564               	.L49:
 565               	.LBB13:
 790:System.cpp    **** 			{
 566               		.loc 1 790 4 is_stmt 1 view .LVU167
 790:System.cpp    **** 			{
 567               		.loc 1 790 28 is_stmt 0 view .LVU168
 568 021e CE01      		movw r24,r28
 569 0220 0E94 0000 		call _ZN10MCP_Output8getStateEv
 570               	.LVL34:
 790:System.cpp    **** 			{
 571               		.loc 1 790 4 view .LVU169
 572 0224 8823      		tst r24
 573 0226 01F0      		breq .L51
 792:System.cpp    **** 			}
 574               		.loc 1 792 5 is_stmt 1 view .LVU170
 792:System.cpp    **** 			}
 575               		.loc 1 792 22 is_stmt 0 view .LVU171
 576 0228 CE01      		movw r24,r28
 577 022a 0E94 0000 		call _ZN10MCP_Output5ClearEv
 578               	.LVL35:
 579 022e 00C0      		rjmp .L51
 580               	.LVL36:
 581               	.L54:
 792:System.cpp    **** 			}
 582               		.loc 1 792 22 view .LVU172
 583               	.LBE13:
 584               	.LBB14:
 808:System.cpp    **** 			{
 585               		.loc 1 808 4 is_stmt 1 view .LVU173
 808:System.cpp    **** 			{
 586               		.loc 1 808 34 is_stmt 0 view .LVU174
 587 0230 CE01      		movw r24,r28
 588 0232 0E94 0000 		call _ZN10MCP_Output8getStateEv
 589               	.LVL37:
 808:System.cpp    **** 			{
 590               		.loc 1 808 4 view .LVU175
 591 0236 8823      		tst r24
 592 0238 01F0      		breq .L56
 810:System.cpp    **** 			}
 593               		.loc 1 810 5 is_stmt 1 view .LVU176
 810:System.cpp    **** 			}
 594               		.loc 1 810 28 is_stmt 0 view .LVU177
 595 023a CE01      		movw r24,r28
 596 023c 0E94 0000 		call _ZN10MCP_Output5ClearEv
 597               	.LVL38:
 598 0240 00C0      		rjmp .L56
 599               	.LBE14:
 600               		.cfi_endproc
 601               	.LFE8:
 603               	.global	_Z31System_HandleRotaryEncoderInputv
 605               	_Z31System_HandleRotaryEncoderInputv:
 606               	.LFB3:
 369:System.cpp    **** 	switch (SystemState)
 607               		.loc 1 369 1 is_stmt 1 view -0
 608               		.cfi_startproc
 609 0242 EF92      		push r14
 610               	.LCFI6:
 611               		.cfi_def_cfa_offset 3
 612               		.cfi_offset 14, -2
 613 0244 0F93      		push r16
 614               	.LCFI7:
 615               		.cfi_def_cfa_offset 4
 616               		.cfi_offset 16, -3
 617               	/* prologue: function */
 618               	/* frame size = 0 */
 619               	/* stack size = 2 */
 620               	.L__stack_usage = 2
 370:System.cpp    **** 	{
 621               		.loc 1 370 2 view .LVU179
 370:System.cpp    **** 	{
 622               		.loc 1 370 10 is_stmt 0 view .LVU180
 623 0246 E091 0000 		lds r30,SystemState
 624 024a E150      		subi r30,lo8(-(-1))
 625 024c E031      		cpi r30,lo8(16)
 626 024e 00F4      		brsh .L67
 627 0250 F0E0      		ldi r31,0
 628 0252 E050      		subi r30,lo8(-(gs(.L70)))
 629 0254 F040      		sbci r31,hi8(-(gs(.L70)))
 630 0256 0C94 0000 		jmp __tablejump2__
 631               		.section	.jumptables.gcc._Z31System_HandleRotaryEncoderInputv,"a",@progbits
 632               		.p2align	1
 633               	.L70:
 634 0000 0000      		.word gs(.L75)
 635 0002 0000      		.word gs(.L67)
 636 0004 0000      		.word gs(.L67)
 637 0006 0000      		.word gs(.L74)
 638 0008 0000      		.word gs(.L67)
 639 000a 0000      		.word gs(.L74)
 640 000c 0000      		.word gs(.L67)
 641 000e 0000      		.word gs(.L67)
 642 0010 0000      		.word gs(.L67)
 643 0012 0000      		.word gs(.L73)
 644 0014 0000      		.word gs(.L67)
 645 0016 0000      		.word gs(.L72)
 646 0018 0000      		.word gs(.L67)
 647 001a 0000      		.word gs(.L71)
 648 001c 0000      		.word gs(.L67)
 649 001e 0000      		.word gs(.L69)
 650               		.text
 651               	.L75:
 372:System.cpp    **** 			if (RotEnc_State == SHORT_PRESS)
 652               		.loc 1 372 3 is_stmt 1 view .LVU181
 373:System.cpp    **** 			{
 653               		.loc 1 373 4 view .LVU182
 373:System.cpp    **** 			{
 654               		.loc 1 373 21 is_stmt 0 view .LVU183
 655 025a 8091 0000 		lds r24,RotEnc_State
 373:System.cpp    **** 			{
 656               		.loc 1 373 4 view .LVU184
 657 025e 8330      		cpi r24,lo8(3)
 658 0260 01F4      		brne .L76
 375:System.cpp    **** 			}
 659               		.loc 1 375 5 is_stmt 1 view .LVU185
 375:System.cpp    **** 			}
 660               		.loc 1 375 24 is_stmt 0 view .LVU186
 661 0262 8091 0000 		lds r24,TempSelectMidiChannel
 662 0266 8093 0000 		sts System_MidiChannel,r24
 663               	.L67:
 664               	/* epilogue start */
 623:System.cpp    **** 
 665               		.loc 1 623 1 view .LVU187
 666 026a 0F91      		pop r16
 667 026c EF90      		pop r14
 668 026e 0895      		ret
 669               	.L76:
 377:System.cpp    **** 			{
 670               		.loc 1 377 9 is_stmt 1 view .LVU188
 377:System.cpp    **** 			{
 671               		.loc 1 377 26 is_stmt 0 view .LVU189
 672 0270 8091 0000 		lds r24,RotEnc_State
 377:System.cpp    **** 			{
 673               		.loc 1 377 9 view .LVU190
 674 0274 8530      		cpi r24,lo8(5)
 675 0276 01F4      		brne .L77
 380:System.cpp    **** 				eeprom_write_byte((uint8_t*)EEPROM_MIDI_CH_ADDR, (uint8_t)System_MidiChannel);
 676               		.loc 1 380 5 is_stmt 1 view .LVU191
 380:System.cpp    **** 				eeprom_write_byte((uint8_t*)EEPROM_MIDI_CH_ADDR, (uint8_t)System_MidiChannel);
 677               		.loc 1 380 24 is_stmt 0 view .LVU192
 678 0278 8091 0000 		lds r24,TempSelectMidiChannel
 679 027c 8093 0000 		sts System_MidiChannel,r24
 381:System.cpp    **** 				SystemState = INITIALIZE_SYSTEM;
 680               		.loc 1 381 5 is_stmt 1 view .LVU193
 381:System.cpp    **** 				SystemState = INITIALIZE_SYSTEM;
 681               		.loc 1 381 22 is_stmt 0 view .LVU194
 682 0280 6091 0000 		lds r22,System_MidiChannel
 683 0284 90E0      		ldi r25,0
 684 0286 80E0      		ldi r24,0
 685 0288 0E94 0000 		call eeprom_write_byte
 686               	.LVL39:
 382:System.cpp    **** 			}
 687               		.loc 1 382 5 is_stmt 1 view .LVU195
 688               	.L137:
 446:System.cpp    **** 				}
 689               		.loc 1 446 6 view .LVU196
 446:System.cpp    **** 				}
 690               		.loc 1 446 18 is_stmt 0 view .LVU197
 691 028c 82E0      		ldi r24,lo8(2)
 692 028e 00C0      		rjmp .L132
 693               	.L77:
 384:System.cpp    **** 			{
 694               		.loc 1 384 9 is_stmt 1 view .LVU198
 384:System.cpp    **** 			{
 695               		.loc 1 384 26 is_stmt 0 view .LVU199
 696 0290 8091 0000 		lds r24,RotEnc_State
 384:System.cpp    **** 			{
 697               		.loc 1 384 9 view .LVU200
 698 0294 8130      		cpi r24,lo8(1)
 699 0296 01F4      		brne .L78
 387:System.cpp    **** 				{
 700               		.loc 1 387 5 is_stmt 1 view .LVU201
 387:System.cpp    **** 				{
 701               		.loc 1 387 31 is_stmt 0 view .LVU202
 702 0298 8091 0000 		lds r24,TempSelectMidiChannel
 387:System.cpp    **** 				{
 703               		.loc 1 387 5 view .LVU203
 704 029c 8031      		cpi r24,lo8(16)
 705 029e 00F4      		brsh .L67
 389:System.cpp    **** 				}
 706               		.loc 1 389 6 is_stmt 1 view .LVU204
 389:System.cpp    **** 				}
 707               		.loc 1 389 30 is_stmt 0 view .LVU205
 708 02a0 8091 0000 		lds r24,TempSelectMidiChannel
 389:System.cpp    **** 				}
 709               		.loc 1 389 65 view .LVU206
 710 02a4 8F5F      		subi r24,lo8(-(1))
 711               	.L133:
 397:System.cpp    **** 				}
 712               		.loc 1 397 28 view .LVU207
 713 02a6 8093 0000 		sts TempSelectMidiChannel,r24
 714 02aa 00C0      		rjmp .L67
 715               	.L78:
 392:System.cpp    **** 			{
 716               		.loc 1 392 9 is_stmt 1 view .LVU208
 392:System.cpp    **** 			{
 717               		.loc 1 392 26 is_stmt 0 view .LVU209
 718 02ac 8091 0000 		lds r24,RotEnc_State
 392:System.cpp    **** 			{
 719               		.loc 1 392 9 view .LVU210
 720 02b0 8230      		cpi r24,lo8(2)
 721 02b2 01F4      		brne .L67
 395:System.cpp    **** 				{
 722               		.loc 1 395 5 is_stmt 1 view .LVU211
 395:System.cpp    **** 				{
 723               		.loc 1 395 31 is_stmt 0 view .LVU212
 724 02b4 8091 0000 		lds r24,TempSelectMidiChannel
 395:System.cpp    **** 				{
 725               		.loc 1 395 5 view .LVU213
 726 02b8 8823      		tst r24
 727 02ba 01F0      		breq .L67
 397:System.cpp    **** 				}
 728               		.loc 1 397 6 is_stmt 1 view .LVU214
 397:System.cpp    **** 				}
 729               		.loc 1 397 30 is_stmt 0 view .LVU215
 730 02bc 8091 0000 		lds r24,TempSelectMidiChannel
 397:System.cpp    **** 				}
 731               		.loc 1 397 65 view .LVU216
 732 02c0 8150      		subi r24,lo8(-(-1))
 733 02c2 00C0      		rjmp .L133
 734               	.L74:
 403:System.cpp    **** 		case RUN_LOOP_CTRL:
 735               		.loc 1 403 3 is_stmt 1 view .LVU217
 404:System.cpp    **** 			if (RotEnc_State == SHORT_PRESS)
 736               		.loc 1 404 3 view .LVU218
 405:System.cpp    **** 			{
 737               		.loc 1 405 4 view .LVU219
 405:System.cpp    **** 			{
 738               		.loc 1 405 21 is_stmt 0 view .LVU220
 739 02c4 8091 0000 		lds r24,RotEnc_State
 405:System.cpp    **** 			{
 740               		.loc 1 405 4 view .LVU221
 741 02c8 8330      		cpi r24,lo8(3)
 742 02ca 01F4      		brne .L79
 407:System.cpp    **** 				SystemState = ENTER_RUN_PRESET_CTRL;
 743               		.loc 1 407 5 is_stmt 1 view .LVU222
 407:System.cpp    **** 				SystemState = ENTER_RUN_PRESET_CTRL;
 744               		.loc 1 407 18 is_stmt 0 view .LVU223
 745 02cc 9091 0000 		lds r25,TempSelectPreset
 746 02d0 9093 0000 		sts ActivePreset,r25
 747               	.L132:
 408:System.cpp    **** 			}
 748               		.loc 1 408 5 is_stmt 1 view .LVU224
 408:System.cpp    **** 			}
 749               		.loc 1 408 17 is_stmt 0 view .LVU225
 750 02d4 8093 0000 		sts SystemState,r24
 751 02d8 00C0      		rjmp .L67
 752               	.L79:
 410:System.cpp    **** 			{
 753               		.loc 1 410 9 is_stmt 1 view .LVU226
 410:System.cpp    **** 			{
 754               		.loc 1 410 26 is_stmt 0 view .LVU227
 755 02da 8091 0000 		lds r24,RotEnc_State
 410:System.cpp    **** 			{
 756               		.loc 1 410 9 view .LVU228
 757 02de 8530      		cpi r24,lo8(5)
 758 02e0 01F4      		brne .L80
 412:System.cpp    **** 				
 759               		.loc 1 412 5 is_stmt 1 view .LVU229
 412:System.cpp    **** 				
 760               		.loc 1 412 18 is_stmt 0 view .LVU230
 761 02e2 8091 0000 		lds r24,TempSelectPreset
 762 02e6 8093 0000 		sts ActivePreset,r24
 414:System.cpp    **** 			}
 763               		.loc 1 414 5 is_stmt 1 view .LVU231
 764               	.L139:
 535:System.cpp    **** 			}
 765               		.loc 1 535 5 view .LVU232
 535:System.cpp    **** 			}
 766               		.loc 1 535 17 is_stmt 0 view .LVU233
 767 02ea 89E0      		ldi r24,lo8(9)
 768 02ec 00C0      		rjmp .L132
 769               	.L80:
 416:System.cpp    **** 			{
 770               		.loc 1 416 9 is_stmt 1 view .LVU234
 416:System.cpp    **** 			{
 771               		.loc 1 416 26 is_stmt 0 view .LVU235
 772 02ee 8091 0000 		lds r24,RotEnc_State
 416:System.cpp    **** 			{
 773               		.loc 1 416 9 view .LVU236
 774 02f2 8130      		cpi r24,lo8(1)
 775 02f4 01F4      		brne .L81
 419:System.cpp    **** 				{
 776               		.loc 1 419 5 is_stmt 1 view .LVU237
 419:System.cpp    **** 				{
 777               		.loc 1 419 26 is_stmt 0 view .LVU238
 778 02f6 8091 0000 		lds r24,TempSelectPreset
 419:System.cpp    **** 				{
 779               		.loc 1 419 5 view .LVU239
 780 02fa 8730      		cpi r24,lo8(7)
 781 02fc 00F4      		brsh .L108
 421:System.cpp    **** 				}
 782               		.loc 1 421 6 is_stmt 1 view .LVU240
 421:System.cpp    **** 				}
 783               		.loc 1 421 25 is_stmt 0 view .LVU241
 784 02fe 8091 0000 		lds r24,TempSelectPreset
 421:System.cpp    **** 				}
 785               		.loc 1 421 56 view .LVU242
 786 0302 8F5F      		subi r24,lo8(-(1))
 787               	.L141:
 432:System.cpp    **** 				}
 788               		.loc 1 432 23 view .LVU243
 789 0304 8093 0000 		sts TempSelectPreset,r24
 436:System.cpp    **** 			}
 790               		.loc 1 436 5 is_stmt 1 view .LVU244
 791               	.L108:
 615:System.cpp    **** 			}
 792               		.loc 1 615 5 view .LVU245
 615:System.cpp    **** 			}
 793               		.loc 1 615 29 is_stmt 0 view .LVU246
 794 0308 81E0      		ldi r24,lo8(1)
 795 030a 90E0      		ldi r25,0
 796 030c 9093 0000 		sts System_TempSelectOvfCnt+1,r25
 797 0310 8093 0000 		sts System_TempSelectOvfCnt,r24
 623:System.cpp    **** 
 798               		.loc 1 623 1 view .LVU247
 799 0314 00C0      		rjmp .L67
 800               	.L81:
 427:System.cpp    **** 			{
 801               		.loc 1 427 9 is_stmt 1 view .LVU248
 427:System.cpp    **** 			{
 802               		.loc 1 427 26 is_stmt 0 view .LVU249
 803 0316 8091 0000 		lds r24,RotEnc_State
 427:System.cpp    **** 			{
 804               		.loc 1 427 9 view .LVU250
 805 031a 8230      		cpi r24,lo8(2)
 806 031c 01F0      		breq .+2
 807 031e 00C0      		rjmp .L67
 430:System.cpp    **** 				{
 808               		.loc 1 430 5 is_stmt 1 view .LVU251
 430:System.cpp    **** 				{
 809               		.loc 1 430 26 is_stmt 0 view .LVU252
 810 0320 8091 0000 		lds r24,TempSelectPreset
 430:System.cpp    **** 				{
 811               		.loc 1 430 5 view .LVU253
 812 0324 8823      		tst r24
 813 0326 01F0      		breq .L108
 432:System.cpp    **** 				}
 814               		.loc 1 432 6 is_stmt 1 view .LVU254
 432:System.cpp    **** 				}
 815               		.loc 1 432 25 is_stmt 0 view .LVU255
 816 0328 8091 0000 		lds r24,TempSelectPreset
 432:System.cpp    **** 				}
 817               		.loc 1 432 56 view .LVU256
 818 032c 8150      		subi r24,lo8(-(-1))
 819 032e 00C0      		rjmp .L141
 820               	.L73:
 441:System.cpp    **** 			if (RotEnc_State == SHORT_PRESS)
 821               		.loc 1 441 3 is_stmt 1 view .LVU257
 442:System.cpp    **** 			{
 822               		.loc 1 442 4 view .LVU258
 442:System.cpp    **** 			{
 823               		.loc 1 442 21 is_stmt 0 view .LVU259
 824 0330 8091 0000 		lds r24,RotEnc_State
 442:System.cpp    **** 			{
 825               		.loc 1 442 4 view .LVU260
 826 0334 8330      		cpi r24,lo8(3)
 827 0336 01F4      		brne .L84
 444:System.cpp    **** 				{
 828               		.loc 1 444 5 is_stmt 1 view .LVU261
 444:System.cpp    **** 				{
 829               		.loc 1 444 22 is_stmt 0 view .LVU262
 830 0338 8091 0000 		lds r24,SystemUIMode
 444:System.cpp    **** 				{
 831               		.loc 1 444 5 view .LVU263
 832 033c 8823      		tst r24
 833 033e 01F4      		brne .+2
 834 0340 00C0      		rjmp .L137
 448:System.cpp    **** 				{
 835               		.loc 1 448 10 is_stmt 1 view .LVU264
 448:System.cpp    **** 				{
 836               		.loc 1 448 27 is_stmt 0 view .LVU265
 837 0342 8091 0000 		lds r24,SystemUIMode
 448:System.cpp    **** 				{
 838               		.loc 1 448 10 view .LVU266
 839 0346 8130      		cpi r24,lo8(1)
 840 0348 01F4      		brne .L86
 450:System.cpp    **** 				}
 841               		.loc 1 450 6 is_stmt 1 view .LVU267
 450:System.cpp    **** 				}
 842               		.loc 1 450 18 is_stmt 0 view .LVU268
 843 034a 8BE0      		ldi r24,lo8(11)
 844 034c 00C0      		rjmp .L132
 845               	.L86:
 452:System.cpp    **** 				{
 846               		.loc 1 452 10 is_stmt 1 view .LVU269
 452:System.cpp    **** 				{
 847               		.loc 1 452 27 is_stmt 0 view .LVU270
 848 034e 8091 0000 		lds r24,SystemUIMode
 452:System.cpp    **** 				{
 849               		.loc 1 452 10 view .LVU271
 850 0352 8230      		cpi r24,lo8(2)
 851 0354 01F0      		breq .+2
 852 0356 00C0      		rjmp .L67
 853               	.L138:
 571:System.cpp    **** 			}
 854               		.loc 1 571 5 is_stmt 1 view .LVU272
 571:System.cpp    **** 			}
 855               		.loc 1 571 17 is_stmt 0 view .LVU273
 856 0358 8DE0      		ldi r24,lo8(13)
 857 035a 00C0      		rjmp .L132
 858               	.L84:
 457:System.cpp    **** 			{
 859               		.loc 1 457 9 is_stmt 1 view .LVU274
 457:System.cpp    **** 			{
 860               		.loc 1 457 26 is_stmt 0 view .LVU275
 861 035c 8091 0000 		lds r24,RotEnc_State
 457:System.cpp    **** 			{
 862               		.loc 1 457 9 view .LVU276
 863 0360 8530      		cpi r24,lo8(5)
 864 0362 01F4      		brne .+2
 865 0364 00C0      		rjmp .L67
 460:System.cpp    **** 			{
 866               		.loc 1 460 9 is_stmt 1 view .LVU277
 460:System.cpp    **** 			{
 867               		.loc 1 460 26 is_stmt 0 view .LVU278
 868 0366 8091 0000 		lds r24,RotEnc_State
 460:System.cpp    **** 			{
 869               		.loc 1 460 9 view .LVU279
 870 036a 8130      		cpi r24,lo8(1)
 871 036c 01F4      		brne .L87
 463:System.cpp    **** 				{
 872               		.loc 1 463 5 is_stmt 1 view .LVU280
 463:System.cpp    **** 				{
 873               		.loc 1 463 22 is_stmt 0 view .LVU281
 874 036e 8091 0000 		lds r24,SystemUIMode
 463:System.cpp    **** 				{
 875               		.loc 1 463 5 view .LVU282
 876 0372 8230      		cpi r24,lo8(2)
 877 0374 00F0      		brlo .+2
 878 0376 00C0      		rjmp .L67
 465:System.cpp    **** 				}
 879               		.loc 1 465 6 is_stmt 1 view .LVU283
 465:System.cpp    **** 				}
 880               		.loc 1 465 21 is_stmt 0 view .LVU284
 881 0378 8091 0000 		lds r24,SystemUIMode
 465:System.cpp    **** 				}
 882               		.loc 1 465 49 view .LVU285
 883 037c 8F5F      		subi r24,lo8(-(1))
 884               	.L136:
 473:System.cpp    **** 				}
 885               		.loc 1 473 19 view .LVU286
 886 037e 8093 0000 		sts SystemUIMode,r24
 887 0382 00C0      		rjmp .L67
 888               	.L87:
 468:System.cpp    **** 			{
 889               		.loc 1 468 9 is_stmt 1 view .LVU287
 468:System.cpp    **** 			{
 890               		.loc 1 468 26 is_stmt 0 view .LVU288
 891 0384 8091 0000 		lds r24,RotEnc_State
 468:System.cpp    **** 			{
 892               		.loc 1 468 9 view .LVU289
 893 0388 8230      		cpi r24,lo8(2)
 894 038a 01F0      		breq .+2
 895 038c 00C0      		rjmp .L67
 471:System.cpp    **** 				{
 896               		.loc 1 471 5 is_stmt 1 view .LVU290
 471:System.cpp    **** 				{
 897               		.loc 1 471 22 is_stmt 0 view .LVU291
 898 038e 8091 0000 		lds r24,SystemUIMode
 471:System.cpp    **** 				{
 899               		.loc 1 471 5 view .LVU292
 900 0392 8823      		tst r24
 901 0394 01F4      		brne .+2
 902 0396 00C0      		rjmp .L67
 473:System.cpp    **** 				}
 903               		.loc 1 473 6 is_stmt 1 view .LVU293
 473:System.cpp    **** 				}
 904               		.loc 1 473 21 is_stmt 0 view .LVU294
 905 0398 8091 0000 		lds r24,SystemUIMode
 473:System.cpp    **** 				}
 906               		.loc 1 473 49 view .LVU295
 907 039c 8150      		subi r24,lo8(-(-1))
 908 039e 00C0      		rjmp .L136
 909               	.L72:
 479:System.cpp    **** 			if (RotEnc_State == SHORT_PRESS)
 910               		.loc 1 479 3 is_stmt 1 view .LVU296
 480:System.cpp    **** 			{
 911               		.loc 1 480 4 view .LVU297
 480:System.cpp    **** 			{
 912               		.loc 1 480 21 is_stmt 0 view .LVU298
 913 03a0 8091 0000 		lds r24,RotEnc_State
 480:System.cpp    **** 			{
 914               		.loc 1 480 4 view .LVU299
 915 03a4 8330      		cpi r24,lo8(3)
 916 03a6 01F4      		brne .L88
 483:System.cpp    **** 				{
 917               		.loc 1 483 5 is_stmt 1 view .LVU300
 483:System.cpp    **** 				{
 918               		.loc 1 483 27 is_stmt 0 view .LVU301
 919 03a8 8091 0000 		lds r24,UserEditSelection
 485:System.cpp    **** 				}
 920               		.loc 1 485 43 view .LVU302
 921 03ac 2091 0000 		lds r18,UserEditSelection
 483:System.cpp    **** 				{
 922               		.loc 1 483 5 view .LVU303
 923 03b0 8830      		cpi r24,lo8(8)
 924 03b2 00F4      		brsh .L89
 485:System.cpp    **** 				}
 925               		.loc 1 485 6 is_stmt 1 view .LVU304
 485:System.cpp    **** 				}
 926               		.loc 1 485 40 is_stmt 0 view .LVU305
 927 03b4 81E0      		ldi r24,lo8(1)
 928 03b6 90E0      		ldi r25,0
 929 03b8 AC01      		movw r20,r24
 930 03ba 00C0      		rjmp 2f
 931               		1:
 932 03bc 440F      		lsl r20
 933 03be 551F      		rol r21
 934               		2:
 935 03c0 2A95      		dec r18
 936 03c2 02F4      		brpl 1b
 485:System.cpp    **** 				}
 937               		.loc 1 485 34 view .LVU306
 938 03c4 8091 0000 		lds r24,LoopModePreset
 939 03c8 8427      		eor r24,r20
 940 03ca 8093 0000 		sts LoopModePreset,r24
 941               	.L90:
 496:System.cpp    **** 				
 942               		.loc 1 496 5 is_stmt 1 view .LVU307
 943               	/* epilogue start */
 623:System.cpp    **** 
 944               		.loc 1 623 1 is_stmt 0 view .LVU308
 945 03ce 0F91      		pop r16
 946 03d0 EF90      		pop r14
 496:System.cpp    **** 				
 947               		.loc 1 496 25 view .LVU309
 948 03d2 0C94 0000 		jmp _Z20System_UpdateUI_LEDsv
 949               	.LVL40:
 950               	.L89:
 489:System.cpp    **** 				}
 951               		.loc 1 489 6 is_stmt 1 view .LVU310
 489:System.cpp    **** 				}
 952               		.loc 1 489 69 is_stmt 0 view .LVU311
 953 03d6 2850      		subi r18,8
 954 03d8 330B      		sbc r19,r19
 489:System.cpp    **** 				}
 955               		.loc 1 489 47 view .LVU312
 956 03da 81E0      		ldi r24,lo8(1)
 957 03dc 90E0      		ldi r25,0
 958 03de AC01      		movw r20,r24
 959 03e0 00C0      		rjmp 2f
 960               		1:
 961 03e2 440F      		lsl r20
 962 03e4 551F      		rol r21
 963               		2:
 964 03e6 2A95      		dec r18
 965 03e8 02F4      		brpl 1b
 489:System.cpp    **** 				}
 966               		.loc 1 489 41 view .LVU313
 967 03ea 8091 0000 		lds r24,LoopModePreset+1
 968 03ee 8427      		eor r24,r20
 969 03f0 8093 0000 		sts LoopModePreset+1,r24
 970 03f4 00C0      		rjmp .L90
 971               	.L88:
 499:System.cpp    **** 			{
 972               		.loc 1 499 9 is_stmt 1 view .LVU314
 499:System.cpp    **** 			{
 973               		.loc 1 499 26 is_stmt 0 view .LVU315
 974 03f6 8091 0000 		lds r24,RotEnc_State
 499:System.cpp    **** 			{
 975               		.loc 1 499 9 view .LVU316
 976 03fa 8530      		cpi r24,lo8(5)
 977 03fc 01F4      		brne .L91
 502:System.cpp    **** 				
 978               		.loc 1 502 5 is_stmt 1 view .LVU317
 502:System.cpp    **** 				
 979               		.loc 1 502 82 is_stmt 0 view .LVU318
 980 03fe 6091 0000 		lds r22,ActivePreset
 981 0402 70E0      		ldi r23,0
 502:System.cpp    **** 				
 982               		.loc 1 502 80 view .LVU319
 983 0404 675E      		subi r22,-25
 984 0406 7F4F      		sbci r23,-1
 985 0408 660F      		lsl r22
 986 040a 771F      		rol r23
 987 040c 660F      		lsl r22
 988 040e 771F      		rol r23
 502:System.cpp    **** 				
 989               		.loc 1 502 23 view .LVU320
 990 0410 42E0      		ldi r20,lo8(2)
 991 0412 50E0      		ldi r21,0
 992 0414 80E0      		ldi r24,lo8(LoopModePreset)
 993 0416 90E0      		ldi r25,hi8(LoopModePreset)
 994 0418 0E94 0000 		call eeprom_write_block
 995               	.LVL41:
 505:System.cpp    **** 				PresetTable[ActivePreset].Active_CtrlSwitches = LoopModePreset.Active_CtrlSwitches;
 996               		.loc 1 505 5 is_stmt 1 view .LVU321
 505:System.cpp    **** 				PresetTable[ActivePreset].Active_CtrlSwitches = LoopModePreset.Active_CtrlSwitches;
 997               		.loc 1 505 17 is_stmt 0 view .LVU322
 998 041c E091 0000 		lds r30,ActivePreset
 505:System.cpp    **** 				PresetTable[ActivePreset].Active_CtrlSwitches = LoopModePreset.Active_CtrlSwitches;
 999               		.loc 1 505 44 view .LVU323
 1000 0420 54E0      		ldi r21,lo8(4)
 1001 0422 E59F      		mul r30,r21
 1002 0424 F001      		movw r30,r0
 1003 0426 1124      		clr __zero_reg__
 1004 0428 E050      		subi r30,lo8(-(PresetTable))
 1005 042a F040      		sbci r31,hi8(-(PresetTable))
 1006 042c 8091 0000 		lds r24,LoopModePreset
 1007 0430 8083      		st Z,r24
 506:System.cpp    **** 				
 1008               		.loc 1 506 5 is_stmt 1 view .LVU324
 506:System.cpp    **** 				
 1009               		.loc 1 506 17 is_stmt 0 view .LVU325
 1010 0432 E091 0000 		lds r30,ActivePreset
 506:System.cpp    **** 				
 1011               		.loc 1 506 51 view .LVU326
 1012 0436 84E0      		ldi r24,lo8(4)
 1013 0438 E89F      		mul r30,r24
 1014 043a F001      		movw r30,r0
 1015 043c 1124      		clr __zero_reg__
 1016 043e E050      		subi r30,lo8(-(PresetTable))
 1017 0440 F040      		sbci r31,hi8(-(PresetTable))
 1018 0442 8091 0000 		lds r24,LoopModePreset+1
 1019 0446 8183      		std Z+1,r24
 509:System.cpp    **** 			}
 1020               		.loc 1 509 5 is_stmt 1 view .LVU327
 1021 0448 00C0      		rjmp .L139
 1022               	.L91:
 511:System.cpp    **** 			{
 1023               		.loc 1 511 9 view .LVU328
 511:System.cpp    **** 			{
 1024               		.loc 1 511 26 is_stmt 0 view .LVU329
 1025 044a 8091 0000 		lds r24,RotEnc_State
 511:System.cpp    **** 			{
 1026               		.loc 1 511 9 view .LVU330
 1027 044e 8130      		cpi r24,lo8(1)
 1028 0450 01F4      		brne .L92
 513:System.cpp    **** 				{
 1029               		.loc 1 513 5 is_stmt 1 view .LVU331
 513:System.cpp    **** 				{
 1030               		.loc 1 513 27 is_stmt 0 view .LVU332
 1031 0452 8091 0000 		lds r24,UserEditSelection
 513:System.cpp    **** 				{
 1032               		.loc 1 513 5 view .LVU333
 1033 0456 8B30      		cpi r24,lo8(11)
 1034 0458 00F0      		brlo .+2
 1035 045a 00C0      		rjmp .L67
 515:System.cpp    **** 				}
 1036               		.loc 1 515 6 is_stmt 1 view .LVU334
 515:System.cpp    **** 				}
 1037               		.loc 1 515 23 is_stmt 0 view .LVU335
 1038 045c 8091 0000 		lds r24,UserEditSelection
 1039 0460 8F5F      		subi r24,lo8(-(1))
 1040               	.L135:
 522:System.cpp    **** 				}
 1041               		.loc 1 522 23 view .LVU336
 1042 0462 8093 0000 		sts UserEditSelection,r24
 1043 0466 00C0      		rjmp .L67
 1044               	.L92:
 518:System.cpp    **** 			{
 1045               		.loc 1 518 9 is_stmt 1 view .LVU337
 518:System.cpp    **** 			{
 1046               		.loc 1 518 26 is_stmt 0 view .LVU338
 1047 0468 8091 0000 		lds r24,RotEnc_State
 518:System.cpp    **** 			{
 1048               		.loc 1 518 9 view .LVU339
 1049 046c 8230      		cpi r24,lo8(2)
 1050 046e 01F0      		breq .+2
 1051 0470 00C0      		rjmp .L67
 520:System.cpp    **** 				{
 1052               		.loc 1 520 5 is_stmt 1 view .LVU340
 520:System.cpp    **** 				{
 1053               		.loc 1 520 27 is_stmt 0 view .LVU341
 1054 0472 8091 0000 		lds r24,UserEditSelection
 520:System.cpp    **** 				{
 1055               		.loc 1 520 5 view .LVU342
 1056 0476 8823      		tst r24
 1057 0478 01F4      		brne .+2
 1058 047a 00C0      		rjmp .L67
 522:System.cpp    **** 				}
 1059               		.loc 1 522 6 is_stmt 1 view .LVU343
 522:System.cpp    **** 				}
 1060               		.loc 1 522 23 is_stmt 0 view .LVU344
 1061 047c 8091 0000 		lds r24,UserEditSelection
 1062 0480 8150      		subi r24,lo8(-(-1))
 1063 0482 00C0      		rjmp .L135
 1064               	.L71:
 527:System.cpp    **** 			if (RotEnc_State == SHORT_PRESS)
 1065               		.loc 1 527 3 is_stmt 1 view .LVU345
 528:System.cpp    **** 			{
 1066               		.loc 1 528 4 view .LVU346
 528:System.cpp    **** 			{
 1067               		.loc 1 528 21 is_stmt 0 view .LVU347
 1068 0484 8091 0000 		lds r24,RotEnc_State
 528:System.cpp    **** 			{
 1069               		.loc 1 528 4 view .LVU348
 1070 0488 8330      		cpi r24,lo8(3)
 1071 048a 01F4      		brne .L93
 530:System.cpp    **** 			}
 1072               		.loc 1 530 5 is_stmt 1 view .LVU349
 530:System.cpp    **** 			}
 1073               		.loc 1 530 17 is_stmt 0 view .LVU350
 1074 048c 8FE0      		ldi r24,lo8(15)
 1075 048e 00C0      		rjmp .L132
 1076               	.L93:
 532:System.cpp    **** 			{
 1077               		.loc 1 532 9 is_stmt 1 view .LVU351
 532:System.cpp    **** 			{
 1078               		.loc 1 532 26 is_stmt 0 view .LVU352
 1079 0490 8091 0000 		lds r24,RotEnc_State
 532:System.cpp    **** 			{
 1080               		.loc 1 532 9 view .LVU353
 1081 0494 8530      		cpi r24,lo8(5)
 1082 0496 01F4      		brne .+2
 1083 0498 00C0      		rjmp .L139
 537:System.cpp    **** 			{
 1084               		.loc 1 537 9 is_stmt 1 view .LVU354
 537:System.cpp    **** 			{
 1085               		.loc 1 537 26 is_stmt 0 view .LVU355
 1086 049a 8091 0000 		lds r24,RotEnc_State
 537:System.cpp    **** 			{
 1087               		.loc 1 537 9 view .LVU356
 1088 049e 8130      		cpi r24,lo8(1)
 1089 04a0 01F4      		brne .L95
 539:System.cpp    **** 				SP10281_WriteAll('o', 'u', 't', 0, 0, 0);
 1090               		.loc 1 539 5 is_stmt 1 view .LVU357
 539:System.cpp    **** 				SP10281_WriteAll('o', 'u', 't', 0, 0, 0);
 1091               		.loc 1 539 17 is_stmt 0 view .LVU358
 1092 04a2 8093 0000 		sts SetMidiEdit,r24
 540:System.cpp    **** 			}
 1093               		.loc 1 540 5 is_stmt 1 view .LVU359
 540:System.cpp    **** 			}
 1094               		.loc 1 540 21 is_stmt 0 view .LVU360
 1095 04a6 E12C      		mov r14,__zero_reg__
 1096 04a8 00E0      		ldi r16,0
 1097 04aa 20E0      		ldi r18,0
 1098 04ac 44E7      		ldi r20,lo8(116)
 1099 04ae 65E7      		ldi r22,lo8(117)
 1100 04b0 8FE6      		ldi r24,lo8(111)
 1101               	.L134:
 545:System.cpp    **** 			}
 1102               		.loc 1 545 21 view .LVU361
 1103 04b2 0E94 0000 		call _Z16SP10281_WriteAllccchhh
 1104               	.LVL42:
 1105 04b6 00C0      		rjmp .L67
 1106               	.L95:
 542:System.cpp    **** 			{
 1107               		.loc 1 542 9 is_stmt 1 view .LVU362
 542:System.cpp    **** 			{
 1108               		.loc 1 542 26 is_stmt 0 view .LVU363
 1109 04b8 8091 0000 		lds r24,RotEnc_State
 542:System.cpp    **** 			{
 1110               		.loc 1 542 9 view .LVU364
 1111 04bc 8230      		cpi r24,lo8(2)
 1112 04be 01F0      		breq .+2
 1113 04c0 00C0      		rjmp .L67
 544:System.cpp    **** 				SP10281_WriteAll('i', 'n', ' ', 0, 0, 0);
 1114               		.loc 1 544 5 is_stmt 1 view .LVU365
 544:System.cpp    **** 				SP10281_WriteAll('i', 'n', ' ', 0, 0, 0);
 1115               		.loc 1 544 17 is_stmt 0 view .LVU366
 1116 04c2 1092 0000 		sts SetMidiEdit,__zero_reg__
 545:System.cpp    **** 			}
 1117               		.loc 1 545 5 is_stmt 1 view .LVU367
 545:System.cpp    **** 			}
 1118               		.loc 1 545 21 is_stmt 0 view .LVU368
 1119 04c6 E12C      		mov r14,__zero_reg__
 1120 04c8 00E0      		ldi r16,0
 1121 04ca 20E0      		ldi r18,0
 1122 04cc 40E2      		ldi r20,lo8(32)
 1123 04ce 6EE6      		ldi r22,lo8(110)
 1124 04d0 89E6      		ldi r24,lo8(105)
 1125 04d2 00C0      		rjmp .L134
 1126               	.L69:
 550:System.cpp    **** 			if (RotEnc_State == SHORT_PRESS)
 1127               		.loc 1 550 3 is_stmt 1 view .LVU369
 551:System.cpp    **** 			{
 1128               		.loc 1 551 4 view .LVU370
 551:System.cpp    **** 			{
 1129               		.loc 1 551 21 is_stmt 0 view .LVU371
 1130 04d4 8091 0000 		lds r24,RotEnc_State
 551:System.cpp    **** 			{
 1131               		.loc 1 551 4 view .LVU372
 1132 04d8 8330      		cpi r24,lo8(3)
 1133 04da 01F4      		brne .L96
 554:System.cpp    **** 				
 1134               		.loc 1 554 5 is_stmt 1 view .LVU373
 554:System.cpp    **** 				
 1135               		.loc 1 554 29 is_stmt 0 view .LVU374
 1136 04dc 1092 0000 		sts System_TempSelectOvfCnt+1,__zero_reg__
 1137 04e0 1092 0000 		sts System_TempSelectOvfCnt,__zero_reg__
 556:System.cpp    **** 			}
 1138               		.loc 1 556 5 is_stmt 1 view .LVU375
 556:System.cpp    **** 			}
 1139               		.loc 1 556 26 is_stmt 0 view .LVU376
 1140 04e4 8091 0000 		lds r24,TempSelectMidiPC
 1141 04e8 8093 0000 		sts LastTempSelectMidiPC,r24
 1142 04ec 00C0      		rjmp .L67
 1143               	.L96:
 558:System.cpp    **** 			{
 1144               		.loc 1 558 9 is_stmt 1 view .LVU377
 558:System.cpp    **** 			{
 1145               		.loc 1 558 26 is_stmt 0 view .LVU378
 1146 04ee 8091 0000 		lds r24,RotEnc_State
 558:System.cpp    **** 			{
 1147               		.loc 1 558 9 view .LVU379
 1148 04f2 8530      		cpi r24,lo8(5)
 1149 04f4 01F4      		brne .L97
 560:System.cpp    **** 				{
 1150               		.loc 1 560 5 is_stmt 1 view .LVU380
 560:System.cpp    **** 				{
 1151               		.loc 1 560 21 is_stmt 0 view .LVU381
 1152 04f6 8091 0000 		lds r24,SetMidiEdit
 562:System.cpp    **** 					eeprom_write_byte((uint8_t*)(EEPROM_PRESETS_BASE_ADDR+(ActivePreset * sizeof(Preset)) + 2), Te
 1153               		.loc 1 562 18 view .LVU382
 1154 04fa E091 0000 		lds r30,ActivePreset
 560:System.cpp    **** 				{
 1155               		.loc 1 560 5 view .LVU383
 1156 04fe 8111      		cpse r24,__zero_reg__
 1157 0500 00C0      		rjmp .L98
 562:System.cpp    **** 					eeprom_write_byte((uint8_t*)(EEPROM_PRESETS_BASE_ADDR+(ActivePreset * sizeof(Preset)) + 2), Te
 1158               		.loc 1 562 6 is_stmt 1 view .LVU384
 562:System.cpp    **** 					eeprom_write_byte((uint8_t*)(EEPROM_PRESETS_BASE_ADDR+(ActivePreset * sizeof(Preset)) + 2), Te
 1159               		.loc 1 562 43 is_stmt 0 view .LVU385
 1160 0502 8091 0000 		lds r24,TempSelectMidiPC
 1161 0506 94E0      		ldi r25,lo8(4)
 1162 0508 E99F      		mul r30,r25
 1163 050a F001      		movw r30,r0
 1164 050c 1124      		clr __zero_reg__
 1165 050e E050      		subi r30,lo8(-(PresetTable))
 1166 0510 F040      		sbci r31,hi8(-(PresetTable))
 1167 0512 8283      		std Z+2,r24
 563:System.cpp    **** 				}
 1168               		.loc 1 563 6 is_stmt 1 view .LVU386
 563:System.cpp    **** 				}
 1169               		.loc 1 563 23 is_stmt 0 view .LVU387
 1170 0514 6091 0000 		lds r22,TempSelectMidiPC
 563:System.cpp    **** 				}
 1171               		.loc 1 563 61 view .LVU388
 1172 0518 8091 0000 		lds r24,ActivePreset
 563:System.cpp    **** 				}
 1173               		.loc 1 563 59 view .LVU389
 1174 051c 24E0      		ldi r18,lo8(4)
 1175 051e 829F      		mul r24,r18
 1176 0520 C001      		movw r24,r0
 1177 0522 1124      		clr __zero_reg__
 563:System.cpp    **** 				}
 1178               		.loc 1 563 23 view .LVU390
 1179 0524 8A59      		subi r24,-102
 1180 0526 9F4F      		sbci r25,-1
 1181               	.L130:
 568:System.cpp    **** 				}
 1182               		.loc 1 568 23 view .LVU391
 1183 0528 0E94 0000 		call eeprom_write_byte
 1184               	.LVL43:
 1185 052c 00C0      		rjmp .L138
 1186               	.L98:
 567:System.cpp    **** 					eeprom_write_byte((uint8_t*)(EEPROM_PRESETS_BASE_ADDR+(ActivePreset * sizeof(Preset)) + 3), Te
 1187               		.loc 1 567 6 is_stmt 1 view .LVU392
 567:System.cpp    **** 					eeprom_write_byte((uint8_t*)(EEPROM_PRESETS_BASE_ADDR+(ActivePreset * sizeof(Preset)) + 3), Te
 1188               		.loc 1 567 44 is_stmt 0 view .LVU393
 1189 052e 8091 0000 		lds r24,TempSelectMidiPC
 1190 0532 44E0      		ldi r20,lo8(4)
 1191 0534 E49F      		mul r30,r20
 1192 0536 F001      		movw r30,r0
 1193 0538 1124      		clr __zero_reg__
 1194 053a E050      		subi r30,lo8(-(PresetTable))
 1195 053c F040      		sbci r31,hi8(-(PresetTable))
 1196 053e 8383      		std Z+3,r24
 568:System.cpp    **** 				}
 1197               		.loc 1 568 6 is_stmt 1 view .LVU394
 568:System.cpp    **** 				}
 1198               		.loc 1 568 23 is_stmt 0 view .LVU395
 1199 0540 6091 0000 		lds r22,TempSelectMidiPC
 568:System.cpp    **** 				}
 1200               		.loc 1 568 61 view .LVU396
 1201 0544 8091 0000 		lds r24,ActivePreset
 568:System.cpp    **** 				}
 1202               		.loc 1 568 59 view .LVU397
 1203 0548 54E0      		ldi r21,lo8(4)
 1204 054a 859F      		mul r24,r21
 1205 054c C001      		movw r24,r0
 1206 054e 1124      		clr __zero_reg__
 568:System.cpp    **** 				}
 1207               		.loc 1 568 23 view .LVU398
 1208 0550 8959      		subi r24,-103
 1209 0552 9F4F      		sbci r25,-1
 1210 0554 00C0      		rjmp .L130
 1211               	.L97:
 573:System.cpp    **** 			{
 1212               		.loc 1 573 9 is_stmt 1 view .LVU399
 573:System.cpp    **** 			{
 1213               		.loc 1 573 26 is_stmt 0 view .LVU400
 1214 0556 8091 0000 		lds r24,RotEnc_State
 573:System.cpp    **** 			{
 1215               		.loc 1 573 9 view .LVU401
 1216 055a 8130      		cpi r24,lo8(1)
 1217 055c 01F4      		brne .L100
 575:System.cpp    **** 				{
 1218               		.loc 1 575 5 is_stmt 1 view .LVU402
 575:System.cpp    **** 				{
 1219               		.loc 1 575 26 is_stmt 0 view .LVU403
 1220 055e 8091 0000 		lds r24,TempSelectMidiPC
 575:System.cpp    **** 				{
 1221               		.loc 1 575 5 view .LVU404
 1222 0562 8F37      		cpi r24,lo8(127)
 1223 0564 01F0      		breq .L106
 577:System.cpp    **** 				}
 1224               		.loc 1 577 6 is_stmt 1 view .LVU405
 577:System.cpp    **** 				}
 1225               		.loc 1 577 22 is_stmt 0 view .LVU406
 1226 0566 8091 0000 		lds r24,TempSelectMidiPC
 1227 056a 8F5F      		subi r24,lo8(-(1))
 1228               	.L131:
 601:System.cpp    **** 				}
 1229               		.loc 1 601 22 view .LVU407
 1230 056c 8093 0000 		sts TempSelectMidiPC,r24
 1231 0570 00C0      		rjmp .L106
 1232               	.L100:
 593:System.cpp    **** 			{
 1233               		.loc 1 593 9 is_stmt 1 view .LVU408
 593:System.cpp    **** 			{
 1234               		.loc 1 593 26 is_stmt 0 view .LVU409
 1235 0572 8091 0000 		lds r24,RotEnc_State
 593:System.cpp    **** 			{
 1236               		.loc 1 593 9 view .LVU410
 1237 0576 8230      		cpi r24,lo8(2)
 1238 0578 01F0      		breq .+2
 1239 057a 00C0      		rjmp .L67
 595:System.cpp    **** 				{
 1240               		.loc 1 595 5 is_stmt 1 view .LVU411
 595:System.cpp    **** 				{
 1241               		.loc 1 595 26 is_stmt 0 view .LVU412
 1242 057c 8091 0000 		lds r24,TempSelectMidiPC
 595:System.cpp    **** 				{
 1243               		.loc 1 595 40 view .LVU413
 1244 0580 87FD      		sbrc r24,7
 1245 0582 00C0      		rjmp .L104
 595:System.cpp    **** 				{
 1246               		.loc 1 595 60 discriminator 2 view .LVU414
 1247 0584 8091 0000 		lds r24,TempSelectMidiPC
 595:System.cpp    **** 				{
 1248               		.loc 1 595 40 discriminator 2 view .LVU415
 1249 0588 8823      		tst r24
 1250 058a 01F0      		breq .L104
 599:System.cpp    **** 				{
 1251               		.loc 1 599 10 is_stmt 1 view .LVU416
 599:System.cpp    **** 				{
 1252               		.loc 1 599 31 is_stmt 0 view .LVU417
 1253 058c 8091 0000 		lds r24,TempSelectMidiPC
 599:System.cpp    **** 				{
 1254               		.loc 1 599 10 view .LVU418
 1255 0590 8111      		cpse r24,__zero_reg__
 1256 0592 00C0      		rjmp .L105
 1257               	.L106:
 605:System.cpp    **** 				{
 1258               		.loc 1 605 5 is_stmt 1 view .LVU419
 605:System.cpp    **** 				{
 1259               		.loc 1 605 26 is_stmt 0 view .LVU420
 1260 0594 8091 0000 		lds r24,TempSelectMidiPC
 605:System.cpp    **** 				{
 1261               		.loc 1 605 5 view .LVU421
 1262 0598 8F3F      		cpi r24,lo8(-1)
 1263 059a 01F4      		brne .L107
 607:System.cpp    **** 				}
 1264               		.loc 1 607 6 is_stmt 1 view .LVU422
 607:System.cpp    **** 				}
 1265               		.loc 1 607 22 is_stmt 0 view .LVU423
 1266 059c E12C      		mov r14,__zero_reg__
 1267 059e 00E0      		ldi r16,0
 1268 05a0 20E0      		ldi r18,0
 1269 05a2 46E6      		ldi r20,lo8(102)
 1270 05a4 66E6      		ldi r22,lo8(102)
 1271 05a6 8FE6      		ldi r24,lo8(111)
 1272 05a8 0E94 0000 		call _Z16SP10281_WriteAllccchhh
 1273               	.LVL44:
 1274 05ac 00C0      		rjmp .L108
 1275               	.L104:
 597:System.cpp    **** 				}
 1276               		.loc 1 597 6 is_stmt 1 view .LVU424
 597:System.cpp    **** 				}
 1277               		.loc 1 597 23 is_stmt 0 view .LVU425
 1278 05ae 8FEF      		ldi r24,lo8(-1)
 1279 05b0 00C0      		rjmp .L131
 1280               	.L105:
 601:System.cpp    **** 				}
 1281               		.loc 1 601 6 is_stmt 1 view .LVU426
 601:System.cpp    **** 				}
 1282               		.loc 1 601 22 is_stmt 0 view .LVU427
 1283 05b2 8091 0000 		lds r24,TempSelectMidiPC
 1284 05b6 8150      		subi r24,lo8(-(-1))
 1285 05b8 00C0      		rjmp .L131
 1286               	.L107:
 611:System.cpp    **** 				}
 1287               		.loc 1 611 6 is_stmt 1 view .LVU428
 611:System.cpp    **** 				}
 1288               		.loc 1 611 25 is_stmt 0 view .LVU429
 1289 05ba 8091 0000 		lds r24,TempSelectMidiPC
 1290 05be 90E0      		ldi r25,0
 1291 05c0 0E94 0000 		call _Z19SP10281_WriteNumbers
 1292               	.LVL45:
 1293 05c4 00C0      		rjmp .L108
 1294               		.cfi_endproc
 1295               	.LFE3:
 1297               	.global	_Z22System_UpdateUI_Relaysv
 1299               	_Z22System_UpdateUI_Relaysv:
 1300               	.LFB9:
 815:System.cpp    **** 
 816:System.cpp    **** void System_UpdateUI_Relays()
 817:System.cpp    **** {
 1301               		.loc 1 817 1 is_stmt 1 view -0
 1302               		.cfi_startproc
 1303 05c6 0F93      		push r16
 1304               	.LCFI8:
 1305               		.cfi_def_cfa_offset 3
 1306               		.cfi_offset 16, -2
 1307 05c8 1F93      		push r17
 1308               	.LCFI9:
 1309               		.cfi_def_cfa_offset 4
 1310               		.cfi_offset 17, -3
 1311 05ca CF93      		push r28
 1312               	.LCFI10:
 1313               		.cfi_def_cfa_offset 5
 1314               		.cfi_offset 28, -4
 1315 05cc DF93      		push r29
 1316               	.LCFI11:
 1317               		.cfi_def_cfa_offset 6
 1318               		.cfi_offset 29, -5
 1319               	/* prologue: function */
 1320               	/* frame size = 0 */
 1321               	/* stack size = 4 */
 1322               	.L__stack_usage = 4
 818:System.cpp    **** 	for (uint8_t i = 0; i < NUMBER_OF_LOOPS; i++)
 1323               		.loc 1 818 2 view .LVU431
 1324               	.LVL46:
 1325               	.LBB15:
 1326               		.loc 1 818 24 view .LVU432
 1327 05ce C0E0      		ldi r28,lo8(LoopRelays)
 1328 05d0 D0E0      		ldi r29,hi8(LoopRelays)
 1329               	.LBE15:
 817:System.cpp    **** 	for (uint8_t i = 0; i < NUMBER_OF_LOOPS; i++)
 1330               		.loc 1 817 1 is_stmt 0 view .LVU433
 1331 05d2 10E0      		ldi r17,0
 1332 05d4 00E0      		ldi r16,0
 1333               	.LVL47:
 1334               	.L148:
 1335               	.LBB16:
 819:System.cpp    **** 	{
 820:System.cpp    **** 		if (LoopModePreset.Active_Loops & (1 << i))
 1336               		.loc 1 820 3 is_stmt 1 view .LVU434
 1337               		.loc 1 820 22 is_stmt 0 view .LVU435
 1338 05d6 8091 0000 		lds r24,LoopModePreset
 1339 05da 90E0      		ldi r25,0
 1340               		.loc 1 820 35 view .LVU436
 1341 05dc 002E      		mov r0,r16
 1342 05de 00C0      		rjmp 2f
 1343               		1:
 1344 05e0 9595      		asr r25
 1345 05e2 8795      		ror r24
 1346               		2:
 1347 05e4 0A94      		dec r0
 1348 05e6 02F4      		brpl 1b
 1349               		.loc 1 820 3 view .LVU437
 1350 05e8 80FF      		sbrs r24,0
 1351 05ea 00C0      		rjmp .L144
 821:System.cpp    **** 		{
 822:System.cpp    **** 			if (LoopRelays[i].getState() != MCP_Output::SET)
 1352               		.loc 1 822 4 is_stmt 1 view .LVU438
 1353               		.loc 1 822 30 is_stmt 0 view .LVU439
 1354 05ec CE01      		movw r24,r28
 1355 05ee 0E94 0000 		call _ZN10MCP_Output8getStateEv
 1356               	.LVL48:
 1357               		.loc 1 822 4 view .LVU440
 1358 05f2 8130      		cpi r24,lo8(1)
 1359 05f4 01F0      		breq .L146
 823:System.cpp    **** 			{
 824:System.cpp    **** 				LoopRelays[i].Set();
 1360               		.loc 1 824 5 is_stmt 1 view .LVU441
 1361               		.loc 1 824 22 is_stmt 0 view .LVU442
 1362 05f6 CE01      		movw r24,r28
 1363 05f8 0E94 0000 		call _ZN10MCP_Output3SetEv
 1364               	.LVL49:
 1365               	.L146:
 818:System.cpp    **** 	{
 1366               		.loc 1 818 2 is_stmt 1 discriminator 2 view .LVU443
 818:System.cpp    **** 	{
 1367               		.loc 1 818 24 discriminator 2 view .LVU444
 1368 05fc 0F5F      		subi r16,-1
 1369 05fe 1F4F      		sbci r17,-1
 1370               	.LVL50:
 818:System.cpp    **** 	{
 1371               		.loc 1 818 24 is_stmt 0 discriminator 2 view .LVU445
 1372 0600 2496      		adiw r28,4
 1373 0602 0830      		cpi r16,8
 1374 0604 1105      		cpc r17,__zero_reg__
 1375 0606 01F4      		brne .L148
 1376 0608 C0E0      		ldi r28,lo8(CtrlSwitchRelays)
 1377 060a D0E0      		ldi r29,hi8(CtrlSwitchRelays)
 818:System.cpp    **** 	{
 1378               		.loc 1 818 24 view .LVU446
 1379 060c 10E0      		ldi r17,0
 1380 060e 00E0      		ldi r16,0
 1381               	.LVL51:
 1382               	.L153:
 818:System.cpp    **** 	{
 1383               		.loc 1 818 24 view .LVU447
 1384               	.LBE16:
 1385               	.LBB17:
 825:System.cpp    **** 			}
 826:System.cpp    **** 		}
 827:System.cpp    **** 		else
 828:System.cpp    **** 		{
 829:System.cpp    **** 			if (LoopRelays[i].getState() != MCP_Output::CLEARED)
 830:System.cpp    **** 			{
 831:System.cpp    **** 				LoopRelays[i].Clear();
 832:System.cpp    **** 			}
 833:System.cpp    **** 		}
 834:System.cpp    **** 	}
 835:System.cpp    **** 	
 836:System.cpp    **** 	for (uint8_t i = 0; i < NUMBER_OF_CTRL_SWITCHES; i++)
 837:System.cpp    **** 	{
 838:System.cpp    **** 		if (LoopModePreset.Active_CtrlSwitches & (1 << i))
 1386               		.loc 1 838 3 is_stmt 1 view .LVU448
 1387               		.loc 1 838 22 is_stmt 0 view .LVU449
 1388 0610 8091 0000 		lds r24,LoopModePreset+1
 1389 0614 90E0      		ldi r25,0
 1390               		.loc 1 838 42 view .LVU450
 1391 0616 002E      		mov r0,r16
 1392 0618 00C0      		rjmp 2f
 1393               		1:
 1394 061a 9595      		asr r25
 1395 061c 8795      		ror r24
 1396               		2:
 1397 061e 0A94      		dec r0
 1398 0620 02F4      		brpl 1b
 1399               		.loc 1 838 3 view .LVU451
 1400 0622 80FF      		sbrs r24,0
 1401 0624 00C0      		rjmp .L149
 839:System.cpp    **** 		{
 840:System.cpp    **** 			if (CtrlSwitchRelays[i].getState() != MCP_Output::SET)
 1402               		.loc 1 840 4 is_stmt 1 view .LVU452
 1403               		.loc 1 840 36 is_stmt 0 view .LVU453
 1404 0626 CE01      		movw r24,r28
 1405 0628 0E94 0000 		call _ZN10MCP_Output8getStateEv
 1406               	.LVL52:
 1407               		.loc 1 840 4 view .LVU454
 1408 062c 8130      		cpi r24,lo8(1)
 1409 062e 01F0      		breq .L151
 841:System.cpp    **** 			{
 842:System.cpp    **** 				CtrlSwitchRelays[i].Set();
 1410               		.loc 1 842 5 is_stmt 1 view .LVU455
 1411               		.loc 1 842 28 is_stmt 0 view .LVU456
 1412 0630 CE01      		movw r24,r28
 1413 0632 0E94 0000 		call _ZN10MCP_Output3SetEv
 1414               	.LVL53:
 1415               	.L151:
 836:System.cpp    **** 	{
 1416               		.loc 1 836 2 is_stmt 1 discriminator 2 view .LVU457
 836:System.cpp    **** 	{
 1417               		.loc 1 836 24 discriminator 2 view .LVU458
 1418 0636 0F5F      		subi r16,-1
 1419 0638 1F4F      		sbci r17,-1
 1420               	.LVL54:
 836:System.cpp    **** 	{
 1421               		.loc 1 836 24 is_stmt 0 discriminator 2 view .LVU459
 1422 063a 2496      		adiw r28,4
 1423 063c 0430      		cpi r16,4
 1424 063e 1105      		cpc r17,__zero_reg__
 1425 0640 01F4      		brne .L153
 1426               	/* epilogue start */
 1427               	.LBE17:
 843:System.cpp    **** 			}
 844:System.cpp    **** 		}
 845:System.cpp    **** 		else
 846:System.cpp    **** 		{
 847:System.cpp    **** 			if (CtrlSwitchRelays[i].getState() != MCP_Output::CLEARED)
 848:System.cpp    **** 			{
 849:System.cpp    **** 				CtrlSwitchRelays[i].Clear();
 850:System.cpp    **** 			}
 851:System.cpp    **** 		}
 852:System.cpp    **** 	}
 853:System.cpp    **** }
 1428               		.loc 1 853 1 view .LVU460
 1429 0642 DF91      		pop r29
 1430 0644 CF91      		pop r28
 1431 0646 1F91      		pop r17
 1432 0648 0F91      		pop r16
 1433               	.LVL55:
 1434               		.loc 1 853 1 view .LVU461
 1435 064a 0895      		ret
 1436               	.LVL56:
 1437               	.L144:
 1438               	.LBB18:
 829:System.cpp    **** 			{
 1439               		.loc 1 829 4 is_stmt 1 view .LVU462
 829:System.cpp    **** 			{
 1440               		.loc 1 829 30 is_stmt 0 view .LVU463
 1441 064c CE01      		movw r24,r28
 1442 064e 0E94 0000 		call _ZN10MCP_Output8getStateEv
 1443               	.LVL57:
 829:System.cpp    **** 			{
 1444               		.loc 1 829 4 view .LVU464
 1445 0652 8823      		tst r24
 1446 0654 01F0      		breq .L146
 831:System.cpp    **** 			}
 1447               		.loc 1 831 5 is_stmt 1 view .LVU465
 831:System.cpp    **** 			}
 1448               		.loc 1 831 24 is_stmt 0 view .LVU466
 1449 0656 CE01      		movw r24,r28
 1450 0658 0E94 0000 		call _ZN10MCP_Output5ClearEv
 1451               	.LVL58:
 1452 065c 00C0      		rjmp .L146
 1453               	.LVL59:
 1454               	.L149:
 831:System.cpp    **** 			}
 1455               		.loc 1 831 24 view .LVU467
 1456               	.LBE18:
 1457               	.LBB19:
 847:System.cpp    **** 			{
 1458               		.loc 1 847 4 is_stmt 1 view .LVU468
 847:System.cpp    **** 			{
 1459               		.loc 1 847 36 is_stmt 0 view .LVU469
 1460 065e CE01      		movw r24,r28
 1461 0660 0E94 0000 		call _ZN10MCP_Output8getStateEv
 1462               	.LVL60:
 847:System.cpp    **** 			{
 1463               		.loc 1 847 4 view .LVU470
 1464 0664 8823      		tst r24
 1465 0666 01F0      		breq .L151
 849:System.cpp    **** 			}
 1466               		.loc 1 849 5 is_stmt 1 view .LVU471
 849:System.cpp    **** 			}
 1467               		.loc 1 849 30 is_stmt 0 view .LVU472
 1468 0668 CE01      		movw r24,r28
 1469 066a 0E94 0000 		call _ZN10MCP_Output5ClearEv
 1470               	.LVL61:
 1471 066e 00C0      		rjmp .L151
 1472               	.LBE19:
 1473               		.cfi_endproc
 1474               	.LFE9:
 1476               		.section	.rodata.str1.1,"aMS",@progbits,1
 1477               	.LC0:
 1478 0000 5072 6520 		.string	"Pre "
 1478      00
 1479               		.text
 1480               	.global	_Z19System_ChangePresetv
 1482               	_Z19System_ChangePresetv:
 1483               	.LFB10:
 854:System.cpp    **** 
 855:System.cpp    **** void System_ChangePreset()
 856:System.cpp    **** {
 1484               		.loc 1 856 1 is_stmt 1 view -0
 1485               		.cfi_startproc
 1486 0670 CF93      		push r28
 1487               	.LCFI12:
 1488               		.cfi_def_cfa_offset 3
 1489               		.cfi_offset 28, -2
 1490 0672 DF93      		push r29
 1491               	.LCFI13:
 1492               		.cfi_def_cfa_offset 4
 1493               		.cfi_offset 29, -3
 1494 0674 00D0      		rcall .
 1495               	.LCFI14:
 1496               		.cfi_def_cfa_offset 6
 1497 0676 CDB7      		in r28,__SP_L__
 1498 0678 DEB7      		in r29,__SP_H__
 1499               	.LCFI15:
 1500               		.cfi_def_cfa_register 28
 1501               	/* prologue: function */
 1502               	/* frame size = 2 */
 1503               	/* stack size = 4 */
 1504               	.L__stack_usage = 4
 857:System.cpp    **** 	LoopModePreset = PresetTable[ActivePreset];
 1505               		.loc 1 857 2 view .LVU474
 1506               		.loc 1 857 31 is_stmt 0 view .LVU475
 1507 067a E091 0000 		lds r30,ActivePreset
 1508               		.loc 1 857 17 view .LVU476
 1509 067e 84E0      		ldi r24,lo8(4)
 1510 0680 E89F      		mul r30,r24
 1511 0682 F001      		movw r30,r0
 1512 0684 1124      		clr __zero_reg__
 1513 0686 E050      		subi r30,lo8(-(PresetTable))
 1514 0688 F040      		sbci r31,hi8(-(PresetTable))
 1515 068a 8081      		ld r24,Z
 1516 068c 9181      		ldd r25,Z+1
 1517 068e A281      		ldd r26,Z+2
 1518 0690 B381      		ldd r27,Z+3
 1519 0692 8093 0000 		sts LoopModePreset,r24
 1520 0696 9093 0000 		sts LoopModePreset+1,r25
 1521 069a A093 0000 		sts LoopModePreset+2,r26
 1522 069e B093 0000 		sts LoopModePreset+3,r27
 858:System.cpp    **** 	
 859:System.cpp    **** 	/* Update relays */
 860:System.cpp    **** 	//System_UpdateUI_Relays();
 861:System.cpp    **** 				
 862:System.cpp    **** 	/* Send MIDI PC message if MIDI Out is set for preset */
 863:System.cpp    **** 	if (PresetTable[ActivePreset].MIDI_PC_Out != MIDI_PC_OFF)
 1523               		.loc 1 863 2 is_stmt 1 view .LVU477
 1524               		.loc 1 863 18 is_stmt 0 view .LVU478
 1525 06a2 E091 0000 		lds r30,ActivePreset
 1526               		.loc 1 863 32 view .LVU479
 1527 06a6 84E0      		ldi r24,lo8(4)
 1528 06a8 E89F      		mul r30,r24
 1529 06aa F001      		movw r30,r0
 1530 06ac 1124      		clr __zero_reg__
 1531 06ae E050      		subi r30,lo8(-(PresetTable))
 1532 06b0 F040      		sbci r31,hi8(-(PresetTable))
 1533               		.loc 1 863 2 view .LVU480
 1534 06b2 8381      		ldd r24,Z+3
 1535 06b4 8F3F      		cpi r24,lo8(-1)
 1536 06b6 01F0      		breq .L163
 864:System.cpp    **** 	{
 865:System.cpp    **** 		MIDI_TransmitProgramChange(PresetTable[ActivePreset].MIDI_PC_Out);
 1537               		.loc 1 865 3 is_stmt 1 view .LVU481
 1538               		.loc 1 865 42 is_stmt 0 view .LVU482
 1539 06b8 E091 0000 		lds r30,ActivePreset
 1540               		.loc 1 865 29 view .LVU483
 1541 06bc 84E0      		ldi r24,lo8(4)
 1542 06be E89F      		mul r30,r24
 1543 06c0 F001      		movw r30,r0
 1544 06c2 1124      		clr __zero_reg__
 1545 06c4 E050      		subi r30,lo8(-(PresetTable))
 1546 06c6 F040      		sbci r31,hi8(-(PresetTable))
 1547 06c8 8381      		ldd r24,Z+3
 1548 06ca 0E94 0000 		call _Z26MIDI_TransmitProgramChangeh
 1549               	.LVL62:
 1550               	.L163:
 866:System.cpp    **** 	}
 867:System.cpp    **** 				
 868:System.cpp    **** 	/* Update Pedal display */
 869:System.cpp    **** 	uint8_t tmp[2] = {0};
 1551               		.loc 1 869 2 is_stmt 1 view .LVU484
 1552               		.loc 1 869 10 is_stmt 0 view .LVU485
 1553 06ce 1A82      		std Y+2,__zero_reg__
 1554 06d0 1982      		std Y+1,__zero_reg__
 870:System.cpp    **** 	PedalCom_QueueCommand(UpdateTunerLEDs, 2, (uint8_t*)tmp);
 1555               		.loc 1 870 2 is_stmt 1 view .LVU486
 1556               		.loc 1 870 23 is_stmt 0 view .LVU487
 1557 06d2 AE01      		movw r20,r28
 1558 06d4 4F5F      		subi r20,-1
 1559 06d6 5F4F      		sbci r21,-1
 1560 06d8 62E0      		ldi r22,lo8(2)
 1561 06da 83ED      		ldi r24,lo8(-45)
 1562 06dc 0E94 0000 		call _Z21PedalCom_QueueCommand3CMDhPh
 1563               	.LVL63:
 871:System.cpp    **** 	PedalCom_QueueCommand(Update7segments, 4, (uint8_t*)"Pre ");
 1564               		.loc 1 871 2 is_stmt 1 view .LVU488
 1565               		.loc 1 871 23 is_stmt 0 view .LVU489
 1566 06e0 40E0      		ldi r20,lo8(.LC0)
 1567 06e2 50E0      		ldi r21,hi8(.LC0)
 1568 06e4 64E0      		ldi r22,lo8(4)
 1569 06e6 87ED      		ldi r24,lo8(-41)
 1570 06e8 0E94 0000 		call _Z21PedalCom_QueueCommand3CMDhPh
 1571               	.LVL64:
 872:System.cpp    **** 	
 873:System.cpp    **** 	tmp[0] = (1 << ActivePreset);
 1572               		.loc 1 873 2 is_stmt 1 view .LVU490
 1573               		.loc 1 873 17 is_stmt 0 view .LVU491
 1574 06ec 9091 0000 		lds r25,ActivePreset
 1575               		.loc 1 873 9 view .LVU492
 1576 06f0 81E0      		ldi r24,lo8(1)
 1577 06f2 00C0      		rjmp 2f
 1578               		1:
 1579 06f4 880F      		lsl r24
 1580               		2:
 1581 06f6 9A95      		dec r25
 1582 06f8 02F4      		brpl 1b
 1583 06fa 8983      		std Y+1,r24
 874:System.cpp    **** 	PedalCom_QueueCommand(UpdatePresetLoopLEDs, 1, (uint8_t*)tmp);
 1584               		.loc 1 874 2 is_stmt 1 view .LVU493
 1585               		.loc 1 874 23 is_stmt 0 view .LVU494
 1586 06fc AE01      		movw r20,r28
 1587 06fe 4F5F      		subi r20,-1
 1588 0700 5F4F      		sbci r21,-1
 1589 0702 61E0      		ldi r22,lo8(1)
 1590 0704 80ED      		ldi r24,lo8(-48)
 1591 0706 0E94 0000 		call _Z21PedalCom_QueueCommand3CMDhPh
 1592               	.LVL65:
 875:System.cpp    **** 				
 876:System.cpp    **** 	/* Update 7-segment display */
 877:System.cpp    **** 	SP10281_WriteNumber(ActivePreset + 1);
 1593               		.loc 1 877 2 is_stmt 1 view .LVU495
 1594               		.loc 1 877 22 is_stmt 0 view .LVU496
 1595 070a 8091 0000 		lds r24,ActivePreset
 1596 070e 90E0      		ldi r25,0
 1597               		.loc 1 877 21 view .LVU497
 1598 0710 0196      		adiw r24,1
 1599 0712 0E94 0000 		call _Z19SP10281_WriteNumbers
 1600               	.LVL66:
 878:System.cpp    **** 				
 879:System.cpp    **** 	/* Update UI LEDs */
 880:System.cpp    **** 	System_UpdateUI_LEDs();
 1601               		.loc 1 880 2 is_stmt 1 view .LVU498
 1602               		.loc 1 880 22 is_stmt 0 view .LVU499
 1603 0716 0E94 0000 		call _Z20System_UpdateUI_LEDsv
 1604               	.LVL67:
 1605               	/* epilogue start */
 881:System.cpp    **** }
 1606               		.loc 1 881 1 view .LVU500
 1607 071a 0F90      		pop __tmp_reg__
 1608 071c 0F90      		pop __tmp_reg__
 1609 071e DF91      		pop r29
 1610 0720 CF91      		pop r28
 1611 0722 0895      		ret
 1612               		.cfi_endproc
 1613               	.LFE10:
 1615               	.global	_Z21System_UpdateLoopCtrlv
 1617               	_Z21System_UpdateLoopCtrlv:
 1618               	.LFB11:
 882:System.cpp    **** 
 883:System.cpp    **** void System_UpdateLoopCtrl()
 884:System.cpp    **** {
 1619               		.loc 1 884 1 is_stmt 1 view -0
 1620               		.cfi_startproc
 1621 0724 CF93      		push r28
 1622               	.LCFI16:
 1623               		.cfi_def_cfa_offset 3
 1624               		.cfi_offset 28, -2
 1625 0726 DF93      		push r29
 1626               	.LCFI17:
 1627               		.cfi_def_cfa_offset 4
 1628               		.cfi_offset 29, -3
 1629 0728 00D0      		rcall .
 1630 072a 00D0      		rcall .
 1631               	.LCFI18:
 1632               		.cfi_def_cfa_offset 8
 1633 072c CDB7      		in r28,__SP_L__
 1634 072e DEB7      		in r29,__SP_H__
 1635               	.LCFI19:
 1636               		.cfi_def_cfa_register 28
 1637               	/* prologue: function */
 1638               	/* frame size = 4 */
 1639               	/* stack size = 6 */
 1640               	.L__stack_usage = 6
 885:System.cpp    **** 	/* Update relays */
 886:System.cpp    **** 	//System_UpdateUI_Relays();
 887:System.cpp    **** 	
 888:System.cpp    **** 	/* Update Pedal display */
 889:System.cpp    **** 	uint8_t tmp[NUMBER_OF_CTRL_SWITCHES] = {0};
 1641               		.loc 1 889 2 view .LVU502
 1642               		.loc 1 889 10 is_stmt 0 view .LVU503
 1643 0730 1A82      		std Y+2,__zero_reg__
 1644 0732 1982      		std Y+1,__zero_reg__
 1645 0734 1C82      		std Y+4,__zero_reg__
 1646 0736 1B82      		std Y+3,__zero_reg__
 890:System.cpp    **** 	PedalCom_QueueCommand(UpdateTunerLEDs, 2, (uint8_t*)&tmp);
 1647               		.loc 1 890 2 is_stmt 1 view .LVU504
 1648               		.loc 1 890 23 is_stmt 0 view .LVU505
 1649 0738 AE01      		movw r20,r28
 1650 073a 4F5F      		subi r20,-1
 1651 073c 5F4F      		sbci r21,-1
 1652 073e 62E0      		ldi r22,lo8(2)
 1653 0740 83ED      		ldi r24,lo8(-45)
 1654 0742 0E94 0000 		call _Z21PedalCom_QueueCommand3CMDhPh
 1655               	.LVL68:
 891:System.cpp    **** 	PedalCom_QueueCommand(UpdatePresetLoopLEDs, 1, (uint8_t*)&LoopModePreset.Active_Loops);
 1656               		.loc 1 891 2 is_stmt 1 view .LVU506
 1657               		.loc 1 891 23 is_stmt 0 view .LVU507
 1658 0746 40E0      		ldi r20,lo8(LoopModePreset)
 1659 0748 50E0      		ldi r21,hi8(LoopModePreset)
 1660 074a 61E0      		ldi r22,lo8(1)
 1661 074c 80ED      		ldi r24,lo8(-48)
 1662 074e 0E94 0000 		call _Z21PedalCom_QueueCommand3CMDhPh
 1663               	.LVL69:
 892:System.cpp    **** 	
 893:System.cpp    **** 	for (uint8_t i = 0; i < NUMBER_OF_CTRL_SWITCHES; i++)
 1664               		.loc 1 893 2 is_stmt 1 view .LVU508
 1665               	.LBB20:
 1666               		.loc 1 893 24 view .LVU509
 894:System.cpp    **** 	{
 895:System.cpp    **** 		if (LoopModePreset.Active_CtrlSwitches & (1 << i))
 1667               		.loc 1 895 22 is_stmt 0 view .LVU510
 1668 0752 2091 0000 		lds r18,LoopModePreset+1
 1669 0756 30E0      		ldi r19,0
 1670 0758 FE01      		movw r30,r28
 1671 075a 3196      		adiw r30,1
 1672 075c 90E0      		ldi r25,0
 1673 075e 80E0      		ldi r24,0
 1674 0760 AF01      		movw r20,r30
 896:System.cpp    **** 		{
 897:System.cpp    **** 			tmp[i] = '/';
 898:System.cpp    **** 		}
 899:System.cpp    **** 		else
 900:System.cpp    **** 		{
 901:System.cpp    **** 			tmp[i] = '_';
 1675               		.loc 1 901 11 view .LVU511
 1676 0762 6FE5      		ldi r22,lo8(95)
 897:System.cpp    **** 		}
 1677               		.loc 1 897 11 view .LVU512
 1678 0764 7FE2      		ldi r23,lo8(47)
 1679               	.LVL70:
 1680               	.L170:
 895:System.cpp    **** 		{
 1681               		.loc 1 895 3 is_stmt 1 view .LVU513
 895:System.cpp    **** 		{
 1682               		.loc 1 895 42 is_stmt 0 view .LVU514
 1683 0766 D901      		movw r26,r18
 1684 0768 082E      		mov r0,r24
 1685 076a 00C0      		rjmp 2f
 1686               		1:
 1687 076c B595      		asr r27
 1688 076e A795      		ror r26
 1689               		2:
 1690 0770 0A94      		dec r0
 1691 0772 02F4      		brpl 1b
 895:System.cpp    **** 		{
 1692               		.loc 1 895 3 view .LVU515
 1693 0774 A0FF      		sbrs r26,0
 1694 0776 00C0      		rjmp .L168
 897:System.cpp    **** 		}
 1695               		.loc 1 897 4 is_stmt 1 view .LVU516
 897:System.cpp    **** 		}
 1696               		.loc 1 897 11 is_stmt 0 view .LVU517
 1697 0778 7083      		st Z,r23
 1698               	.L169:
 893:System.cpp    **** 	{
 1699               		.loc 1 893 2 is_stmt 1 discriminator 2 view .LVU518
 1700               	.LVL71:
 893:System.cpp    **** 	{
 1701               		.loc 1 893 24 discriminator 2 view .LVU519
 1702 077a 0196      		adiw r24,1
 1703               	.LVL72:
 893:System.cpp    **** 	{
 1704               		.loc 1 893 24 is_stmt 0 discriminator 2 view .LVU520
 1705 077c 3196      		adiw r30,1
 1706 077e 8430      		cpi r24,4
 1707 0780 9105      		cpc r25,__zero_reg__
 1708 0782 01F4      		brne .L170
 1709               	.LBE20:
 902:System.cpp    **** 		}
 903:System.cpp    **** 	}
 904:System.cpp    **** 	
 905:System.cpp    **** 	PedalCom_QueueCommand(Update7segments, 4, (uint8_t*)tmp);
 1710               		.loc 1 905 2 is_stmt 1 view .LVU521
 1711               		.loc 1 905 23 is_stmt 0 view .LVU522
 1712 0784 64E0      		ldi r22,lo8(4)
 1713 0786 87ED      		ldi r24,lo8(-41)
 1714               	.LVL73:
 1715               		.loc 1 905 23 view .LVU523
 1716 0788 0E94 0000 		call _Z21PedalCom_QueueCommand3CMDhPh
 1717               	.LVL74:
 906:System.cpp    **** 	
 907:System.cpp    **** 	/* Update UI LEDs */
 908:System.cpp    **** 	System_UpdateUI_LEDs();
 1718               		.loc 1 908 2 is_stmt 1 view .LVU524
 1719               		.loc 1 908 22 is_stmt 0 view .LVU525
 1720 078c 0E94 0000 		call _Z20System_UpdateUI_LEDsv
 1721               	.LVL75:
 1722               	/* epilogue start */
 909:System.cpp    **** }
 1723               		.loc 1 909 1 view .LVU526
 1724 0790 0F90      		pop __tmp_reg__
 1725 0792 0F90      		pop __tmp_reg__
 1726 0794 0F90      		pop __tmp_reg__
 1727 0796 0F90      		pop __tmp_reg__
 1728 0798 DF91      		pop r29
 1729 079a CF91      		pop r28
 1730 079c 0895      		ret
 1731               	.LVL76:
 1732               	.L168:
 1733               	.LBB21:
 901:System.cpp    **** 		}
 1734               		.loc 1 901 4 is_stmt 1 view .LVU527
 901:System.cpp    **** 		}
 1735               		.loc 1 901 11 is_stmt 0 view .LVU528
 1736 079e 6083      		st Z,r22
 1737 07a0 00C0      		rjmp .L169
 1738               	.LBE21:
 1739               		.cfi_endproc
 1740               	.LFE11:
 1742               	.global	_Z10System_Runv
 1744               	_Z10System_Runv:
 1745               	.LFB2:
  53:System.cpp    **** 	switch (SystemState)
 1746               		.loc 1 53 1 is_stmt 1 view -0
 1747               		.cfi_startproc
 1748 07a2 EF92      		push r14
 1749               	.LCFI20:
 1750               		.cfi_def_cfa_offset 3
 1751               		.cfi_offset 14, -2
 1752 07a4 0F93      		push r16
 1753               	.LCFI21:
 1754               		.cfi_def_cfa_offset 4
 1755               		.cfi_offset 16, -3
 1756               	/* prologue: function */
 1757               	/* frame size = 0 */
 1758               	/* stack size = 2 */
 1759               	.L__stack_usage = 2
  54:System.cpp    **** 	{
 1760               		.loc 1 54 2 view .LVU530
  54:System.cpp    **** 	{
 1761               		.loc 1 54 10 is_stmt 0 view .LVU531
 1762 07a6 E091 0000 		lds r30,SystemState
 1763 07aa E031      		cpi r30,lo8(16)
 1764 07ac 00F0      		brlo .+2
 1765 07ae 00C0      		rjmp .L173
 1766 07b0 F0E0      		ldi r31,0
 1767 07b2 E050      		subi r30,lo8(-(gs(.L175)))
 1768 07b4 F040      		sbci r31,hi8(-(gs(.L175)))
 1769 07b6 0C94 0000 		jmp __tablejump2__
 1770               		.section	.jumptables.gcc._Z10System_Runv,"a",@progbits
 1771               		.p2align	1
 1772               	.L175:
 1773 0000 0000      		.word gs(.L189)
 1774 0002 0000      		.word gs(.L188)
 1775 0004 0000      		.word gs(.L187)
 1776 0006 0000      		.word gs(.L186)
 1777 0008 0000      		.word gs(.L185)
 1778 000a 0000      		.word gs(.L184)
 1779 000c 0000      		.word gs(.L183)
 1780 000e 0000      		.word gs(.L182)
 1781 0010 0000      		.word gs(.L181)
 1782 0012 0000      		.word gs(.L180)
 1783 0014 0000      		.word gs(.L179)
 1784 0016 0000      		.word gs(.L178)
 1785 0018 0000      		.word gs(.L177)
 1786 001a 0000      		.word gs(.L176)
 1787 001c 0000      		.word gs(.L173)
 1788 001e 0000      		.word gs(.L174)
 1789               		.text
 1790               	.L189:
  56:System.cpp    **** 			/* Fill preset table from EEPROM */
 1791               		.loc 1 56 3 is_stmt 1 view .LVU532
  58:System.cpp    **** 			
 1792               		.loc 1 58 4 view .LVU533
  58:System.cpp    **** 			
 1793               		.loc 1 58 21 is_stmt 0 view .LVU534
 1794 07ba 40E2      		ldi r20,lo8(32)
 1795 07bc 50E0      		ldi r21,0
 1796 07be 64E6      		ldi r22,lo8(100)
 1797 07c0 70E0      		ldi r23,0
 1798 07c2 80E0      		ldi r24,lo8(PresetTable)
 1799 07c4 90E0      		ldi r25,hi8(PresetTable)
 1800 07c6 0E94 0000 		call eeprom_read_block
 1801               	.LVL77:
  61:System.cpp    **** 			
 1802               		.loc 1 61 4 is_stmt 1 view .LVU535
  61:System.cpp    **** 			
 1803               		.loc 1 61 55 is_stmt 0 view .LVU536
 1804 07ca 90E0      		ldi r25,0
 1805 07cc 80E0      		ldi r24,0
 1806 07ce 0E94 0000 		call eeprom_read_byte
 1807               	.LVL78:
  61:System.cpp    **** 			
 1808               		.loc 1 61 23 view .LVU537
 1809 07d2 8093 0000 		sts System_MidiChannel,r24
  63:System.cpp    **** 			{
 1810               		.loc 1 63 4 is_stmt 1 view .LVU538
  63:System.cpp    **** 			{
 1811               		.loc 1 63 27 is_stmt 0 view .LVU539
 1812 07d6 8091 0000 		lds r24,System_MidiChannel
  63:System.cpp    **** 			{
 1813               		.loc 1 63 4 view .LVU540
 1814 07da 8131      		cpi r24,lo8(17)
 1815 07dc 00F0      		brlo .L190
  65:System.cpp    **** 				eeprom_write_byte((uint8_t*)EEPROM_MIDI_CH_ADDR, System_MidiChannel);
 1816               		.loc 1 65 5 is_stmt 1 view .LVU541
  65:System.cpp    **** 				eeprom_write_byte((uint8_t*)EEPROM_MIDI_CH_ADDR, System_MidiChannel);
 1817               		.loc 1 65 24 is_stmt 0 view .LVU542
 1818 07de 1092 0000 		sts System_MidiChannel,__zero_reg__
  66:System.cpp    **** 			}
 1819               		.loc 1 66 5 is_stmt 1 view .LVU543
  66:System.cpp    **** 			}
 1820               		.loc 1 66 22 is_stmt 0 view .LVU544
 1821 07e2 6091 0000 		lds r22,System_MidiChannel
 1822 07e6 90E0      		ldi r25,0
 1823 07e8 80E0      		ldi r24,0
 1824 07ea 0E94 0000 		call eeprom_write_byte
 1825               	.LVL79:
 1826               	.L190:
  70:System.cpp    **** 			{
 1827               		.loc 1 70 4 is_stmt 1 view .LVU545
  70:System.cpp    **** 			{
 1828               		.loc 1 70 31 is_stmt 0 view .LVU546
 1829 07ee 0E94 0000 		call _Z23RotaryEncoder_IsPressedv
 1830               	.LVL80:
  70:System.cpp    **** 			{
 1831               		.loc 1 70 4 view .LVU547
 1832 07f2 8823      		tst r24
 1833 07f4 01F0      		breq .L191
  73:System.cpp    **** 				ModeEditPresetLED.Clear();
 1834               		.loc 1 73 5 is_stmt 1 view .LVU548
  73:System.cpp    **** 				ModeEditPresetLED.Clear();
 1835               		.loc 1 73 21 is_stmt 0 view .LVU549
 1836 07f6 80E0      		ldi r24,lo8(ModeRunLED)
 1837 07f8 90E0      		ldi r25,hi8(ModeRunLED)
 1838 07fa 0E94 0000 		call _ZN10MCP_Output5ClearEv
 1839               	.LVL81:
  74:System.cpp    **** 				ModeEditMidiLED.Set();
 1840               		.loc 1 74 5 is_stmt 1 view .LVU550
  74:System.cpp    **** 				ModeEditMidiLED.Set();
 1841               		.loc 1 74 28 is_stmt 0 view .LVU551
 1842 07fe 80E0      		ldi r24,lo8(ModeEditPresetLED)
 1843 0800 90E0      		ldi r25,hi8(ModeEditPresetLED)
 1844 0802 0E94 0000 		call _ZN10MCP_Output5ClearEv
 1845               	.LVL82:
  75:System.cpp    **** 				
 1846               		.loc 1 75 5 is_stmt 1 view .LVU552
  75:System.cpp    **** 				
 1847               		.loc 1 75 24 is_stmt 0 view .LVU553
 1848 0806 80E0      		ldi r24,lo8(ModeEditMidiLED)
 1849 0808 90E0      		ldi r25,hi8(ModeEditMidiLED)
 1850 080a 0E94 0000 		call _ZN10MCP_Output3SetEv
 1851               	.LVL83:
  77:System.cpp    **** 				{
 1852               		.loc 1 77 5 is_stmt 1 view .LVU554
  77:System.cpp    **** 				{
 1853               		.loc 1 77 28 is_stmt 0 view .LVU555
 1854 080e 8091 0000 		lds r24,System_MidiChannel
  77:System.cpp    **** 				{
 1855               		.loc 1 77 5 view .LVU556
 1856 0812 8111      		cpse r24,__zero_reg__
 1857 0814 00C0      		rjmp .L192
  79:System.cpp    **** 				} 
 1858               		.loc 1 79 6 is_stmt 1 view .LVU557
  79:System.cpp    **** 				} 
 1859               		.loc 1 79 22 is_stmt 0 view .LVU558
 1860 0816 E12C      		mov r14,__zero_reg__
 1861 0818 00E0      		ldi r16,0
 1862 081a 20E0      		ldi r18,0
 1863 081c 4EE6      		ldi r20,lo8(110)
 1864 081e 6DE6      		ldi r22,lo8(109)
 1865 0820 8FE6      		ldi r24,lo8(111)
 1866 0822 0E94 0000 		call _Z16SP10281_WriteAllccchhh
 1867               	.LVL84:
 1868               	.L193:
  86:System.cpp    **** 			} 
 1869               		.loc 1 86 5 is_stmt 1 view .LVU559
  86:System.cpp    **** 			} 
 1870               		.loc 1 86 17 is_stmt 0 view .LVU560
 1871 0826 81E0      		ldi r24,lo8(1)
 1872               	.L227:
 352:System.cpp    **** 			
 1873               		.loc 1 352 16 view .LVU561
 1874 0828 8093 0000 		sts SystemState,r24
 1875 082c 00C0      		rjmp .L173
 1876               	.L192:
  83:System.cpp    **** 				}
 1877               		.loc 1 83 6 is_stmt 1 view .LVU562
  83:System.cpp    **** 				}
 1878               		.loc 1 83 25 is_stmt 0 view .LVU563
 1879 082e 8091 0000 		lds r24,System_MidiChannel
 1880 0832 90E0      		ldi r25,0
 1881 0834 0E94 0000 		call _Z19SP10281_WriteNumbers
 1882               	.LVL85:
 1883 0838 00C0      		rjmp .L193
 1884               	.L191:
  90:System.cpp    **** 			}
 1885               		.loc 1 90 5 is_stmt 1 view .LVU564
  90:System.cpp    **** 			}
 1886               		.loc 1 90 17 is_stmt 0 view .LVU565
 1887 083a 82E0      		ldi r24,lo8(2)
 1888 083c 00C0      		rjmp .L227
 1889               	.L188:
  95:System.cpp    **** 			/* If user is selecting new MIDI channel */
 1890               		.loc 1 95 3 is_stmt 1 view .LVU566
  97:System.cpp    **** 			{
 1891               		.loc 1 97 4 view .LVU567
  97:System.cpp    **** 			{
 1892               		.loc 1 97 30 is_stmt 0 view .LVU568
 1893 083e 9091 0000 		lds r25,TempSelectMidiChannel
 1894 0842 8091 0000 		lds r24,LastTempSelectMidiChannel
  97:System.cpp    **** 			{
 1895               		.loc 1 97 4 view .LVU569
 1896 0846 9817      		cp r25,r24
 1897 0848 01F0      		breq .L194
 100:System.cpp    **** 				{
 1898               		.loc 1 100 5 is_stmt 1 view .LVU570
 100:System.cpp    **** 				{
 1899               		.loc 1 100 31 is_stmt 0 view .LVU571
 1900 084a 8091 0000 		lds r24,TempSelectMidiChannel
 100:System.cpp    **** 				{
 1901               		.loc 1 100 5 view .LVU572
 1902 084e 8111      		cpse r24,__zero_reg__
 1903 0850 00C0      		rjmp .L195
 102:System.cpp    **** 				}
 1904               		.loc 1 102 6 is_stmt 1 view .LVU573
 102:System.cpp    **** 				}
 1905               		.loc 1 102 22 is_stmt 0 view .LVU574
 1906 0852 E12C      		mov r14,__zero_reg__
 1907 0854 00E0      		ldi r16,0
 1908 0856 20E0      		ldi r18,0
 1909 0858 4EE6      		ldi r20,lo8(110)
 1910 085a 6DE6      		ldi r22,lo8(109)
 1911 085c 8FE6      		ldi r24,lo8(111)
 1912 085e 0E94 0000 		call _Z16SP10281_WriteAllccchhh
 1913               	.LVL86:
 1914               	.L196:
 110:System.cpp    **** 			}
 1915               		.loc 1 110 5 is_stmt 1 view .LVU575
 110:System.cpp    **** 			}
 1916               		.loc 1 110 29 is_stmt 0 view .LVU576
 1917 0862 81E0      		ldi r24,lo8(1)
 1918 0864 90E0      		ldi r25,0
 1919 0866 9093 0000 		sts System_TempSelectOvfCnt+1,r25
 1920 086a 8093 0000 		sts System_TempSelectOvfCnt,r24
 1921               	.L194:
 113:System.cpp    **** 			
 1922               		.loc 1 113 4 is_stmt 1 view .LVU577
 113:System.cpp    **** 			
 1923               		.loc 1 113 30 is_stmt 0 view .LVU578
 1924 086e 8091 0000 		lds r24,TempSelectMidiChannel
 1925 0872 8093 0000 		sts LastTempSelectMidiChannel,r24
 115:System.cpp    **** 		
 1926               		.loc 1 115 4 is_stmt 1 view .LVU579
 1927               	.L173:
 362:System.cpp    **** 	LastSystemState = SystemState;
 1928               		.loc 1 362 2 view .LVU580
 362:System.cpp    **** 	LastSystemState = SystemState;
 1929               		.loc 1 362 19 is_stmt 0 view .LVU581
 1930 0876 8091 0000 		lds r24,ActivePreset
 1931 087a 8093 0000 		sts LastActivePreset,r24
 363:System.cpp    **** 	LastLoopModePreset = LoopModePreset;
 1932               		.loc 1 363 2 is_stmt 1 view .LVU582
 363:System.cpp    **** 	LastLoopModePreset = LoopModePreset;
 1933               		.loc 1 363 18 is_stmt 0 view .LVU583
 1934 087e 8091 0000 		lds r24,SystemState
 1935 0882 8093 0000 		sts LastSystemState,r24
 364:System.cpp    **** 	LastTempSelectPreset = TempSelectPreset;
 1936               		.loc 1 364 2 is_stmt 1 view .LVU584
 364:System.cpp    **** 	LastTempSelectPreset = TempSelectPreset;
 1937               		.loc 1 364 21 is_stmt 0 view .LVU585
 1938 0886 8091 0000 		lds r24,LoopModePreset
 1939 088a 9091 0000 		lds r25,LoopModePreset+1
 1940 088e A091 0000 		lds r26,LoopModePreset+2
 1941 0892 B091 0000 		lds r27,LoopModePreset+3
 1942 0896 8093 0000 		sts LastLoopModePreset,r24
 1943 089a 9093 0000 		sts LastLoopModePreset+1,r25
 1944 089e A093 0000 		sts LastLoopModePreset+2,r26
 1945 08a2 B093 0000 		sts LastLoopModePreset+3,r27
 365:System.cpp    **** }
 1946               		.loc 1 365 2 is_stmt 1 view .LVU586
 365:System.cpp    **** }
 1947               		.loc 1 365 23 is_stmt 0 view .LVU587
 1948 08a6 8091 0000 		lds r24,TempSelectPreset
 1949 08aa 8093 0000 		sts LastTempSelectPreset,r24
 1950               	/* epilogue start */
 366:System.cpp    **** 
 1951               		.loc 1 366 1 view .LVU588
 1952 08ae 0F91      		pop r16
 1953 08b0 EF90      		pop r14
 1954 08b2 0895      		ret
 1955               	.L195:
 106:System.cpp    **** 				}
 1956               		.loc 1 106 6 is_stmt 1 view .LVU589
 106:System.cpp    **** 				}
 1957               		.loc 1 106 25 is_stmt 0 view .LVU590
 1958 08b4 8091 0000 		lds r24,TempSelectMidiChannel
 1959 08b8 90E0      		ldi r25,0
 1960 08ba 0E94 0000 		call _Z19SP10281_WriteNumbers
 1961               	.LVL87:
 1962 08be 00C0      		rjmp .L196
 1963               	.L187:
 117:System.cpp    **** 			/* Write active preset to 7-segment display */
 1964               		.loc 1 117 3 is_stmt 1 view .LVU591
 119:System.cpp    **** 			
 1965               		.loc 1 119 4 view .LVU592
 119:System.cpp    **** 			
 1966               		.loc 1 119 24 is_stmt 0 view .LVU593
 1967 08c0 8091 0000 		lds r24,ActivePreset
 1968 08c4 90E0      		ldi r25,0
 119:System.cpp    **** 			
 1969               		.loc 1 119 23 view .LVU594
 1970 08c6 0196      		adiw r24,1
 1971 08c8 0E94 0000 		call _Z19SP10281_WriteNumbers
 1972               	.LVL88:
 122:System.cpp    **** 			ModeEditPresetLED.Clear();
 1973               		.loc 1 122 4 is_stmt 1 view .LVU595
 122:System.cpp    **** 			ModeEditPresetLED.Clear();
 1974               		.loc 1 122 18 is_stmt 0 view .LVU596
 1975 08cc 80E0      		ldi r24,lo8(ModeRunLED)
 1976 08ce 90E0      		ldi r25,hi8(ModeRunLED)
 1977 08d0 0E94 0000 		call _ZN10MCP_Output3SetEv
 1978               	.LVL89:
 123:System.cpp    **** 			ModeEditMidiLED.Clear();
 1979               		.loc 1 123 4 is_stmt 1 view .LVU597
 123:System.cpp    **** 			ModeEditMidiLED.Clear();
 1980               		.loc 1 123 27 is_stmt 0 view .LVU598
 1981 08d4 80E0      		ldi r24,lo8(ModeEditPresetLED)
 1982 08d6 90E0      		ldi r25,hi8(ModeEditPresetLED)
 1983 08d8 0E94 0000 		call _ZN10MCP_Output5ClearEv
 1984               	.LVL90:
 124:System.cpp    **** 
 1985               		.loc 1 124 4 is_stmt 1 view .LVU599
 124:System.cpp    **** 
 1986               		.loc 1 124 25 is_stmt 0 view .LVU600
 1987 08dc 80E0      		ldi r24,lo8(ModeEditMidiLED)
 1988 08de 90E0      		ldi r25,hi8(ModeEditMidiLED)
 1989 08e0 0E94 0000 		call _ZN10MCP_Output5ClearEv
 1990               	.LVL91:
 126:System.cpp    **** 			{
 1991               		.loc 1 126 4 is_stmt 1 view .LVU601
 126:System.cpp    **** 			{
 1992               		.loc 1 126 24 is_stmt 0 view .LVU602
 1993 08e4 8091 0000 		lds r24,LastSystemState
 126:System.cpp    **** 			{
 1994               		.loc 1 126 4 view .LVU603
 1995 08e8 8830      		cpi r24,lo8(8)
 1996 08ea 01F4      		brne .L197
 128:System.cpp    **** 			}
 1997               		.loc 1 128 5 is_stmt 1 view .LVU604
 128:System.cpp    **** 			}
 1998               		.loc 1 128 18 is_stmt 0 view .LVU605
 1999 08ec 0E94 0000 		call _Z13Tuner_Disablev
 2000               	.LVL92:
 2001               	.L197:
 132:System.cpp    **** 			{
 2002               		.loc 1 132 4 is_stmt 1 view .LVU606
 132:System.cpp    **** 			{
 2003               		.loc 1 132 22 is_stmt 0 view .LVU607
 2004 08f0 8091 0000 		lds r24,SystemRunMode
 132:System.cpp    **** 			{
 2005               		.loc 1 132 4 view .LVU608
 2006 08f4 8111      		cpse r24,__zero_reg__
 2007 08f6 00C0      		rjmp .L198
 134:System.cpp    **** 			}
 2008               		.loc 1 134 5 is_stmt 1 view .LVU609
 134:System.cpp    **** 			}
 2009               		.loc 1 134 17 is_stmt 0 view .LVU610
 2010 08f8 83E0      		ldi r24,lo8(3)
 2011 08fa 00C0      		rjmp .L227
 2012               	.L198:
 136:System.cpp    **** 			{
 2013               		.loc 1 136 9 is_stmt 1 view .LVU611
 136:System.cpp    **** 			{
 2014               		.loc 1 136 27 is_stmt 0 view .LVU612
 2015 08fc 8091 0000 		lds r24,SystemRunMode
 136:System.cpp    **** 			{
 2016               		.loc 1 136 9 view .LVU613
 2017 0900 8130      		cpi r24,lo8(1)
 2018 0902 01F0      		breq .+2
 2019 0904 00C0      		rjmp .L173
 138:System.cpp    **** 			}
 2020               		.loc 1 138 5 is_stmt 1 view .LVU614
 138:System.cpp    **** 			}
 2021               		.loc 1 138 17 is_stmt 0 view .LVU615
 2022 0906 85E0      		ldi r24,lo8(5)
 2023 0908 00C0      		rjmp .L227
 2024               	.L186:
 143:System.cpp    **** 			/* Update state variables */
 2025               		.loc 1 143 3 is_stmt 1 view .LVU616
 145:System.cpp    **** 			SystemState = RUN_PRESET_CTRL;
 2026               		.loc 1 145 4 view .LVU617
 145:System.cpp    **** 			SystemState = RUN_PRESET_CTRL;
 2027               		.loc 1 145 18 is_stmt 0 view .LVU618
 2028 090a 1092 0000 		sts SystemRunMode,__zero_reg__
 146:System.cpp    **** 			
 2029               		.loc 1 146 4 is_stmt 1 view .LVU619
 146:System.cpp    **** 			
 2030               		.loc 1 146 16 is_stmt 0 view .LVU620
 2031 090e 84E0      		ldi r24,lo8(4)
 2032 0910 8093 0000 		sts SystemState,r24
 149:System.cpp    **** 			
 2033               		.loc 1 149 4 is_stmt 1 view .LVU621
 149:System.cpp    **** 			
 2034               		.loc 1 149 28 is_stmt 0 view .LVU622
 2035 0914 1092 0000 		sts System_TempSelectOvfCnt+1,__zero_reg__
 2036 0918 1092 0000 		sts System_TempSelectOvfCnt,__zero_reg__
 152:System.cpp    **** 			
 2037               		.loc 1 152 4 is_stmt 1 view .LVU623
 152:System.cpp    **** 			
 2038               		.loc 1 152 23 is_stmt 0 view .LVU624
 2039 091c 8091 0000 		lds r24,ActivePreset
 152:System.cpp    **** 			
 2040               		.loc 1 152 50 view .LVU625
 2041 0920 91E0      		ldi r25,lo8(1)
 2042 0922 8927      		eor r24,r25
 152:System.cpp    **** 			
 2043               		.loc 1 152 21 view .LVU626
 2044 0924 8093 0000 		sts LastActivePreset,r24
 2045               	.L185:
 154:System.cpp    **** 			/* If active preset has changed since last cycle then update system */
 2046               		.loc 1 154 3 is_stmt 1 view .LVU627
 156:System.cpp    **** 			{
 2047               		.loc 1 156 4 view .LVU628
 156:System.cpp    **** 			{
 2048               		.loc 1 156 21 is_stmt 0 view .LVU629
 2049 0928 9091 0000 		lds r25,ActivePreset
 2050 092c 8091 0000 		lds r24,LastActivePreset
 156:System.cpp    **** 			{
 2051               		.loc 1 156 4 view .LVU630
 2052 0930 9813      		cpse r25,r24
 158:System.cpp    **** 			}
 2053               		.loc 1 158 5 is_stmt 1 view .LVU631
 158:System.cpp    **** 			}
 2054               		.loc 1 158 24 is_stmt 0 view .LVU632
 2055 0932 0E94 0000 		call _Z19System_ChangePresetv
 2056               	.LVL93:
 162:System.cpp    **** 			{
 2057               		.loc 1 162 4 is_stmt 1 view .LVU633
 2058               	.L203:
 196:System.cpp    **** 			{
 2059               		.loc 1 196 4 view .LVU634
 196:System.cpp    **** 			{
 2060               		.loc 1 196 25 is_stmt 0 view .LVU635
 2061 0936 9091 0000 		lds r25,TempSelectPreset
 2062 093a 8091 0000 		lds r24,LastTempSelectPreset
 196:System.cpp    **** 			{
 2063               		.loc 1 196 4 view .LVU636
 2064 093e 9817      		cp r25,r24
 2065 0940 01F4      		brne .+2
 2066 0942 00C0      		rjmp .L173
 199:System.cpp    **** 							
 2067               		.loc 1 199 5 is_stmt 1 view .LVU637
 199:System.cpp    **** 							
 2068               		.loc 1 199 25 is_stmt 0 view .LVU638
 2069 0944 8091 0000 		lds r24,TempSelectPreset
 2070 0948 90E0      		ldi r25,0
 199:System.cpp    **** 							
 2071               		.loc 1 199 24 view .LVU639
 2072 094a 0196      		adiw r24,1
 2073 094c 0E94 0000 		call _Z19SP10281_WriteNumbers
 2074               	.LVL94:
 202:System.cpp    **** 				System_UpdateUI_LEDs();
 2075               		.loc 1 202 5 is_stmt 1 view .LVU640
 202:System.cpp    **** 				System_UpdateUI_LEDs();
 2076               		.loc 1 202 34 is_stmt 0 view .LVU641
 2077 0950 E091 0000 		lds r30,TempSelectPreset
 202:System.cpp    **** 				System_UpdateUI_LEDs();
 2078               		.loc 1 202 20 view .LVU642
 2079 0954 84E0      		ldi r24,lo8(4)
 2080 0956 E89F      		mul r30,r24
 2081 0958 F001      		movw r30,r0
 2082 095a 1124      		clr __zero_reg__
 2083 095c E050      		subi r30,lo8(-(PresetTable))
 2084 095e F040      		sbci r31,hi8(-(PresetTable))
 2085 0960 8081      		ld r24,Z
 2086 0962 9181      		ldd r25,Z+1
 2087 0964 A281      		ldd r26,Z+2
 2088 0966 B381      		ldd r27,Z+3
 2089 0968 8093 0000 		sts LoopModePreset,r24
 2090 096c 9093 0000 		sts LoopModePreset+1,r25
 2091 0970 A093 0000 		sts LoopModePreset+2,r26
 2092 0974 B093 0000 		sts LoopModePreset+3,r27
 203:System.cpp    **** 			}
 2093               		.loc 1 203 5 is_stmt 1 view .LVU643
 203:System.cpp    **** 			}
 2094               		.loc 1 203 25 is_stmt 0 view .LVU644
 2095 0978 0E94 0000 		call _Z20System_UpdateUI_LEDsv
 2096               	.LVL95:
 2097 097c 00C0      		rjmp .L173
 2098               	.L184:
 174:System.cpp    **** 			/* Update 7-segment display */
 2099               		.loc 1 174 3 is_stmt 1 view .LVU645
 176:System.cpp    **** 			
 2100               		.loc 1 176 4 view .LVU646
 176:System.cpp    **** 			
 2101               		.loc 1 176 20 is_stmt 0 view .LVU647
 2102 097e E12C      		mov r14,__zero_reg__
 2103 0980 00E0      		ldi r16,0
 2104 0982 20E0      		ldi r18,0
 2105 0984 43E4      		ldi r20,lo8(67)
 2106 0986 6CE4      		ldi r22,lo8(76)
 2107 0988 8DE4      		ldi r24,lo8(77)
 2108 098a 0E94 0000 		call _Z16SP10281_WriteAllccchhh
 2109               	.LVL96:
 179:System.cpp    **** 			SystemState = RUN_LOOP_CTRL;
 2110               		.loc 1 179 4 is_stmt 1 view .LVU648
 179:System.cpp    **** 			SystemState = RUN_LOOP_CTRL;
 2111               		.loc 1 179 18 is_stmt 0 view .LVU649
 2112 098e 91E0      		ldi r25,lo8(1)
 2113 0990 9093 0000 		sts SystemRunMode,r25
 180:System.cpp    **** 			
 2114               		.loc 1 180 4 is_stmt 1 view .LVU650
 180:System.cpp    **** 			
 2115               		.loc 1 180 16 is_stmt 0 view .LVU651
 2116 0994 86E0      		ldi r24,lo8(6)
 2117 0996 8093 0000 		sts SystemState,r24
 183:System.cpp    **** 			
 2118               		.loc 1 183 4 is_stmt 1 view .LVU652
 183:System.cpp    **** 			
 2119               		.loc 1 183 28 is_stmt 0 view .LVU653
 2120 099a 1092 0000 		sts System_TempSelectOvfCnt+1,__zero_reg__
 2121 099e 1092 0000 		sts System_TempSelectOvfCnt,__zero_reg__
 186:System.cpp    **** 			
 2122               		.loc 1 186 4 is_stmt 1 view .LVU654
 186:System.cpp    **** 			
 2123               		.loc 1 186 66 is_stmt 0 view .LVU655
 2124 09a2 8091 0000 		lds r24,LoopModePreset
 2125 09a6 8927      		eor r24,r25
 186:System.cpp    **** 			
 2126               		.loc 1 186 36 view .LVU656
 2127 09a8 8093 0000 		sts LastLoopModePreset,r24
 2128               	.L183:
 188:System.cpp    **** 			/* If active loops or ctrl switches has changed since last cycle */
 2129               		.loc 1 188 3 is_stmt 1 view .LVU657
 190:System.cpp    **** 			{
 2130               		.loc 1 190 4 view .LVU658
 2131               	.LVL97:
 2132               	.LBB26:
 2133               	.LBI26:
 2134               		.file 2 "System.h"
   1:System.h      **** /*
   2:System.h      ****  * System.h
   3:System.h      ****  *
   4:System.h      ****  * Created: 03-02-2020 20:56:21
   5:System.h      ****  *  Author: Esben
   6:System.h      ****  */ 
   7:System.h      **** 
   8:System.h      **** #ifndef SYSTEM_H_
   9:System.h      **** #define SYSTEM_H_
  10:System.h      **** 
  11:System.h      **** /* Includes */
  12:System.h      **** #include "PedalCom.h"
  13:System.h      **** #include "MIDI.h"
  14:System.h      **** 
  15:System.h      **** /* Defines */
  16:System.h      **** #define SYSTEM_TEMP_SELECT_TIMEOUT	1500	// 1500*2ms = 3 seconds
  17:System.h      **** #define SYSTEM_MARK_SELECTION_TIMEOUT	150	// 150*2ms = 300ms
  18:System.h      **** 
  19:System.h      **** #define EEPROM_MIDI_CH_ADDR			  0
  20:System.h      **** #define EEPROM_PRESETS_BASE_ADDR	100
  21:System.h      **** 
  22:System.h      **** #define NUMBER_OF_PRESETS			8
  23:System.h      **** #define NUMBER_OF_LOOPS				8
  24:System.h      **** #define NUMBER_OF_CTRL_SWITCHES		4
  25:System.h      **** 
  26:System.h      **** /* Enumerations */
  27:System.h      **** typedef enum System_State
  28:System.h      **** {
  29:System.h      **** 	BOOT_UP = 0,
  30:System.h      **** 	EDIT_MIDI_CHANNEL,
  31:System.h      **** 	INITIALIZE_SYSTEM,
  32:System.h      **** 	ENTER_RUN_PRESET_CTRL,
  33:System.h      **** 	RUN_PRESET_CTRL,
  34:System.h      **** 	ENTER_RUN_LOOP_CTRL,
  35:System.h      **** 	RUN_LOOP_CTRL,
  36:System.h      **** 	ENTER_TUNER,
  37:System.h      **** 	TUNER,
  38:System.h      **** 	ENTER_EDIT_UI_MODE,
  39:System.h      **** 	EDIT_UI_MODE,
  40:System.h      **** 	ENTER_EDIT_PRESET,
  41:System.h      **** 	EDIT_PRESET,
  42:System.h      **** 	ENTER_EDIT_MIDI_IN_OUT,
  43:System.h      **** 	EDIT_MIDI_IN_OUT,
  44:System.h      **** 	ENTER_EDIT_MIDI_PC,
  45:System.h      **** 	EDIT_MIDI_PC
  46:System.h      **** } System_State;
  47:System.h      **** 
  48:System.h      **** typedef enum System_UI_Mode
  49:System.h      **** {
  50:System.h      **** 	MODE_RUN			= 0,
  51:System.h      **** 	MODE_EDIT_PRESET	= 1,
  52:System.h      **** 	MODE_EDIT_MIDI		= 2
  53:System.h      **** } System_UI_Mode;
  54:System.h      **** 
  55:System.h      **** typedef enum System_RunMode
  56:System.h      **** {
  57:System.h      **** 	RUN_PRESET_MODE,
  58:System.h      **** 	RUN_LOOP_MODE
  59:System.h      **** } System_RunMode;
  60:System.h      **** 
  61:System.h      **** typedef enum System_SetMidiEdit
  62:System.h      **** {
  63:System.h      **** 	MIDI_IN,
  64:System.h      **** 	MIDI_OUT
  65:System.h      **** } System_SetMidiEdit;
  66:System.h      **** 
  67:System.h      **** typedef enum System_Preset
  68:System.h      **** {
  69:System.h      **** 	PRESET_1 = 0,
  70:System.h      **** 	PRESET_2 = 1,
  71:System.h      **** 	PRESET_3 = 2,
  72:System.h      **** 	PRESET_4 = 3,
  73:System.h      **** 	PRESET_5 = 4,
  74:System.h      **** 	PRESET_6 = 5,
  75:System.h      **** 	PRESET_7 = 6,
  76:System.h      **** 	PRESET_8 = 7
  77:System.h      **** } System_Preset;
  78:System.h      **** 
  79:System.h      **** /* Structures */
  80:System.h      **** typedef struct Preset
  81:System.h      **** {
  82:System.h      **** 	uint8_t Active_Loops;
  83:System.h      **** 	uint8_t Active_CtrlSwitches;
  84:System.h      **** 	uint8_t MIDI_PC_In;
  85:System.h      **** 	uint8_t MIDI_PC_Out;
  86:System.h      **** } Preset;
  87:System.h      **** 
  88:System.h      **** inline bool operator==(const Preset& lhs, const Preset& rhs)
  89:System.h      **** {
  90:System.h      **** 	return	(	lhs.Active_Loops == rhs.Active_Loops
  91:System.h      **** 			&&	lhs.Active_CtrlSwitches == rhs.Active_CtrlSwitches
  92:System.h      **** 			&&	lhs.MIDI_PC_In == rhs.MIDI_PC_In
  93:System.h      **** 			&&	lhs.MIDI_PC_Out == rhs.MIDI_PC_Out);
  94:System.h      **** }
  95:System.h      **** 
  96:System.h      **** inline bool operator!=(const Preset& lhs, const Preset& rhs)
 2135               		.loc 2 96 13 view .LVU659
 2136               	.LBB27:
  97:System.h      **** {
  98:System.h      **** 	return	(	lhs.Active_Loops != rhs.Active_Loops
 2137               		.loc 2 98 2 view .LVU660
  99:System.h      **** 			||	lhs.Active_CtrlSwitches != rhs.Active_CtrlSwitches
 100:System.h      **** 			||	lhs.MIDI_PC_In != rhs.MIDI_PC_In
 101:System.h      **** 			||	lhs.MIDI_PC_Out != rhs.MIDI_PC_Out);
 2138               		.loc 2 101 4 is_stmt 0 view .LVU661
 2139 09ac 9091 0000 		lds r25,LoopModePreset
 2140 09b0 8091 0000 		lds r24,LastLoopModePreset
 2141 09b4 9813      		cpse r25,r24
 2142 09b6 00C0      		rjmp .L202
  99:System.h      **** 			||	lhs.Active_CtrlSwitches != rhs.Active_CtrlSwitches
 2143               		.loc 2 99 4 view .LVU662
 2144 09b8 9091 0000 		lds r25,LoopModePreset+1
 2145 09bc 8091 0000 		lds r24,LastLoopModePreset+1
 2146 09c0 9813      		cpse r25,r24
 2147 09c2 00C0      		rjmp .L202
 2148               	.LVL98:
 2149               	.LBB28:
 2150               	.LBI28:
  96:System.h      **** {
 2151               		.loc 2 96 13 is_stmt 1 view .LVU663
 2152               	.LBB29:
 100:System.h      **** 			||	lhs.MIDI_PC_Out != rhs.MIDI_PC_Out);
 2153               		.loc 2 100 4 is_stmt 0 view .LVU664
 2154 09c4 9091 0000 		lds r25,LoopModePreset+2
 2155 09c8 8091 0000 		lds r24,LastLoopModePreset+2
 2156 09cc 9813      		cpse r25,r24
 2157 09ce 00C0      		rjmp .L202
 2158               		.loc 2 101 4 view .LVU665
 2159 09d0 9091 0000 		lds r25,LoopModePreset+3
 2160 09d4 8091 0000 		lds r24,LastLoopModePreset+3
 2161 09d8 9817      		cp r25,r24
 2162 09da 01F4      		brne .+2
 2163 09dc 00C0      		rjmp .L203
 2164               	.LVL99:
 2165               	.L202:
 2166               		.loc 2 101 4 view .LVU666
 2167               	.LBE29:
 2168               	.LBE28:
 2169               	.LBE27:
 2170               	.LBE26:
 192:System.cpp    **** 			}
 2171               		.loc 1 192 5 is_stmt 1 view .LVU667
 192:System.cpp    **** 			}
 2172               		.loc 1 192 26 is_stmt 0 view .LVU668
 2173 09de 0E94 0000 		call _Z21System_UpdateLoopCtrlv
 2174               	.LVL100:
 2175 09e2 00C0      		rjmp .L203
 2176               	.L182:
 208:System.cpp    **** 			/* Activate tuner function */
 2177               		.loc 1 208 3 is_stmt 1 view .LVU669
 210:System.cpp    **** 
 2178               		.loc 1 210 4 view .LVU670
 210:System.cpp    **** 
 2179               		.loc 1 210 16 is_stmt 0 view .LVU671
 2180 09e4 0E94 0000 		call _Z12Tuner_Enablev
 2181               	.LVL101:
 213:System.cpp    **** 			
 2182               		.loc 1 213 4 is_stmt 1 view .LVU672
 213:System.cpp    **** 			
 2183               		.loc 1 213 20 is_stmt 0 view .LVU673
 2184 09e8 E12C      		mov r14,__zero_reg__
 2185 09ea 00E0      		ldi r16,0
 2186 09ec 20E0      		ldi r18,0
 2187 09ee 4EE6      		ldi r20,lo8(110)
 2188 09f0 65E7      		ldi r22,lo8(117)
 2189 09f2 84E7      		ldi r24,lo8(116)
 2190 09f4 0E94 0000 		call _Z16SP10281_WriteAllccchhh
 2191               	.LVL102:
 215:System.cpp    **** 
 2192               		.loc 1 215 4 is_stmt 1 view .LVU674
 215:System.cpp    **** 
 2193               		.loc 1 215 16 is_stmt 0 view .LVU675
 2194 09f8 88E0      		ldi r24,lo8(8)
 2195 09fa 8093 0000 		sts SystemState,r24
 2196               	.L181:
 217:System.cpp    **** 			/* Analyze InputCapture data if new counts are available */
 2197               		.loc 1 217 3 is_stmt 1 view .LVU676
 219:System.cpp    **** 			{
 2198               		.loc 1 219 4 view .LVU677
 219:System.cpp    **** 			{
 2199               		.loc 1 219 30 is_stmt 0 view .LVU678
 2200 09fe 0E94 0000 		call _Z22InputCapture_Availablev
 2201               	.LVL103:
 219:System.cpp    **** 			{
 2202               		.loc 1 219 4 view .LVU679
 2203 0a02 8823      		tst r24
 2204 0a04 01F0      		breq .L204
 221:System.cpp    **** 				Tuner_DetectFrequency();
 2205               		.loc 1 221 5 is_stmt 1 view .LVU680
 221:System.cpp    **** 				Tuner_DetectFrequency();
 2206               		.loc 1 221 22 is_stmt 0 view .LVU681
 2207 0a06 0E94 0000 		call _Z17Tuner_FetchCountsv
 2208               	.LVL104:
 222:System.cpp    **** 			}
 2209               		.loc 1 222 5 is_stmt 1 view .LVU682
 222:System.cpp    **** 			}
 2210               		.loc 1 222 26 is_stmt 0 view .LVU683
 2211 0a0a 0E94 0000 		call _Z21Tuner_DetectFrequencyv
 2212               	.LVL105:
 2213               	.L204:
 225:System.cpp    **** 			{
 2214               		.loc 1 225 4 is_stmt 1 view .LVU684
 225:System.cpp    **** 			{
 2215               		.loc 1 225 8 is_stmt 0 view .LVU685
 2216 0a0e 8091 0000 		lds r24,Tuner_TransmitTimerFlag
 225:System.cpp    **** 			{
 2217               		.loc 1 225 4 view .LVU686
 2218 0a12 8823      		tst r24
 2219 0a14 01F4      		brne .+2
 2220 0a16 00C0      		rjmp .L173
 227:System.cpp    **** 
 2221               		.loc 1 227 5 is_stmt 1 view .LVU687
 227:System.cpp    **** 
 2222               		.loc 1 227 29 is_stmt 0 view .LVU688
 2223 0a18 1092 0000 		sts Tuner_TransmitTimerFlag,__zero_reg__
 229:System.cpp    **** 				PedalCom_QueueCommand(UpdateTunerLEDs, 2, (uint8_t*)&Tuner_LED_Data);
 2224               		.loc 1 229 5 is_stmt 1 view .LVU689
 229:System.cpp    **** 				PedalCom_QueueCommand(UpdateTunerLEDs, 2, (uint8_t*)&Tuner_LED_Data);
 2225               		.loc 1 229 30 is_stmt 0 view .LVU690
 2226 0a1c 0E94 0000 		call _Z25Tuner_GenerateDisplayDatav
 2227               	.LVL106:
 230:System.cpp    **** 				PedalCom_QueueCommand(Update7segments, 4, (uint8_t*)&Tuner_7seg_Data);
 2228               		.loc 1 230 5 is_stmt 1 view .LVU691
 230:System.cpp    **** 				PedalCom_QueueCommand(Update7segments, 4, (uint8_t*)&Tuner_7seg_Data);
 2229               		.loc 1 230 26 is_stmt 0 view .LVU692
 2230 0a20 40E0      		ldi r20,lo8(Tuner_LED_Data)
 2231 0a22 50E0      		ldi r21,hi8(Tuner_LED_Data)
 2232 0a24 62E0      		ldi r22,lo8(2)
 2233 0a26 83ED      		ldi r24,lo8(-45)
 2234 0a28 0E94 0000 		call _Z21PedalCom_QueueCommand3CMDhPh
 2235               	.LVL107:
 231:System.cpp    **** 			}
 2236               		.loc 1 231 5 is_stmt 1 view .LVU693
 231:System.cpp    **** 			}
 2237               		.loc 1 231 26 is_stmt 0 view .LVU694
 2238 0a2c 40E0      		ldi r20,lo8(Tuner_7seg_Data)
 2239 0a2e 50E0      		ldi r21,hi8(Tuner_7seg_Data)
 2240 0a30 64E0      		ldi r22,lo8(4)
 2241 0a32 87ED      		ldi r24,lo8(-41)
 2242 0a34 0E94 0000 		call _Z21PedalCom_QueueCommand3CMDhPh
 2243               	.LVL108:
 2244 0a38 00C0      		rjmp .L173
 2245               	.L180:
 236:System.cpp    **** 			/* Change LastSystemUIMode to force update */
 2246               		.loc 1 236 3 is_stmt 1 view .LVU695
 238:System.cpp    **** 			
 2247               		.loc 1 238 4 view .LVU696
 238:System.cpp    **** 			
 2248               		.loc 1 238 23 is_stmt 0 view .LVU697
 2249 0a3a 8091 0000 		lds r24,SystemUIMode
 238:System.cpp    **** 			
 2250               		.loc 1 238 51 view .LVU698
 2251 0a3e 91E0      		ldi r25,lo8(1)
 2252 0a40 8927      		eor r24,r25
 238:System.cpp    **** 			
 2253               		.loc 1 238 21 view .LVU699
 2254 0a42 8093 0000 		sts LastSystemUIMode,r24
 240:System.cpp    **** 			
 2255               		.loc 1 240 4 is_stmt 1 view .LVU700
 240:System.cpp    **** 			
 2256               		.loc 1 240 23 is_stmt 0 view .LVU701
 2257 0a46 0E94 0000 		call _Z19System_ChangePresetv
 2258               	.LVL109:
 242:System.cpp    **** 			
 2259               		.loc 1 242 4 is_stmt 1 view .LVU702
 242:System.cpp    **** 			
 2260               		.loc 1 242 16 is_stmt 0 view .LVU703
 2261 0a4a 8AE0      		ldi r24,lo8(10)
 2262 0a4c 8093 0000 		sts SystemState,r24
 2263               	.L179:
 244:System.cpp    **** 			/* If user is changing the UI mode then update mode LEDs*/
 2264               		.loc 1 244 3 is_stmt 1 view .LVU704
 246:System.cpp    **** 			{
 2265               		.loc 1 246 4 view .LVU705
 246:System.cpp    **** 			{
 2266               		.loc 1 246 21 is_stmt 0 view .LVU706
 2267 0a50 9091 0000 		lds r25,SystemUIMode
 2268 0a54 8091 0000 		lds r24,LastSystemUIMode
 246:System.cpp    **** 			{
 2269               		.loc 1 246 4 view .LVU707
 2270 0a58 9817      		cp r25,r24
 2271 0a5a 01F0      		breq .L205
 248:System.cpp    **** 				{
 2272               		.loc 1 248 5 is_stmt 1 view .LVU708
 248:System.cpp    **** 				{
 2273               		.loc 1 248 22 is_stmt 0 view .LVU709
 2274 0a5c 8091 0000 		lds r24,SystemUIMode
 248:System.cpp    **** 				{
 2275               		.loc 1 248 5 view .LVU710
 2276 0a60 8111      		cpse r24,__zero_reg__
 2277 0a62 00C0      		rjmp .L206
 250:System.cpp    **** 					ModeEditPresetLED.Clear();
 2278               		.loc 1 250 6 is_stmt 1 view .LVU711
 250:System.cpp    **** 					ModeEditPresetLED.Clear();
 2279               		.loc 1 250 27 is_stmt 0 view .LVU712
 2280 0a64 80E0      		ldi r24,lo8(ModeRunLED)
 2281 0a66 90E0      		ldi r25,hi8(ModeRunLED)
 2282 0a68 0E94 0000 		call _ZN10MCP_Output10AutoToggleEv
 2283               	.LVL110:
 251:System.cpp    **** 					ModeEditMidiLED.Clear();
 2284               		.loc 1 251 6 is_stmt 1 view .LVU713
 251:System.cpp    **** 					ModeEditMidiLED.Clear();
 2285               		.loc 1 251 29 is_stmt 0 view .LVU714
 2286 0a6c 80E0      		ldi r24,lo8(ModeEditPresetLED)
 2287 0a6e 90E0      		ldi r25,hi8(ModeEditPresetLED)
 2288 0a70 0E94 0000 		call _ZN10MCP_Output5ClearEv
 2289               	.LVL111:
 252:System.cpp    **** 				}
 2290               		.loc 1 252 6 is_stmt 1 view .LVU715
 2291               	.L223:
 258:System.cpp    **** 				}
 2292               		.loc 1 258 6 view .LVU716
 258:System.cpp    **** 				}
 2293               		.loc 1 258 27 is_stmt 0 view .LVU717
 2294 0a74 80E0      		ldi r24,lo8(ModeEditMidiLED)
 2295 0a76 90E0      		ldi r25,hi8(ModeEditMidiLED)
 2296 0a78 0E94 0000 		call _ZN10MCP_Output5ClearEv
 2297               	.LVL112:
 2298               	.L205:
 268:System.cpp    **** 			
 2299               		.loc 1 268 4 is_stmt 1 view .LVU718
 268:System.cpp    **** 			
 2300               		.loc 1 268 21 is_stmt 0 view .LVU719
 2301 0a7c 8091 0000 		lds r24,SystemUIMode
 2302 0a80 8093 0000 		sts LastSystemUIMode,r24
 270:System.cpp    **** 		
 2303               		.loc 1 270 4 is_stmt 1 view .LVU720
 2304 0a84 00C0      		rjmp .L173
 2305               	.L206:
 254:System.cpp    **** 				{
 2306               		.loc 1 254 10 view .LVU721
 254:System.cpp    **** 				{
 2307               		.loc 1 254 27 is_stmt 0 view .LVU722
 2308 0a86 8091 0000 		lds r24,SystemUIMode
 254:System.cpp    **** 				{
 2309               		.loc 1 254 10 view .LVU723
 2310 0a8a 8130      		cpi r24,lo8(1)
 2311 0a8c 01F4      		brne .L207
 256:System.cpp    **** 					ModeEditPresetLED.AutoToggle();
 2312               		.loc 1 256 6 is_stmt 1 view .LVU724
 256:System.cpp    **** 					ModeEditPresetLED.AutoToggle();
 2313               		.loc 1 256 22 is_stmt 0 view .LVU725
 2314 0a8e 80E0      		ldi r24,lo8(ModeRunLED)
 2315 0a90 90E0      		ldi r25,hi8(ModeRunLED)
 2316 0a92 0E94 0000 		call _ZN10MCP_Output5ClearEv
 2317               	.LVL113:
 257:System.cpp    **** 					ModeEditMidiLED.Clear();
 2318               		.loc 1 257 6 is_stmt 1 view .LVU726
 257:System.cpp    **** 					ModeEditMidiLED.Clear();
 2319               		.loc 1 257 34 is_stmt 0 view .LVU727
 2320 0a96 80E0      		ldi r24,lo8(ModeEditPresetLED)
 2321 0a98 90E0      		ldi r25,hi8(ModeEditPresetLED)
 2322 0a9a 0E94 0000 		call _ZN10MCP_Output10AutoToggleEv
 2323               	.LVL114:
 2324 0a9e 00C0      		rjmp .L223
 2325               	.L207:
 260:System.cpp    **** 				{
 2326               		.loc 1 260 10 is_stmt 1 view .LVU728
 260:System.cpp    **** 				{
 2327               		.loc 1 260 27 is_stmt 0 view .LVU729
 2328 0aa0 8091 0000 		lds r24,SystemUIMode
 260:System.cpp    **** 				{
 2329               		.loc 1 260 10 view .LVU730
 2330 0aa4 8230      		cpi r24,lo8(2)
 2331 0aa6 01F4      		brne .L205
 262:System.cpp    **** 					ModeEditPresetLED.Clear();
 2332               		.loc 1 262 6 is_stmt 1 view .LVU731
 262:System.cpp    **** 					ModeEditPresetLED.Clear();
 2333               		.loc 1 262 22 is_stmt 0 view .LVU732
 2334 0aa8 80E0      		ldi r24,lo8(ModeRunLED)
 2335 0aaa 90E0      		ldi r25,hi8(ModeRunLED)
 2336 0aac 0E94 0000 		call _ZN10MCP_Output5ClearEv
 2337               	.LVL115:
 263:System.cpp    **** 					ModeEditMidiLED.AutoToggle();
 2338               		.loc 1 263 6 is_stmt 1 view .LVU733
 263:System.cpp    **** 					ModeEditMidiLED.AutoToggle();
 2339               		.loc 1 263 29 is_stmt 0 view .LVU734
 2340 0ab0 80E0      		ldi r24,lo8(ModeEditPresetLED)
 2341 0ab2 90E0      		ldi r25,hi8(ModeEditPresetLED)
 2342 0ab4 0E94 0000 		call _ZN10MCP_Output5ClearEv
 2343               	.LVL116:
 264:System.cpp    **** 				}
 2344               		.loc 1 264 6 is_stmt 1 view .LVU735
 264:System.cpp    **** 				}
 2345               		.loc 1 264 32 is_stmt 0 view .LVU736
 2346 0ab8 80E0      		ldi r24,lo8(ModeEditMidiLED)
 2347 0aba 90E0      		ldi r25,hi8(ModeEditMidiLED)
 2348 0abc 0E94 0000 		call _ZN10MCP_Output10AutoToggleEv
 2349               	.LVL117:
 2350 0ac0 00C0      		rjmp .L205
 2351               	.L178:
 272:System.cpp    **** 			/* Disable Auto toggle */
 2352               		.loc 1 272 3 is_stmt 1 view .LVU737
 274:System.cpp    **** 			ModeEditPresetLED.Set();
 2353               		.loc 1 274 4 view .LVU738
 274:System.cpp    **** 			ModeEditPresetLED.Set();
 2354               		.loc 1 274 20 is_stmt 0 view .LVU739
 2355 0ac2 80E0      		ldi r24,lo8(ModeRunLED)
 2356 0ac4 90E0      		ldi r25,hi8(ModeRunLED)
 2357 0ac6 0E94 0000 		call _ZN10MCP_Output5ClearEv
 2358               	.LVL118:
 275:System.cpp    **** 			ModeEditMidiLED.Clear();
 2359               		.loc 1 275 4 is_stmt 1 view .LVU740
 275:System.cpp    **** 			ModeEditMidiLED.Clear();
 2360               		.loc 1 275 25 is_stmt 0 view .LVU741
 2361 0aca 80E0      		ldi r24,lo8(ModeEditPresetLED)
 2362 0acc 90E0      		ldi r25,hi8(ModeEditPresetLED)
 2363 0ace 0E94 0000 		call _ZN10MCP_Output3SetEv
 2364               	.LVL119:
 276:System.cpp    **** 			
 2365               		.loc 1 276 4 is_stmt 1 view .LVU742
 276:System.cpp    **** 			
 2366               		.loc 1 276 25 is_stmt 0 view .LVU743
 2367 0ad2 80E0      		ldi r24,lo8(ModeEditMidiLED)
 2368 0ad4 90E0      		ldi r25,hi8(ModeEditMidiLED)
 2369 0ad6 0E94 0000 		call _ZN10MCP_Output5ClearEv
 2370               	.LVL120:
 278:System.cpp    **** 			
 2371               		.loc 1 278 4 is_stmt 1 view .LVU744
 278:System.cpp    **** 			
 2372               		.loc 1 278 33 is_stmt 0 view .LVU745
 2373 0ada E091 0000 		lds r30,ActivePreset
 278:System.cpp    **** 			
 2374               		.loc 1 278 19 view .LVU746
 2375 0ade 84E0      		ldi r24,lo8(4)
 2376 0ae0 E89F      		mul r30,r24
 2377 0ae2 F001      		movw r30,r0
 2378 0ae4 1124      		clr __zero_reg__
 2379 0ae6 E050      		subi r30,lo8(-(PresetTable))
 2380 0ae8 F040      		sbci r31,hi8(-(PresetTable))
 2381 0aea 8081      		ld r24,Z
 2382 0aec 9181      		ldd r25,Z+1
 2383 0aee A281      		ldd r26,Z+2
 2384 0af0 B381      		ldd r27,Z+3
 2385 0af2 8093 0000 		sts LoopModePreset,r24
 2386 0af6 9093 0000 		sts LoopModePreset+1,r25
 2387 0afa A093 0000 		sts LoopModePreset+2,r26
 2388 0afe B093 0000 		sts LoopModePreset+3,r27
 280:System.cpp    **** 			LastUserEditSelection = 1;
 2389               		.loc 1 280 4 is_stmt 1 view .LVU747
 280:System.cpp    **** 			LastUserEditSelection = 1;
 2390               		.loc 1 280 22 is_stmt 0 view .LVU748
 2391 0b02 1092 0000 		sts UserEditSelection,__zero_reg__
 281:System.cpp    **** 			
 2392               		.loc 1 281 4 is_stmt 1 view .LVU749
 281:System.cpp    **** 			
 2393               		.loc 1 281 26 is_stmt 0 view .LVU750
 2394 0b06 81E0      		ldi r24,lo8(1)
 2395 0b08 8093 0000 		sts LastUserEditSelection,r24
 283:System.cpp    **** 			
 2396               		.loc 1 283 4 is_stmt 1 view .LVU751
 283:System.cpp    **** 			
 2397               		.loc 1 283 16 is_stmt 0 view .LVU752
 2398 0b0c 8CE0      		ldi r24,lo8(12)
 2399 0b0e 8093 0000 		sts SystemState,r24
 2400               	.L177:
 285:System.cpp    **** 			/* If user is selecting */
 2401               		.loc 1 285 3 is_stmt 1 view .LVU753
 287:System.cpp    **** 			{
 2402               		.loc 1 287 4 view .LVU754
 287:System.cpp    **** 			{
 2403               		.loc 1 287 26 is_stmt 0 view .LVU755
 2404 0b12 9091 0000 		lds r25,UserEditSelection
 2405 0b16 8091 0000 		lds r24,LastUserEditSelection
 287:System.cpp    **** 			{
 2406               		.loc 1 287 4 view .LVU756
 2407 0b1a 9817      		cp r25,r24
 2408 0b1c 01F0      		breq .L208
 290:System.cpp    **** 				{
 2409               		.loc 1 290 5 is_stmt 1 view .LVU757
 290:System.cpp    **** 				{
 2410               		.loc 1 290 27 is_stmt 0 view .LVU758
 2411 0b1e 8091 0000 		lds r24,UserEditSelection
 290:System.cpp    **** 				{
 2412               		.loc 1 290 5 view .LVU759
 2413 0b22 8830      		cpi r24,lo8(8)
 2414 0b24 00F4      		brsh .L209
 292:System.cpp    **** 					MCP23017_WriteReg(MCP23017_UI_LEDS_ADDR, OLATB, (1 << UI_MODE_PRESET_LED_PIN));
 2415               		.loc 1 292 6 is_stmt 1 view .LVU760
 292:System.cpp    **** 					MCP23017_WriteReg(MCP23017_UI_LEDS_ADDR, OLATB, (1 << UI_MODE_PRESET_LED_PIN));
 2416               		.loc 1 292 60 is_stmt 0 view .LVU761
 2417 0b26 8091 0000 		lds r24,UserEditSelection
 292:System.cpp    **** 					MCP23017_WriteReg(MCP23017_UI_LEDS_ADDR, OLATB, (1 << UI_MODE_PRESET_LED_PIN));
 2418               		.loc 1 292 57 view .LVU762
 2419 0b2a 41E0      		ldi r20,lo8(1)
 2420 0b2c 50E0      		ldi r21,0
 2421 0b2e 00C0      		rjmp 2f
 2422               		1:
 2423 0b30 440F      		lsl r20
 2424               		2:
 2425 0b32 8A95      		dec r24
 2426 0b34 02F4      		brpl 1b
 292:System.cpp    **** 					MCP23017_WriteReg(MCP23017_UI_LEDS_ADDR, OLATB, (1 << UI_MODE_PRESET_LED_PIN));
 2427               		.loc 1 292 23 view .LVU763
 2428 0b36 64E1      		ldi r22,lo8(20)
 2429 0b38 80E0      		ldi r24,0
 2430 0b3a 0E94 0000 		call _Z17MCP23017_WriteReghhh
 2431               	.LVL121:
 293:System.cpp    **** 				}
 2432               		.loc 1 293 6 is_stmt 1 view .LVU764
 293:System.cpp    **** 				}
 2433               		.loc 1 293 23 is_stmt 0 view .LVU765
 2434 0b3e 40E4      		ldi r20,lo8(64)
 2435               	.L224:
 298:System.cpp    **** 				}
 2436               		.loc 1 298 23 view .LVU766
 2437 0b40 65E1      		ldi r22,lo8(21)
 2438 0b42 80E0      		ldi r24,0
 2439 0b44 0E94 0000 		call _Z17MCP23017_WriteReghhh
 2440               	.LVL122:
 302:System.cpp    **** 			}
 2441               		.loc 1 302 5 is_stmt 1 view .LVU767
 302:System.cpp    **** 			}
 2442               		.loc 1 302 32 is_stmt 0 view .LVU768
 2443 0b48 81E0      		ldi r24,lo8(1)
 2444 0b4a 90E0      		ldi r25,0
 2445 0b4c 9093 0000 		sts System_MarkSelectionOvfCnt+1,r25
 2446 0b50 8093 0000 		sts System_MarkSelectionOvfCnt,r24
 2447               	.L208:
 305:System.cpp    **** 			break;
 2448               		.loc 1 305 4 is_stmt 1 view .LVU769
 305:System.cpp    **** 			break;
 2449               		.loc 1 305 26 is_stmt 0 view .LVU770
 2450 0b54 8091 0000 		lds r24,UserEditSelection
 2451 0b58 8093 0000 		sts LastUserEditSelection,r24
 306:System.cpp    **** 			
 2452               		.loc 1 306 4 is_stmt 1 view .LVU771
 2453 0b5c 00C0      		rjmp .L173
 2454               	.L209:
 297:System.cpp    **** 					MCP23017_WriteReg(MCP23017_UI_LEDS_ADDR, OLATB, ((1 << UI_MODE_PRESET_LED_PIN) | (1 << (UserEd
 2455               		.loc 1 297 6 view .LVU772
 297:System.cpp    **** 					MCP23017_WriteReg(MCP23017_UI_LEDS_ADDR, OLATB, ((1 << UI_MODE_PRESET_LED_PIN) | (1 << (UserEd
 2456               		.loc 1 297 23 is_stmt 0 view .LVU773
 2457 0b5e 40E0      		ldi r20,0
 2458 0b60 64E1      		ldi r22,lo8(20)
 2459 0b62 80E0      		ldi r24,0
 2460 0b64 0E94 0000 		call _Z17MCP23017_WriteReghhh
 2461               	.LVL123:
 298:System.cpp    **** 				}
 2462               		.loc 1 298 6 is_stmt 1 view .LVU774
 298:System.cpp    **** 				}
 2463               		.loc 1 298 94 is_stmt 0 view .LVU775
 2464 0b68 8091 0000 		lds r24,UserEditSelection
 298:System.cpp    **** 				}
 2465               		.loc 1 298 112 view .LVU776
 2466 0b6c 8850      		subi r24,8
 2467 0b6e 990B      		sbc r25,r25
 298:System.cpp    **** 				}
 2468               		.loc 1 298 90 view .LVU777
 2469 0b70 41E0      		ldi r20,lo8(1)
 2470 0b72 50E0      		ldi r21,0
 2471 0b74 00C0      		rjmp 2f
 2472               		1:
 2473 0b76 440F      		lsl r20
 2474               		2:
 2475 0b78 8A95      		dec r24
 2476 0b7a 02F4      		brpl 1b
 298:System.cpp    **** 				}
 2477               		.loc 1 298 85 view .LVU778
 2478 0b7c 4064      		ori r20,lo8(64)
 2479 0b7e 00C0      		rjmp .L224
 2480               	.L176:
 308:System.cpp    **** 			/* Disable Auto toggle */
 2481               		.loc 1 308 3 is_stmt 1 view .LVU779
 310:System.cpp    **** 			ModeEditPresetLED.Clear();
 2482               		.loc 1 310 4 view .LVU780
 310:System.cpp    **** 			ModeEditPresetLED.Clear();
 2483               		.loc 1 310 20 is_stmt 0 view .LVU781
 2484 0b80 80E0      		ldi r24,lo8(ModeRunLED)
 2485 0b82 90E0      		ldi r25,hi8(ModeRunLED)
 2486 0b84 0E94 0000 		call _ZN10MCP_Output5ClearEv
 2487               	.LVL124:
 311:System.cpp    **** 			ModeEditMidiLED.Set();
 2488               		.loc 1 311 4 is_stmt 1 view .LVU782
 311:System.cpp    **** 			ModeEditMidiLED.Set();
 2489               		.loc 1 311 27 is_stmt 0 view .LVU783
 2490 0b88 80E0      		ldi r24,lo8(ModeEditPresetLED)
 2491 0b8a 90E0      		ldi r25,hi8(ModeEditPresetLED)
 2492 0b8c 0E94 0000 		call _ZN10MCP_Output5ClearEv
 2493               	.LVL125:
 312:System.cpp    **** 			
 2494               		.loc 1 312 4 is_stmt 1 view .LVU784
 312:System.cpp    **** 			
 2495               		.loc 1 312 23 is_stmt 0 view .LVU785
 2496 0b90 80E0      		ldi r24,lo8(ModeEditMidiLED)
 2497 0b92 90E0      		ldi r25,hi8(ModeEditMidiLED)
 2498 0b94 0E94 0000 		call _ZN10MCP_Output3SetEv
 2499               	.LVL126:
 315:System.cpp    **** 			{
 2500               		.loc 1 315 4 is_stmt 1 view .LVU786
 315:System.cpp    **** 			{
 2501               		.loc 1 315 20 is_stmt 0 view .LVU787
 2502 0b98 8091 0000 		lds r24,SetMidiEdit
 317:System.cpp    **** 			}
 2503               		.loc 1 317 21 view .LVU788
 2504 0b9c E12C      		mov r14,__zero_reg__
 2505 0b9e 00E0      		ldi r16,0
 2506 0ba0 20E0      		ldi r18,0
 315:System.cpp    **** 			{
 2507               		.loc 1 315 4 view .LVU789
 2508 0ba2 8111      		cpse r24,__zero_reg__
 2509 0ba4 00C0      		rjmp .L211
 317:System.cpp    **** 			}
 2510               		.loc 1 317 5 is_stmt 1 view .LVU790
 317:System.cpp    **** 			}
 2511               		.loc 1 317 21 is_stmt 0 view .LVU791
 2512 0ba6 40E2      		ldi r20,lo8(32)
 2513 0ba8 6EE6      		ldi r22,lo8(110)
 2514 0baa 89E6      		ldi r24,lo8(105)
 2515               	.L225:
 321:System.cpp    **** 			}
 2516               		.loc 1 321 21 view .LVU792
 2517 0bac 0E94 0000 		call _Z16SP10281_WriteAllccchhh
 2518               	.LVL127:
 324:System.cpp    **** 			
 2519               		.loc 1 324 4 is_stmt 1 view .LVU793
 324:System.cpp    **** 			
 2520               		.loc 1 324 16 is_stmt 0 view .LVU794
 2521 0bb0 8EE0      		ldi r24,lo8(14)
 2522 0bb2 00C0      		rjmp .L227
 2523               	.L211:
 321:System.cpp    **** 			}
 2524               		.loc 1 321 5 is_stmt 1 view .LVU795
 321:System.cpp    **** 			}
 2525               		.loc 1 321 21 is_stmt 0 view .LVU796
 2526 0bb4 44E7      		ldi r20,lo8(116)
 2527 0bb6 65E7      		ldi r22,lo8(117)
 2528 0bb8 8FE6      		ldi r24,lo8(111)
 2529 0bba 00C0      		rjmp .L225
 2530               	.L174:
 329:System.cpp    **** 			/* Get setup for active preset */
 2531               		.loc 1 329 3 is_stmt 1 view .LVU797
 331:System.cpp    **** 			{
 2532               		.loc 1 331 4 view .LVU798
 331:System.cpp    **** 			{
 2533               		.loc 1 331 20 is_stmt 0 view .LVU799
 2534 0bbc 8091 0000 		lds r24,SetMidiEdit
 333:System.cpp    **** 				LastTempSelectMidiPC = PresetTable[ActivePreset].MIDI_PC_In;
 2535               		.loc 1 333 36 view .LVU800
 2536 0bc0 E091 0000 		lds r30,ActivePreset
 331:System.cpp    **** 			{
 2537               		.loc 1 331 4 view .LVU801
 2538 0bc4 8111      		cpse r24,__zero_reg__
 2539 0bc6 00C0      		rjmp .L213
 333:System.cpp    **** 				LastTempSelectMidiPC = PresetTable[ActivePreset].MIDI_PC_In;
 2540               		.loc 1 333 5 is_stmt 1 view .LVU802
 333:System.cpp    **** 				LastTempSelectMidiPC = PresetTable[ActivePreset].MIDI_PC_In;
 2541               		.loc 1 333 50 is_stmt 0 view .LVU803
 2542 0bc8 84E0      		ldi r24,lo8(4)
 2543 0bca E89F      		mul r30,r24
 2544 0bcc F001      		movw r30,r0
 2545 0bce 1124      		clr __zero_reg__
 2546 0bd0 E050      		subi r30,lo8(-(PresetTable))
 2547 0bd2 F040      		sbci r31,hi8(-(PresetTable))
 2548 0bd4 8281      		ldd r24,Z+2
 333:System.cpp    **** 				LastTempSelectMidiPC = PresetTable[ActivePreset].MIDI_PC_In;
 2549               		.loc 1 333 22 view .LVU804
 2550 0bd6 8093 0000 		sts TempSelectMidiPC,r24
 334:System.cpp    **** 			}
 2551               		.loc 1 334 5 is_stmt 1 view .LVU805
 334:System.cpp    **** 			}
 2552               		.loc 1 334 40 is_stmt 0 view .LVU806
 2553 0bda E091 0000 		lds r30,ActivePreset
 334:System.cpp    **** 			}
 2554               		.loc 1 334 54 view .LVU807
 2555 0bde 84E0      		ldi r24,lo8(4)
 2556 0be0 E89F      		mul r30,r24
 2557 0be2 F001      		movw r30,r0
 2558 0be4 1124      		clr __zero_reg__
 2559 0be6 E050      		subi r30,lo8(-(PresetTable))
 2560 0be8 F040      		sbci r31,hi8(-(PresetTable))
 2561 0bea 8281      		ldd r24,Z+2
 2562               	.L226:
 339:System.cpp    **** 			}
 2563               		.loc 1 339 26 view .LVU808
 2564 0bec 8093 0000 		sts LastTempSelectMidiPC,r24
 343:System.cpp    **** 			{
 2565               		.loc 1 343 4 is_stmt 1 view .LVU809
 343:System.cpp    **** 			{
 2566               		.loc 1 343 25 is_stmt 0 view .LVU810
 2567 0bf0 8091 0000 		lds r24,TempSelectMidiPC
 343:System.cpp    **** 			{
 2568               		.loc 1 343 4 view .LVU811
 2569 0bf4 8F3F      		cpi r24,lo8(-1)
 2570 0bf6 01F4      		brne .L215
 345:System.cpp    **** 			}
 2571               		.loc 1 345 5 is_stmt 1 view .LVU812
 345:System.cpp    **** 			}
 2572               		.loc 1 345 21 is_stmt 0 view .LVU813
 2573 0bf8 E12C      		mov r14,__zero_reg__
 2574 0bfa 00E0      		ldi r16,0
 2575 0bfc 20E0      		ldi r18,0
 2576 0bfe 46E6      		ldi r20,lo8(102)
 2577 0c00 66E6      		ldi r22,lo8(102)
 2578 0c02 8FE6      		ldi r24,lo8(111)
 2579 0c04 0E94 0000 		call _Z16SP10281_WriteAllccchhh
 2580               	.LVL128:
 2581               	.L216:
 352:System.cpp    **** 			
 2582               		.loc 1 352 4 is_stmt 1 view .LVU814
 352:System.cpp    **** 			
 2583               		.loc 1 352 16 is_stmt 0 view .LVU815
 2584 0c08 80E1      		ldi r24,lo8(16)
 2585 0c0a 00C0      		rjmp .L227
 2586               	.L213:
 338:System.cpp    **** 				LastTempSelectMidiPC = PresetTable[ActivePreset].MIDI_PC_Out;
 2587               		.loc 1 338 5 is_stmt 1 view .LVU816
 338:System.cpp    **** 				LastTempSelectMidiPC = PresetTable[ActivePreset].MIDI_PC_Out;
 2588               		.loc 1 338 50 is_stmt 0 view .LVU817
 2589 0c0c 84E0      		ldi r24,lo8(4)
 2590 0c0e E89F      		mul r30,r24
 2591 0c10 F001      		movw r30,r0
 2592 0c12 1124      		clr __zero_reg__
 2593 0c14 E050      		subi r30,lo8(-(PresetTable))
 2594 0c16 F040      		sbci r31,hi8(-(PresetTable))
 2595 0c18 8381      		ldd r24,Z+3
 338:System.cpp    **** 				LastTempSelectMidiPC = PresetTable[ActivePreset].MIDI_PC_Out;
 2596               		.loc 1 338 22 view .LVU818
 2597 0c1a 8093 0000 		sts TempSelectMidiPC,r24
 339:System.cpp    **** 			}
 2598               		.loc 1 339 5 is_stmt 1 view .LVU819
 339:System.cpp    **** 			}
 2599               		.loc 1 339 40 is_stmt 0 view .LVU820
 2600 0c1e E091 0000 		lds r30,ActivePreset
 339:System.cpp    **** 			}
 2601               		.loc 1 339 54 view .LVU821
 2602 0c22 84E0      		ldi r24,lo8(4)
 2603 0c24 E89F      		mul r30,r24
 2604 0c26 F001      		movw r30,r0
 2605 0c28 1124      		clr __zero_reg__
 2606 0c2a E050      		subi r30,lo8(-(PresetTable))
 2607 0c2c F040      		sbci r31,hi8(-(PresetTable))
 2608 0c2e 8381      		ldd r24,Z+3
 2609 0c30 00C0      		rjmp .L226
 2610               	.L215:
 349:System.cpp    **** 			}
 2611               		.loc 1 349 5 is_stmt 1 view .LVU822
 349:System.cpp    **** 			}
 2612               		.loc 1 349 24 is_stmt 0 view .LVU823
 2613 0c32 8091 0000 		lds r24,TempSelectMidiPC
 2614 0c36 90E0      		ldi r25,0
 2615 0c38 0E94 0000 		call _Z19SP10281_WriteNumbers
 2616               	.LVL129:
 2617 0c3c 00C0      		rjmp .L216
 2618               		.cfi_endproc
 2619               	.LFE2:
 2621               	.global	LastUserEditSelection
 2622               		.section .bss
 2625               	LastUserEditSelection:
 2626 0000 00        		.zero	1
 2627               	.global	UserEditSelection
 2630               	UserEditSelection:
 2631 0001 00        		.zero	1
 2632               	.global	LastLoopModePreset
 2633               		.data
 2636               	LastLoopModePreset:
 2637 0000 00        		.byte	0
 2638 0001 00        		.byte	0
 2639 0002 FF        		.byte	-1
 2640 0003 FF        		.byte	-1
 2641               	.global	LoopModePreset
 2644               	LoopModePreset:
 2645 0004 00        		.byte	0
 2646 0005 00        		.byte	0
 2647 0006 FF        		.byte	-1
 2648 0007 FF        		.byte	-1
 2649               	.global	PresetTable
 2650               		.section .bss
 2653               	PresetTable:
 2654 0002 0000 0000 		.zero	32
 2654      0000 0000 
 2654      0000 0000 
 2654      0000 0000 
 2654      0000 0000 
 2655               	.global	LastTempSelectMidiPC
 2658               	LastTempSelectMidiPC:
 2659 0022 00        		.zero	1
 2660               	.global	TempSelectMidiPC
 2663               	TempSelectMidiPC:
 2664 0023 00        		.zero	1
 2665               	.global	SetMidiEdit
 2668               	SetMidiEdit:
 2669 0024 00        		.zero	1
 2670               	.global	LastSystemUIMode
 2673               	LastSystemUIMode:
 2674 0025 00        		.zero	1
 2675               	.global	SystemUIMode
 2678               	SystemUIMode:
 2679 0026 00        		.zero	1
 2680               	.global	System_MidiChannel
 2683               	System_MidiChannel:
 2684 0027 00        		.zero	1
 2685               	.global	LastTempSelectMidiChannel
 2688               	LastTempSelectMidiChannel:
 2689 0028 00        		.zero	1
 2690               	.global	TempSelectMidiChannel
 2693               	TempSelectMidiChannel:
 2694 0029 00        		.zero	1
 2695               	.global	SystemRunMode
 2698               	SystemRunMode:
 2699 002a 00        		.zero	1
 2700               	.global	LastTempSelectPreset
 2703               	LastTempSelectPreset:
 2704 002b 00        		.zero	1
 2705               	.global	TempSelectPreset
 2708               	TempSelectPreset:
 2709 002c 00        		.zero	1
 2710               	.global	LastActivePreset
 2713               	LastActivePreset:
 2714 002d 00        		.zero	1
 2715               	.global	ActivePreset
 2718               	ActivePreset:
 2719 002e 00        		.zero	1
 2720               	.global	LastSystemState
 2723               	LastSystemState:
 2724 002f 00        		.zero	1
 2725               	.global	SystemState
 2728               	SystemState:
 2729 0030 00        		.zero	1
 2730               	.global	System_MarkSelectionFlag
 2733               	System_MarkSelectionFlag:
 2734 0031 00        		.zero	1
 2735               	.global	System_MarkSelectionOvfCnt
 2738               	System_MarkSelectionOvfCnt:
 2739 0032 0000      		.zero	2
 2740               	.global	System_TempSelectFlag
 2743               	System_TempSelectFlag:
 2744 0034 00        		.zero	1
 2745               	.global	System_TempSelectOvfCnt
 2748               	System_TempSelectOvfCnt:
 2749 0035 0000      		.zero	2
 2750               		.text
 2751               	.Letext0:
 2752               		.file 3 "/usr/avr/include/stdint.h"
 2753               		.file 4 "MIDI.h"
 2754               		.file 5 "MCP23017.h"
 2755               		.file 6 "RotaryEncoder.h"
 2756               		.file 7 "UI.h"
 2757               		.file 8 "Tuner.h"
 2758               		.file 9 "PedalCom.h"
 2759               		.file 10 "SP10281_3x7segment.h"
 2760               		.file 11 "util.h"
 2761               		.file 12 "/usr/avr/include/avr/eeprom.h"
 2762               		.file 13 "InputCapture.h"
DEFINED SYMBOLS
                            *ABS*:0000000000000000 System.cpp
     /tmp/ccUXmjUh.s:2      *ABS*:000000000000003e __SP_H__
     /tmp/ccUXmjUh.s:3      *ABS*:000000000000003d __SP_L__
     /tmp/ccUXmjUh.s:4      *ABS*:000000000000003f __SREG__
     /tmp/ccUXmjUh.s:5      *ABS*:0000000000000000 __tmp_reg__
     /tmp/ccUXmjUh.s:6      *ABS*:0000000000000001 __zero_reg__
     /tmp/ccUXmjUh.s:12     .text:0000000000000000 _Z30System_HandleTempSelectTimeoutv
     /tmp/ccUXmjUh.s:2728   .bss:0000000000000030 SystemState
     /tmp/ccUXmjUh.s:2658   .bss:0000000000000022 LastTempSelectMidiPC
     /tmp/ccUXmjUh.s:2663   .bss:0000000000000023 TempSelectMidiPC
     /tmp/ccUXmjUh.s:2683   .bss:0000000000000027 System_MidiChannel
     /tmp/ccUXmjUh.s:2693   .bss:0000000000000029 TempSelectMidiChannel
     /tmp/ccUXmjUh.s:2708   .bss:000000000000002c TempSelectPreset
     /tmp/ccUXmjUh.s:2718   .bss:000000000000002e ActivePreset
     /tmp/ccUXmjUh.s:2703   .bss:000000000000002b LastTempSelectPreset
     /tmp/ccUXmjUh.s:151    .text:00000000000000a0 _Z26System_HandleMarkSelectionv
     /tmp/ccUXmjUh.s:2644   .data:0000000000000004 LoopModePreset
     /tmp/ccUXmjUh.s:192    .text:00000000000000c6 _Z25System_HandlePedalCommand3CMDhPh
     /tmp/ccUXmjUh.s:2713   .bss:000000000000002d LastActivePreset
     /tmp/ccUXmjUh.s:2698   .bss:000000000000002a SystemRunMode
     /tmp/ccUXmjUh.s:381    .text:000000000000017a _Z30System_HandleMIDIProgramChangev
     /tmp/ccUXmjUh.s:2653   .bss:0000000000000002 PresetTable
     /tmp/ccUXmjUh.s:426    .text:0000000000000198 _Z20System_UpdateUI_LEDsv
     /tmp/ccUXmjUh.s:605    .text:0000000000000242 _Z31System_HandleRotaryEncoderInputv
     /tmp/ccUXmjUh.s:2748   .bss:0000000000000035 System_TempSelectOvfCnt
     /tmp/ccUXmjUh.s:2678   .bss:0000000000000026 SystemUIMode
     /tmp/ccUXmjUh.s:2630   .bss:0000000000000001 UserEditSelection
     /tmp/ccUXmjUh.s:2668   .bss:0000000000000024 SetMidiEdit
     /tmp/ccUXmjUh.s:1299   .text:00000000000005c6 _Z22System_UpdateUI_Relaysv
     /tmp/ccUXmjUh.s:1482   .text:0000000000000670 _Z19System_ChangePresetv
     /tmp/ccUXmjUh.s:1617   .text:0000000000000724 _Z21System_UpdateLoopCtrlv
     /tmp/ccUXmjUh.s:1744   .text:00000000000007a2 _Z10System_Runv
     /tmp/ccUXmjUh.s:2688   .bss:0000000000000028 LastTempSelectMidiChannel
     /tmp/ccUXmjUh.s:2723   .bss:000000000000002f LastSystemState
     /tmp/ccUXmjUh.s:2636   .data:0000000000000000 LastLoopModePreset
     /tmp/ccUXmjUh.s:2673   .bss:0000000000000025 LastSystemUIMode
     /tmp/ccUXmjUh.s:2625   .bss:0000000000000000 LastUserEditSelection
     /tmp/ccUXmjUh.s:2738   .bss:0000000000000032 System_MarkSelectionOvfCnt
     /tmp/ccUXmjUh.s:2733   .bss:0000000000000031 System_MarkSelectionFlag
     /tmp/ccUXmjUh.s:2743   .bss:0000000000000034 System_TempSelectFlag

UNDEFINED SYMBOLS
_Z16SP10281_WriteAllccchhh
_Z23RotaryEncoder_IsPressedv
_Z19SP10281_WriteNumbers
_Z17MCP23017_WriteReghhh
_Z12Util_Bit2Inth
MIDI_ReceivedProgram
LoopLEDs
_ZN10MCP_Output8getStateEv
_ZN10MCP_Output3SetEv
CtrlSwitchLEDs
_ZN10MCP_Output5ClearEv
__tablejump2__
RotEnc_State
eeprom_write_byte
eeprom_write_block
LoopRelays
CtrlSwitchRelays
_Z26MIDI_TransmitProgramChangeh
_Z21PedalCom_QueueCommand3CMDhPh
eeprom_read_block
eeprom_read_byte
ModeRunLED
ModeEditPresetLED
ModeEditMidiLED
_Z13Tuner_Disablev
_Z12Tuner_Enablev
_Z22InputCapture_Availablev
_Z17Tuner_FetchCountsv
_Z21Tuner_DetectFrequencyv
Tuner_TransmitTimerFlag
_Z25Tuner_GenerateDisplayDatav
Tuner_LED_Data
Tuner_7seg_Data
_ZN10MCP_Output10AutoToggleEv
__do_copy_data
__do_clear_bss
